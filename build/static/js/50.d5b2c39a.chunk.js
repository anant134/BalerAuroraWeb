(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[50],{1062:function(e,t,c){"use strict";c.r(t);var n=c(165),r=c(20),a=c(653),i=c(1),s=c(22),o=c(648),u=c(660),l=c.n(u),b=c(661),j=c.n(b),d=c(649),m=c(654),h=c(164),p=c(4),O=function(e,t,c){switch(e){case 1:h.b.success(t,{position:h.b.POSITION.TOP_CENTER});break;case 2:var n;n=void 0!==c?Object(p.jsxs)("div",{children:["Please contact to administrator!",Object(p.jsx)("br",{}),t]}):Object(p.jsx)("div",{children:t}),h.b.error(Object(p.jsxs)("div",{children:[Object(p.jsx)(d.a,{name:"cil-warning"})," Error",n]}),{position:h.b.POSITION.TOP_CENTER})}};t.default=function(){var e=[{name:"Role Name",selector:"rolename",sortable:!0},{name:"Status",selector:"isactive",sortable:!0,cell:function(e){return Object(p.jsx)(o.b,{color:"1"==e.isactive?"success":"danger",children:"1"==e.isactive?"Active":"In Active"})}},{name:"Action",selector:"action",ignoreRowClick:!0,cell:function(e){return Object(p.jsx)(d.a,{name:"cil-pencil",onClick:function(t){return X(e,t)},className:"mfe-2 custcusrsor"})}}],t=[],c=""==localStorage.getItem("userinfo")?"":JSON.parse(localStorage.getItem("userinfo")),u=(Object(s.g)(),Object(s.h)().search.match(/page=([0-9]+)/,"")),b=Number(u&&u[1]?u[1]:1),h=Object(i.useState)(b),f=Object(a.a)(h,2),x=(f[0],f[1],Object(i.useState)(!1)),g=Object(a.a)(x,2),v=g[0],k=g[1],y=Object(i.useState)(!1),S=Object(a.a)(y,2),w=S[0],C=(S[1],Object(i.useState)({columns:e,data:t})),N=Object(a.a)(C,2),T=(N[0],N[1],Object(i.useState)({columns:e,data:t})),I=Object(a.a)(T,2),R=I[0],P=I[1],A=Object(i.useState)(""),E=Object(a.a)(A,2),F=(E[0],E[1],Object(i.useState)([])),J=Object(a.a)(F,2),K=(J[0],J[1]),z=Object(i.useState)([]),M=Object(a.a)(z,2),q=M[0],_=M[1],D=Object(i.useState)([]),H=Object(a.a)(D,2),W=(H[0],H[1]),B=Object(i.useState)([]),L=Object(a.a)(B,2),Q=(L[0],L[1],Object(i.useState)({rolename:"",appmenu:"",menu:"",id:"",isactive:!0})),U=Object(a.a)(Q,2),V=U[0],G=U[1],X=function(e,t){Object(m.a)("role",{requestfor:"getmenubyroleid",data:{id:e.id}}).then((function(t){if(1==t.resultkey){var c=t.resultvalue;if(c.length>0){var n=null==c[0].appmenu?[]:JSON.parse(c[0].appmenu),a=null==c[0].menuitem?[]:JSON.parse(c[0].menuitem);setTimeout((function(){G((function(t){return Object(r.a)(Object(r.a)({},t),{},{rolename:e.rolename,appmenu:n,menu:a,id:e.id,isactive:"1"==c[0].isactive})})),k(!v)}),1e3)}else setTimeout((function(){G((function(e){return Object(r.a)(Object(r.a)({},e),{},{rolename:"",appmenu:[],menu:[],id:"",isactive:!0})})),k(!v)}),1e3)}else G((function(e){return Object(r.a)(Object(r.a)({},e),{},{rolename:"",appmenu:[],menu:[],id:"",isactive:!0})}))})).catch((function(e){G((function(e){return Object(r.a)(Object(r.a)({},e),{},{rolename:"",appmenu:[],menu:[],id:"",isactive:!0})})),O(2,e.toString(),1)}))},Y=function(e,t){if("checkbox"===t.target.type){var c=1==t.target.checked&&t.target.checked,n=q.map((function(t){return t.id===e.id?Object(r.a)(Object(r.a)({},t),{},{allow:c}):t}));if(_(n),c)V.appmenu.push({id:e.menuuuid,desc:e.menuname});else if(V.appmenu.length>0)for(var a=0;a<V.appmenu.length;a++){if(V.appmenu[a].id==e.id){V.appmenu.slice(0,a);break}}}},Z=function(e){var t=e.target,c=(t.id,t.value);"checkbox"===e.target.type?G(Object(r.a)(Object(r.a)({},V),{},Object(n.a)({},"isactive",1==e.target.checked&&e.target.checked))):G(Object(r.a)(Object(r.a)({},V),{},Object(n.a)({},"rolename",c)))};Object(i.useEffect)((function(){ee(),te(),$()}),[]),Object(i.useEffect)((function(){for(var e=0;e<q.length;e++){q[e].allow=!1}if(""!=V.rolename){for(var t=function(e){var t=V.appmenu[e];(a=q.filter((function(e){return e.menuuuid==t.id}))).length>0&&(a[0].allow=!0)},c=0;c<V.appmenu.length;c++){t(c)}for(var n=function(e){var t=V.menu[e];(a=q.filter((function(e){return e.menuuuid==t.id}))).length>0&&(a[0].allow=!0)},r=0;r<V.menu.length;r++){var a;n(r)}}}),[V]);var $=function(){Object(m.a)("role",{requestfor:"getmenudetail",data:{}}).then((function(e){if(1==e.resultkey){var t=e.resultvalue;if(t.length>0){for(var c=0;c<t.length;c++){t[c].allow=!1}_(t)}}})).catch((function(e){O(2,e.toString(),1)}))},ee=function(){Object(m.a)("role",{requestfor:"getrole",data:{flag:"a"}}).then((function(e){if(1==e.resultkey){var t=e.resultvalue;if(t.length>0){var c=t.filter((function(e){return"0"!=e.id}));P(Object(r.a)(Object(r.a)({},R),{},Object(n.a)({},"data",c)));for(var a=[{value:0,label:"Select Role"}],i=0;i<t.length;i++){var s=t[i];s.isactive&&a.push({value:parseInt(s.id),label:s.rolename})}K(a)}}})).catch((function(e){O(2,e.toString(),1)}))},te=function(){W(0),G((function(e){return Object(r.a)(Object(r.a)({},e),{},{rolename:"",appmenu:[],menu:[],id:"",isactive:!0})}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(o.ub,{children:Object(p.jsx)(o.u,{xl:12,children:Object(p.jsxs)(o.j,{children:[Object(p.jsx)(o.n,{children:Object(p.jsxs)(o.ub,{children:[Object(p.jsxs)(o.u,{xl:6,children:["Role",Object(p.jsx)("small",{className:"text-muted",children:" Master"})]}),Object(p.jsx)(o.u,{xl:6,style:{textAlign:"end"},children:Object(p.jsx)(o.f,{onClick:function(){return te(),void k(!v)},className:"mr-1",color:"primary",children:"Add New"})})]})}),Object(p.jsxs)(o.k,{children:[Object(p.jsxs)(o.eb,{show:v,onClose:function(){return k(!v)},size:"lg",children:[Object(p.jsx)(o.hb,{closeButton:!0,children:Object(p.jsx)(o.ib,{children:"Role "})}),Object(p.jsx)(o.fb,{children:Object(p.jsx)(o.u,{md:"12",children:Object(p.jsxs)(o.J,{children:[Object(p.jsxs)(o.ub,{children:[Object(p.jsx)(o.u,{xs:"6",className:"text-right",children:Object(p.jsxs)(o.T,{className:"mb-3",children:[Object(p.jsx)(o.V,{children:Object(p.jsxs)(o.W,{children:[Object(p.jsx)(d.a,{name:"cil-settings",style:{color:"red"}}),Object(p.jsx)("sup",{style:{color:"red"},children:"*"})]})}),Object(p.jsx)(o.Q,{onChange:Z,type:"text",value:V.rolename,id:"rolename",placeholder:"Enter role name"})]})}),Object(p.jsx)(o.u,{xs:"4",children:Object(p.jsx)(o.K,{row:!0,children:Object(p.jsx)(o.u,{md:"9",children:Object(p.jsxs)(o.K,{variant:"custom-checkbox",inline:!0,children:[Object(p.jsx)(o.R,{custom:!0,id:"isactive",name:"inline-checkbox2",value:V.isactive,checked:V.isactive,onChange:Z}),Object(p.jsx)(o.ab,{variant:"custom-checkbox",htmlFor:"isactive",children:"Active"})]})})})})]}),Object(p.jsx)("h3",{children:"Web Setting"}),Object(p.jsx)("br",{}),Object(p.jsx)(o.ub,{children:function(){var e=[];if(q.length>0){for(var t=q.filter((function(e){return 0==e.menufor})),c=function(c){var n=t[c];e.push(Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(o.u,{xs:"4",children:Object(p.jsx)(o.K,{row:!0,children:Object(p.jsx)(o.u,{md:"9",children:Object(p.jsxs)(o.K,{variant:"custom-checkbox",inline:!0,children:[Object(p.jsx)(o.R,{custom:!0,id:n.menuname,name:"inline-checkbox2",value:n.allow,checked:n.allow,onChange:function(e){return Y(n,e)}}),Object(p.jsx)(o.ab,{variant:"custom-checkbox",htmlFor:n.menuname,children:n.menuname})]})})})})}))},n=0;n<t.length;n++)c(n);return e}}()}),Object(p.jsx)("h3",{children:"Mobile Setting"}),Object(p.jsx)("br",{}),Object(p.jsx)(o.ub,{children:function(){var e=[];if(q.length>0){for(var t=q.filter((function(e){return 1==e.menufor})),c=function(c){var n=t[c];e.push(Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(o.u,{xs:"4",children:Object(p.jsx)(o.K,{row:!0,children:Object(p.jsx)(o.u,{md:"9",children:Object(p.jsxs)(o.K,{variant:"custom-checkbox",inline:!0,children:[Object(p.jsx)(o.R,{custom:!0,id:n.menuname,name:"inline-checkbox2",value:n.allow,checked:n.allow,onChange:function(e){return Y(n,e)}}),Object(p.jsx)(o.ab,{variant:"custom-checkbox",htmlFor:n.menuname,children:n.menuname})]})})})})}))},n=0;n<t.length;n++)c(n);return e}}()})]})})}),Object(p.jsxs)(o.gb,{children:[Object(p.jsx)(o.f,{color:"primary",disabled:w,onClick:function(){return function(){0==V.rolename.length&&O(2,"Please role name !");var e=q.filter((function(e){return 1==e.allow})),t=[],a=[];if(e.length>0)for(var i=0;i<e.length;i++){var s=e[i];"0"==s.menufor?a.push({id:s.menuuuid,desc:s.menuname}):t.push({id:s.menuuuid,desc:s.menuname})}V.id,V.id,V.rolename,c.id,Object(m.a)("role",{requestfor:"role",data:{flag:""==V.id?"i":"u",isactive:1==V.isactive?1:0,roleid:V.id,rolename:V.rolename,appmenu:t,menuitem:a,loggedinid:c.id}}).then((function(e){if(1==e.resultkey)if(""!=V.id){var t=R.data.map((function(e){return e.id===V.id?Object(r.a)(Object(r.a)({},e),{},{isactive:1==V.isactive?"1":"0",rolename:V.rolename}):e}));console.log(t),P(Object(r.a)(Object(r.a)({},R),{},Object(n.a)({},"data",t))),te(),k(!v),O(1,"Data updated successfully.")}else{var c={id:e.resultvalue[0].rowid,isactive:1==V.isactive?"1":"0",rolename:V.rolename};P(Object(r.a)(Object(r.a)({},R),{},Object(n.a)({},"data",c))),te(),k(!v),O(1,"Data save successfully.")}})).catch((function(e){}))}()},children:"Save"})," ",Object(p.jsx)(o.f,{color:"secondary",onClick:function(){return k(!v)},children:"Cancel"})]})]}),Object(p.jsx)(j.a,Object(r.a)(Object(r.a)({},R),{},{children:Object(p.jsx)(l.a,{noHeader:!0,defaultSortField:"id",defaultSortAsc:!1,pagination:!0,highlightOnHover:!0})}))]})]})})})})}},654:function(e,t,c){"use strict";var n=c(676),r=c.n(n),a=c(677),i=(c(659),function(){var e=Object(a.a)(r.a.mark((function e(t,c){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},i="https://maubantourism.smartpay.ph/tourbookingphp/"+t+".php",e.next=4,fetch(i,n).then(function(){var e=Object(a.a)(r.a.mark((function e(t){var c,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(c=e.sent,t.ok){e.next=8;break}return n=c&&c.message||t.status,e.abrupt("return",Promise.reject(n));case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return Promise.reject(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}());t.a=i},659:function(e,t,c){"use strict";var n,r;c(682);n="https://maubantourism.smartpay.ph",r="dev"==c(663).mode?{fileuploadurl:"/tourbookingphp/upload.php",guesttemplate:n+"/tourbookingphp/guesttemplate.xlsx",baseurl:n+"/tourbookingphp/"}:{fileuploadurl:"/tourbookingphp/upload.php",guesttemplate:"/tourbookingphp/guesttemplate.xlsx",baseurl:"/tourbookingphp/"},t.a=r},663:function(e){e.exports=JSON.parse('{"name":"@coreui/coreui-free-react-admin-template","version":"3.1.1","description":"Mauban","mode":"pro","author":{"name":"Mauban","url":"https://coreui.io","github":"https://github.com/coreui","twitter":"https://twitter.com/core_ui"},"contributors":[{"name":"CoreUI Team","url":"https://github.com/orgs/coreui/people"}],"homepage":".","copyright":"Copyright 2017-2020 creativeLabs \u0141ukasz Holeczek","license":"MIT","private":true,"repository":{"type":"git","url":"git@github.com:coreui/coreui-free-react-admin-template.git"},"dependencies":{"@coreui/chartjs":"^2.0.0","@coreui/coreui":"^3.4.0","@coreui/icons":"^2.0.0-rc.0","@coreui/icons-react":"^1.0.2","@coreui/react":"^3.3.4","@coreui/react-chartjs":"^1.0.1","@coreui/utils":"^1.3.1","@tinymce/tinymce-react":"^3.12.0","bootstrap":"^4.5.3","classnames":"^2.2.6","core-js":"^3.8.0","env-cmd":"^10.1.0","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.5","moment":"^2.29.1","node-sass":"^4.14.1","prop-types":"^15.7.2","react":"^16.14.0","react-app-polyfill":"^2.0.0","react-bootstrap":"^1.4.3","react-csv":"^2.0.3","react-data-table-component":"^6.11.6","react-data-table-component-extensions":"^1.5.0","react-date-picker":"^8.0.5","react-datepicker":"^3.6.0","react-dom":"^16.14.0","react-redux":"^7.2.2","react-router-dom":"^5.2.0","react-select":"^3.1.1","react-select-checked":"^0.1.12","react-time-picker":"^4.1.1","react-toastify":"^6.1.0","react-uuid":"^1.0.2","read-package-json":"^3.0.1","redux":"4.0.5","styled-components":"^5.2.1","xlsx":"^0.17.0"},"devDependencies":{"auto-changelog":"~2.2.1","react-scripts":"~4.0.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","test:cov":"npm test -- --coverage --watchAll=false","test:debug":"react-scripts --inspect-brk test --runInBand","eject":"react-scripts eject","changelog":"auto-changelog --starting-version 3.0.0 --commit-limit false --hide-credit"},"bugs":{"url":"https://github.com/coreui/coreui-free-react-admin-template/issues"},"eslintConfig":{"extends":"react-app"},"browserslist":[">0.2%","not dead","not ie <= 10","not op_mini all"],"jest":{"collectCoverageFrom":["src/**/*.{js,jsx}","!**/*index.js","!src/serviceWorker.js","!src/polyfill.js"]},"engines":{"node":">=10","npm":">=6"}}')}}]);
//# sourceMappingURL=50.d5b2c39a.chunk.js.map