{"ast":null,"code":"import _objectSpread from \"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\I2T\\\\Smarttech\\\\tourbookingwebgit\\\\src\\\\views\\\\pages\\\\register\\\\RegisterNew.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { CCard, CCardBody, CCardHeader, CCol, CRow, CButton, CModal, CModalTitle, CModalHeader, CModalBody, CForm, CInputGroupPrepend, CInputGroupText, CInputGroup, CInput, CFormGroup, CInputCheckbox, CLabel, CModalFooter, CBadge, CContainer, CSelect, CCardFooter } from '@coreui/react';\nimport DataTable from \"react-data-table-component\";\nimport DataTableExtensions from \"react-data-table-component-extensions\";\nimport Select from 'react-select';\nimport CIcon from '@coreui/icons-react';\nimport dataservice from '../../service/dataservice';\nimport { toast } from 'react-toastify';\nimport { InputDecimal } from \"../../commoncomponents/inputdecimal\";\nimport DatePicker from 'react-date-picker';\nimport { discounticon } from 'src/assets/icons/discounticon';\nimport moment from 'moment';\nimport uuid from 'react-uuid';\nimport FeesComputation from '../register/FeesComputation';\nimport TravelInfo from '../register/TravelInfo';\nimport GuestInfo from '../register/GuestInfo';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Toast from 'react-bootstrap/Toast';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport { userContext } from '../../../views/userContext';\nimport '../../../scss/bootstrap.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar notify = function notify(type, message, systemerror) {\n  switch (type) {\n    case 1:\n      toast.success(message, {\n        position: toast.POSITION.TOP_CENTER\n      });\n      break;\n\n    case 2:\n      var dtlmsg;\n\n      if (systemerror !== undefined) {\n        dtlmsg = /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Please contact to administrator!\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 55\n          }, _this), message]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 18\n        }, _this);\n      } else {\n        dtlmsg = /*#__PURE__*/_jsxDEV(\"div\", {\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 18\n        }, _this);\n      }\n\n      toast.error( /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(CIcon, {\n          name: \"cil-warning\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, _this), \" Error\", dtlmsg]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 19\n      }, _this), {\n        position: toast.POSITION.TOP_CENTER\n      });\n      break;\n\n    default:\n      break;\n  }\n};\n\nvar RegisterNew = function RegisterNew() {\n  _s();\n\n  var history = useHistory();\n  var Background = process.env.PUBLIC_URL + \"/bgnew.jpg\";\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      contextdata = _useState2[0],\n      setcontextdata = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isguestinfo = _useState4[0],\n      setisguestinfo = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      registrationmodalpopup = _useState6[0],\n      setRegistrationModalPopUp = _useState6[1];\n\n  var _useState7 = useState({\n    numberofguest: 0,\n    startdate: new Date(),\n    enddate: new Date(),\n    package: [],\n    boatinfo: [],\n    guestinfo: [],\n    hotel: [],\n    hotelbookingref: \"\",\n    vehicle: [],\n    fees: [{\n      feefor: \"ETAF\",\n      discountable: true,\n      amount: 0,\n      sequencenumber: 1,\n      id: 1,\n      rentprice: 0\n    }, {\n      feefor: \"Bracelet\",\n      discountable: true,\n      amount: 0,\n      sequencenumber: 2,\n      id: 4,\n      rentprice: 0\n    }, {\n      feefor: \"Boat\",\n      discountable: true,\n      amount: 0,\n      sequencenumber: 3,\n      id: 2,\n      rentprice: 0\n    }, {\n      feefor: \"Package\",\n      discountable: true,\n      amount: 0,\n      sequencenumber: 4,\n      id: 3,\n      rentprice: 0\n    }, {\n      feefor: \"IsLand Hopping\",\n      discountable: true,\n      amount: 0,\n      sequencenumber: 6,\n      id: 9,\n      rentprice: 0\n    }, {\n      feefor: \"Parking \",\n      discountable: false,\n      amount: 0,\n      sequencenumber: 6,\n      id: 5,\n      rentprice: 0\n    }, {\n      feefor: \"Discount\",\n      discountable: true,\n      amount: 0,\n      sequencenumber: 5,\n      id: 6,\n      rentprice: 0\n    }, {\n      feefor: \"Exemption\",\n      discountable: true,\n      amount: 0,\n      sequencenumber: 6,\n      id: 7,\n      rentprice: 0\n    }, {\n      feefor: \"Total\",\n      discountable: false,\n      amount: 0,\n      sequencenumber: 6,\n      id: 8,\n      rentprice: 0\n    }],\n    isguest: isguestinfo,\n    parkingnotreq: false,\n    isBulkUpload: false\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      travelinfo = _useState8[0],\n      setTravelinfo = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      feesdata = _useState10[0],\n      setFeesData = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      show = _useState12[0],\n      toggleShow = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      disclaimer = _useState14[0],\n      setDisclaimer = _useState14[1];\n\n  var clickevent = function clickevent(e) {};\n\n  var setaction = function setaction() {\n    if (isguestinfo == true) {// Savedata();\n      //\n    } else {\n      // setguestactivepostion(0);\n      // setselectedguest(guestarr[0])\n      setisguestinfo(true);\n    }\n  };\n\n  var backaction = function backaction() {\n    setisguestinfo(false);\n  };\n\n  var getfees = function getfees() {\n    dataservice(\"fees\", {\n      requestfor: 'getfees',\n      data: {\n        flag: 'a'\n      }\n    }).then(function (data) {\n      if (data.resultkey == 1) {\n        //   \n        var result = data.resultvalue;\n        setFeesData(_objectSpread(_objectSpread({}, feesdata), {}, {\n          data: result\n        }));\n      } else {//  notify(2,\"No data found\");\n      }\n    }).catch(function (edata) {\n      notify(2, edata.toString(), 1);\n    });\n  };\n\n  useEffect(function () {\n    getfees();\n    getpagedata();\n  }, []);\n\n  var editbook = function editbook() {\n    window.location.href = window.location.pathname + \"#/editbooking\";\n  };\n\n  var getpagedata = function getpagedata() {\n    dataservice(\"staticpage\", {\n      requestfor: 'getstaticpages',\n      data: {}\n    }).then(function (data) {\n      if (data.resultkey == 1) {\n        var result = data.resultvalue;\n\n        if (result.length > 0) {\n          var _filter = result.filter(function (x) {\n            return x.id == 1;\n          });\n\n          var pagedata = \"\";\n\n          if (_filter.length > 0) {\n            pagedata = _filter[0].pagedata;\n          }\n\n          setDisclaimer(pagedata);\n\n          if (pagedata != \"\") {\n            setRegistrationModalPopUp(true);\n          }\n        } // setSeteditorval({ ...editorvalue, result });\n        // setSetedit({ ...edit, [\"value\"]: result});\n        //setFeesdata({ ...feedata, [\"data\"]: result });\n\n      } else {//  notify(2,\"No data found\");\n      }\n    }).catch(function (edata) {\n      notify(2, edata.toString(), 1);\n    });\n  };\n\n  useEffect(function () {\n    if (feesdata.data != undefined) {\n      if (feesdata.data.length > 0) {\n        var feesdatavalues = travelinfo.fees;\n\n        var _loop = function _loop(index) {\n          filterdata = feesdatavalues.filter(function (x) {\n            return x.id == feesdata.data[index].id;\n          });\n\n          if (filterdata.length > 0) {\n            filterdata[0].amount = parseFloat(feesdata.data[index].price);\n            filterdata[0].rentprice = parseFloat(feesdata.data[index].rentprice);\n          }\n        };\n\n        for (var index = 0; index < feesdata.data.length; index++) {\n          var filterdata;\n\n          _loop(index);\n        }\n      }\n    }\n  }, [feesdata]);\n\n  var _useState15 = useState(travelinfo),\n      _useState16 = _slicedToArray(_useState15, 2),\n      gacc = _useState16[0],\n      setgacc = _useState16[1];\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-app c-default-layout flex-row align-items-center bg\",\n      style: {\n        background: \"url(\".concat(Background, \")\"),\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'top center',\n        backgroundSize: 'cover'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CContainer, {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          style: {\n            background: \"transparent\",\n            border: \"none\"\n          },\n          children: /*#__PURE__*/_jsxDEV(userContext.Provider, {\n            value: {\n              gacc: gacc,\n              setgacc: setgacc\n            },\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12\",\n                  style: {\n                    display: isguestinfo == true ? \"none\" : \"\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(TravelInfo, {\n                    data: gacc\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 19\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 17\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 15\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 13\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 11\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(CModal, {\n        show: registrationmodalpopup,\n        closeOnBackdrop: true,\n        backdrop: true,\n        onClose: function onClose() {\n          return setRegistrationModalPopUp(!registrationmodalpopup);\n        },\n        size: \"lg\",\n        children: [/*#__PURE__*/_jsxDEV(CModalHeader, {\n          children: /*#__PURE__*/_jsxDEV(CModalTitle, {\n            children: \"NOTICE \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 11\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(CModalBody, {\n          children: [/*#__PURE__*/_jsxDEV(CCol, {\n            md: \"12\",\n            children: /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                dangerouslySetInnerHTML: {\n                  __html: disclaimer\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 15\n              }, _this)\n            }, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(CButton, {\n            color: \"primary \",\n            style: {\n              float: \"right\"\n            },\n            onClick: function onClick() {\n              return setRegistrationModalPopUp(!registrationmodalpopup);\n            },\n            children: \"Create Booking\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#/editbooking\",\n            className: \"btn btn-primary\",\n            style: {\n              float: \"right\",\n              \"marginRight\": \"2%\"\n            },\n            children: \"Edit Booking\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 11\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 5\n    }, _this)\n  }, void 0, false);\n};\n\n_s(RegisterNew, \"XwUicaGLsvED6UfVyuxrq0rD/k8=\", false, function () {\n  return [useHistory];\n});\n\n_c = RegisterNew;\nexport default RegisterNew;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegisterNew\");","map":{"version":3,"sources":["D:/I2T/Smarttech/tourbookingwebgit/src/views/pages/register/RegisterNew.js"],"names":["React","useState","useEffect","useHistory","useLocation","CCard","CCardBody","CCardHeader","CCol","CRow","CButton","CModal","CModalTitle","CModalHeader","CModalBody","CForm","CInputGroupPrepend","CInputGroupText","CInputGroup","CInput","CFormGroup","CInputCheckbox","CLabel","CModalFooter","CBadge","CContainer","CSelect","CCardFooter","DataTable","DataTableExtensions","Select","CIcon","dataservice","toast","InputDecimal","DatePicker","discounticon","moment","uuid","FeesComputation","TravelInfo","GuestInfo","Jumbotron","Toast","Container","Button","Card","userContext","notify","type","message","systemerror","success","position","POSITION","TOP_CENTER","dtlmsg","undefined","error","RegisterNew","history","Background","process","env","PUBLIC_URL","contextdata","setcontextdata","isguestinfo","setisguestinfo","registrationmodalpopup","setRegistrationModalPopUp","numberofguest","startdate","Date","enddate","package","boatinfo","guestinfo","hotel","hotelbookingref","vehicle","fees","feefor","discountable","amount","sequencenumber","id","rentprice","isguest","parkingnotreq","isBulkUpload","travelinfo","setTravelinfo","feesdata","setFeesData","show","toggleShow","disclaimer","setDisclaimer","clickevent","e","setaction","backaction","getfees","requestfor","data","flag","then","resultkey","result","resultvalue","catch","edata","toString","getpagedata","editbook","window","location","href","pathname","length","_filter","filter","x","pagedata","feesdatavalues","index","filterdata","parseFloat","price","gacc","setgacc","background","backgroundRepeat","backgroundPosition","backgroundSize","border","display","__html","float"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,kBAAxC;AACA,SACEC,KADF,EAEEC,SAFF,EAGEC,WAHF,EAIEC,IAJF,EAKEC,IALF,EAMEC,OANF,EAOEC,MAPF,EAQEC,WARF,EASEC,YATF,EAUEC,UAVF,EAWEC,KAXF,EAYEC,kBAZF,EAaEC,eAbF,EAcEC,WAdF,EAeEC,MAfF,EAgBEC,UAhBF,EAiBEC,cAjBF,EAkBEC,MAlBF,EAmBEC,YAnBF,EAoBEC,MApBF,EAqBEC,UArBF,EAsBEC,OAtBF,EAuBEC,WAvBF,QAwBO,eAxBP;AA0BA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,mBAAP,MAAgC,uCAAhC;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,YAAT,QAA6B,qCAA7B;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,SAASC,YAAT,QAA6B,+BAA7B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,eAAP,MAA4B,6BAA5B;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,OAAO,6BAAP;;;;AACA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAACC,IAAD,EAAOC,OAAP,EAAgBC,WAAhB,EAAgC;AAC7C,UAAQF,IAAR;AACE,SAAK,CAAL;AACEhB,MAAAA,KAAK,CAACmB,OAAN,CAAcF,OAAd,EAAuB;AACrBG,QAAAA,QAAQ,EAAEpB,KAAK,CAACqB,QAAN,CAAeC;AADJ,OAAvB;AAGA;;AACF,SAAK,CAAL;AACE,UAAIC,MAAJ;;AACA,UAAIL,WAAW,KAAKM,SAApB,EAA+B;AAC7BD,QAAAA,MAAM,gBAAG;AAAA,sEAAqC;AAAA;AAAA;AAAA;AAAA,mBAArC,EAA+CN,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAT;AACD,OAFD,MAEO;AACLM,QAAAA,MAAM,gBAAG;AAAA,oBAAMN;AAAN;AAAA;AAAA;AAAA;AAAA,iBAAT;AACD;;AAEDjB,MAAAA,KAAK,CAACyB,KAAN,eAAY;AAAA,gCACV,QAAC,KAAD;AAAO,UAAA,IAAI,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,iBADU,YAGTF,MAHS;AAAA;AAAA;AAAA;AAAA;AAAA,eAAZ,EAKQ;AACNH,QAAAA,QAAQ,EAAEpB,KAAK,CAACqB,QAAN,CAAeC;AADnB,OALR;AAQA;;AAEF;AACE;AAzBJ;AA2BD,CA5BD;;AA8BA,IAAMI,WAAW,GAAG,SAAdA,WAAc,GAAM;AAAA;;AACxB,MAAMC,OAAO,GAAGzD,UAAU,EAA1B;AACA,MAAI0D,UAAU,GAAGC,OAAO,CAACC,GAAR,CAAYC,UAAZ,GAAyB,YAA1C;;AACA,kBAAsC/D,QAAQ,EAA9C;AAAA;AAAA,MAAOgE,WAAP;AAAA,MAAoBC,cAApB;;AACA,mBAAsCjE,QAAQ,CAAC,KAAD,CAA9C;AAAA;AAAA,MAAOkE,WAAP;AAAA,MAAoBC,cAApB;;AACA,mBAA4DnE,QAAQ,CAAC,KAAD,CAApE;AAAA;AAAA,MAAOoE,sBAAP;AAAA,MAA+BC,yBAA/B;;AACA,mBAAoCrE,QAAQ,CAAC;AAC3CsE,IAAAA,aAAa,EAAE,CAD4B;AAE3CC,IAAAA,SAAS,EAAE,IAAIC,IAAJ,EAFgC;AAG3CC,IAAAA,OAAO,EAAE,IAAID,IAAJ,EAHkC;AAI3CE,IAAAA,OAAO,EAAE,EAJkC;AAK3CC,IAAAA,QAAQ,EAAE,EALiC;AAM3CC,IAAAA,SAAS,EAAE,EANgC;AAO3CC,IAAAA,KAAK,EAAE,EAPoC;AAQ3CC,IAAAA,eAAe,EAAE,EAR0B;AAS3CC,IAAAA,OAAO,EAAE,EATkC;AAU3CC,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,MAAM,EAAE,MAAV;AAAkBC,MAAAA,YAAY,EAAE,IAAhC;AAAsCC,MAAAA,MAAM,EAAE,CAA9C;AAAiDC,MAAAA,cAAc,EAAE,CAAjE;AAAoEC,MAAAA,EAAE,EAAE,CAAxE;AAA2EC,MAAAA,SAAS,EAAE;AAAtF,KAAD,EACN;AAAEL,MAAAA,MAAM,EAAE,UAAV;AAAsBC,MAAAA,YAAY,EAAE,IAApC;AAA0CC,MAAAA,MAAM,EAAE,CAAlD;AAAqDC,MAAAA,cAAc,EAAE,CAArE;AAAwEC,MAAAA,EAAE,EAAE,CAA5E;AAA+EC,MAAAA,SAAS,EAAE;AAA1F,KADM,EAEN;AAAEL,MAAAA,MAAM,EAAE,MAAV;AAAkBC,MAAAA,YAAY,EAAE,IAAhC;AAAsCC,MAAAA,MAAM,EAAE,CAA9C;AAAiDC,MAAAA,cAAc,EAAE,CAAjE;AAAoEC,MAAAA,EAAE,EAAE,CAAxE;AAA2EC,MAAAA,SAAS,EAAE;AAAtF,KAFM,EAGN;AAAEL,MAAAA,MAAM,EAAE,SAAV;AAAqBC,MAAAA,YAAY,EAAE,IAAnC;AAAyCC,MAAAA,MAAM,EAAE,CAAjD;AAAoDC,MAAAA,cAAc,EAAE,CAApE;AAAuEC,MAAAA,EAAE,EAAE,CAA3E;AAA8EC,MAAAA,SAAS,EAAE;AAAzF,KAHM,EAIN;AAAEL,MAAAA,MAAM,EAAE,gBAAV;AAA4BC,MAAAA,YAAY,EAAE,IAA1C;AAAgDC,MAAAA,MAAM,EAAE,CAAxD;AAA2DC,MAAAA,cAAc,EAAE,CAA3E;AAA8EC,MAAAA,EAAE,EAAE,CAAlF;AAAqFC,MAAAA,SAAS,EAAE;AAAhG,KAJM,EAKN;AAAEL,MAAAA,MAAM,EAAE,UAAV;AAAsBC,MAAAA,YAAY,EAAE,KAApC;AAA2CC,MAAAA,MAAM,EAAE,CAAnD;AAAsDC,MAAAA,cAAc,EAAE,CAAtE;AAAyEC,MAAAA,EAAE,EAAE,CAA7E;AAAgFC,MAAAA,SAAS,EAAE;AAA3F,KALM,EAMN;AAAEL,MAAAA,MAAM,EAAE,UAAV;AAAsBC,MAAAA,YAAY,EAAE,IAApC;AAA0CC,MAAAA,MAAM,EAAE,CAAlD;AAAqDC,MAAAA,cAAc,EAAE,CAArE;AAAwEC,MAAAA,EAAE,EAAE,CAA5E;AAA+EC,MAAAA,SAAS,EAAE;AAA1F,KANM,EAON;AAAEL,MAAAA,MAAM,EAAE,WAAV;AAAuBC,MAAAA,YAAY,EAAE,IAArC;AAA2CC,MAAAA,MAAM,EAAE,CAAnD;AAAsDC,MAAAA,cAAc,EAAE,CAAtE;AAAyEC,MAAAA,EAAE,EAAE,CAA7E;AAAgFC,MAAAA,SAAS,EAAE;AAA3F,KAPM,EAQN;AAAEL,MAAAA,MAAM,EAAE,OAAV;AAAmBC,MAAAA,YAAY,EAAE,KAAjC;AAAwCC,MAAAA,MAAM,EAAE,CAAhD;AAAmDC,MAAAA,cAAc,EAAE,CAAnE;AAAsEC,MAAAA,EAAE,EAAE,CAA1E;AAA6EC,MAAAA,SAAS,EAAE;AAAxF,KARM,CAVqC;AAoB3CC,IAAAA,OAAO,EAAErB,WApBkC;AAqB3CsB,IAAAA,aAAa,EAAE,KArB4B;AAsB3CC,IAAAA,YAAY,EAAE;AAtB6B,GAAD,CAA5C;AAAA;AAAA,MAAOC,UAAP;AAAA,MAAmBC,aAAnB;;AAwBA,mBAAgC3F,QAAQ,CAAC,EAAD,CAAxC;AAAA;AAAA,MAAO4F,QAAP;AAAA,MAAiBC,WAAjB;;AACA,oBAA2B7F,QAAQ,EAAnC;AAAA;AAAA,MAAO8F,IAAP;AAAA,MAAaC,UAAb;;AACA,oBAAoC/F,QAAQ,CAAC,EAAD,CAA5C;AAAA;AAAA,MAAOgG,UAAP;AAAA,MAAmBC,aAAnB;;AACA,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,CAAC,EAAI,CAEvB,CAFD;;AAIA,MAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,QAAIlC,WAAW,IAAI,IAAnB,EAAyB,CACvB;AACA;AACD,KAHD,MAGO;AACL;AACA;AACAC,MAAAA,cAAc,CAAC,IAAD,CAAd;AACD;AACF,GATD;;AAUA,MAAMkC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBlC,IAAAA,cAAc,CAAC,KAAD,CAAd;AACD,GAFD;;AAGA,MAAMmC,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpBvE,IAAAA,WAAW,CAAC,MAAD,EAAS;AAAEwE,MAAAA,UAAU,EAAE,SAAd;AAAyBC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,IAAI,EAAE;AAAR;AAA/B,KAAT,CAAX,CACGC,IADH,CACQ,UAAUF,IAAV,EAAgB;AAEpB,UAAIA,IAAI,CAACG,SAAL,IAAkB,CAAtB,EAAyB;AACvB;AACA,YAAIC,MAAM,GAAGJ,IAAI,CAACK,WAAlB;AAEAhB,QAAAA,WAAW,iCAAMD,QAAN;AAAgBY,UAAAA,IAAI,EAAEI;AAAtB,WAAX;AACD,OALD,MAKO,CACL;AACD;AAEF,KAZH,EAaGE,KAbH,CAaS,UAAUC,KAAV,EAAiB;AACtBhE,MAAAA,MAAM,CAAC,CAAD,EAAIgE,KAAK,CAACC,QAAN,EAAJ,EAAsB,CAAtB,CAAN;AACD,KAfH;AAmBD,GApBD;;AAuBA/G,EAAAA,SAAS,CAAC,YAAM;AACdqG,IAAAA,OAAO;AACPW,IAAAA,WAAW;AACZ,GAHQ,EAGN,EAHM,CAAT;;AAIA,MAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrBC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBF,MAAM,CAACC,QAAP,CAAgBE,QAAhB,GAA2B,eAAlD;AACD,GAFD;;AAGA,MAAML,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxBlF,IAAAA,WAAW,CAAC,YAAD,EAAe;AAAEwE,MAAAA,UAAU,EAAE,gBAAd;AAAgCC,MAAAA,IAAI,EAAE;AAAtC,KAAf,CAAX,CACGE,IADH,CACQ,UAAUF,IAAV,EAAgB;AACpB,UAAIA,IAAI,CAACG,SAAL,IAAkB,CAAtB,EAAyB;AACvB,YAAIC,MAAM,GAAGJ,IAAI,CAACK,WAAlB;;AACA,YAAID,MAAM,CAACW,MAAP,GAAgB,CAApB,EAAuB;AACrB,cAAIC,OAAO,GAAGZ,MAAM,CAACa,MAAP,CAAc,UAAAC,CAAC;AAAA,mBAAIA,CAAC,CAACrC,EAAF,IAAQ,CAAZ;AAAA,WAAf,CAAd;;AACA,cAAIsC,QAAQ,GAAG,EAAf;;AACA,cAAIH,OAAO,CAACD,MAAR,GAAiB,CAArB,EAAwB;AACtBI,YAAAA,QAAQ,GAAGH,OAAO,CAAC,CAAD,CAAP,CAAWG,QAAtB;AACD;;AACD1B,UAAAA,aAAa,CAAC0B,QAAD,CAAb;;AACA,cAAIA,QAAQ,IAAI,EAAhB,EAAoB;AAClBtD,YAAAA,yBAAyB,CAAC,IAAD,CAAzB;AACD;AAGF,SAdsB,CAgBvB;AACA;AACA;;AACD,OAnBD,MAmBO,CACL;AACD;AAEF,KAzBH,EA0BGyC,KA1BH,CA0BS,UAAUC,KAAV,EAAiB;AACtBhE,MAAAA,MAAM,CAAC,CAAD,EAAIgE,KAAK,CAACC,QAAN,EAAJ,EAAsB,CAAtB,CAAN;AACD,KA5BH;AA8BD,GA/BD;;AAgCA/G,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI2F,QAAQ,CAACY,IAAT,IAAiBhD,SAArB,EAAgC;AAC9B,UAAIoC,QAAQ,CAACY,IAAT,CAAce,MAAd,GAAuB,CAA3B,EAA8B;AAC5B,YAAIK,cAAc,GAAGlC,UAAU,CAACV,IAAhC;;AAD4B,mCAGnB6C,KAHmB;AAItBC,UAAAA,UAAU,GAAGF,cAAc,CAACH,MAAf,CAAsB,UAAAC,CAAC;AAAA,mBAAIA,CAAC,CAACrC,EAAF,IAAQO,QAAQ,CAACY,IAAT,CAAcqB,KAAd,EAAqBxC,EAAjC;AAAA,WAAvB,CAJS;;AAK1B,cAAIyC,UAAU,CAACP,MAAX,GAAoB,CAAxB,EAA2B;AACzBO,YAAAA,UAAU,CAAC,CAAD,CAAV,CAAc3C,MAAd,GAAuB4C,UAAU,CAACnC,QAAQ,CAACY,IAAT,CAAcqB,KAAd,EAAqBG,KAAtB,CAAjC;AACAF,YAAAA,UAAU,CAAC,CAAD,CAAV,CAAcxC,SAAd,GAA0ByC,UAAU,CAACnC,QAAQ,CAACY,IAAT,CAAcqB,KAAd,EAAqBvC,SAAtB,CAApC;AACD;AARyB;;AAG5B,aAAK,IAAIuC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGjC,QAAQ,CAACY,IAAT,CAAce,MAA1C,EAAkDM,KAAK,EAAvD,EAA2D;AAAA,cACrDC,UADqD;;AAAA,gBAAlDD,KAAkD;AAM1D;AACF;AACF;AACF,GAdQ,EAcN,CAACjC,QAAD,CAdM,CAAT;;AAeA,oBAAwB5F,QAAQ,CAAC0F,UAAD,CAAhC;AAAA;AAAA,MAAOuC,IAAP;AAAA,MAAaC,OAAb;;AACA,sBAAQ;AAAA,2BAGN;AAAK,MAAA,SAAS,EAAC,uDAAf;AAAuE,MAAA,KAAK,EAAE;AAC5EC,QAAAA,UAAU,gBAASvE,UAAT,MADkE;AAC1CwE,QAAAA,gBAAgB,EAAE,WADwB;AAE5EC,QAAAA,kBAAkB,EAAE,YAFwD;AAG5EC,QAAAA,cAAc,EAAE;AAH4D,OAA9E;AAAA,8BAKE,QAAC,UAAD;AAAA,+BAEE,QAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAAEH,YAAAA,UAAU,EAAE,aAAd;AAA6BI,YAAAA,MAAM,EAAE;AAArC,WAAb;AAAA,iCACE,QAAC,WAAD,CAAa,QAAb;AAAsB,YAAA,KAAK,EAAE;AAAEN,cAAAA,IAAI,EAAJA,IAAF;AAAQC,cAAAA,OAAO,EAAPA;AAAR,aAA7B;AAAA,mCACE,QAAC,IAAD,CAAM,IAAN;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,KAAf;AAAA,uCACE;AAAK,kBAAA,SAAS,EAAC,QAAf;AAAwB,kBAAA,KAAK,EAAE;AAAEM,oBAAAA,OAAO,EAAEtE,WAAW,IAAI,IAAf,GAAsB,MAAtB,GAA+B;AAA1C,mBAA/B;AAAA,yCACE,QAAC,UAAD;AAAY,oBAAA,IAAI,EAAE+D;AAAlB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,eALF,eA2BE,QAAC,MAAD;AAAQ,QAAA,IAAI,EAAE7D,sBAAd;AAAsC,QAAA,eAAe,EAAE,IAAvD;AAA6D,QAAA,QAAQ,EAAE,IAAvE;AAA6E,QAAA,OAAO,EAAE;AAAA,iBAAMC,yBAAyB,CAAC,CAACD,sBAAF,CAA/B;AAAA,SAAtF;AAAgJ,QAAA,IAAI,EAAC,IAArJ;AAAA,gCACE,QAAC,YAAD;AAAA,iCACE,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE,QAAC,UAAD;AAAA,kCACE,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,IAAT;AAAA,mCACE;AAAA,qCACE;AAAK,gBAAA,uBAAuB,EAAE;AAAEqE,kBAAAA,MAAM,EAAEzC;AAAV;AAA9B;AAAA;AAAA;AAAA;AAAA;AADF;AADF;AAAA;AAAA;AAAA;AAAA,mBADF,eAME,QAAC,OAAD;AAAS,YAAA,KAAK,EAAC,UAAf;AAA0B,YAAA,KAAK,EAAE;AAAE0C,cAAAA,KAAK,EAAE;AAAT,aAAjC;AAAqD,YAAA,OAAO,EAAE;AAAA,qBAAMrE,yBAAyB,CAAC,CAACD,sBAAF,CAA/B;AAAA,aAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBANF,eAQE;AAAG,YAAA,IAAI,EAAC,eAAR;AAAwB,YAAA,SAAS,EAAC,iBAAlC;AAAoD,YAAA,KAAK,EAAE;AAAEsE,cAAAA,KAAK,EAAE,OAAT;AAAkB,6BAAe;AAAjC,aAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBARF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,eA3BF;AAAA;AAAA;AAAA;AAAA;AAAA;AAHM,mBAAR;AAoDD,CApLD;;GAAMhF,W;UACYxD,U;;;KADZwD,W;AAqLN,eAAeA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CButton,\r\n  CModal,\r\n  CModalTitle,\r\n  CModalHeader,\r\n  CModalBody,\r\n  CForm,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n  CInputGroup,\r\n  CInput,\r\n  CFormGroup,\r\n  CInputCheckbox,\r\n  CLabel,\r\n  CModalFooter,\r\n  CBadge,\r\n  CContainer,\r\n  CSelect,\r\n  CCardFooter\r\n} from '@coreui/react'\r\n\r\nimport DataTable from \"react-data-table-component\";\r\nimport DataTableExtensions from \"react-data-table-component-extensions\";\r\nimport Select from 'react-select';\r\nimport CIcon from '@coreui/icons-react';\r\nimport dataservice from '../../service/dataservice';\r\nimport { toast } from 'react-toastify';\r\nimport { InputDecimal } from \"../../commoncomponents/inputdecimal\";\r\nimport DatePicker from 'react-date-picker';\r\nimport { discounticon } from 'src/assets/icons/discounticon';\r\nimport moment from 'moment';\r\nimport uuid from 'react-uuid';\r\nimport FeesComputation from '../register/FeesComputation'\r\nimport TravelInfo from '../register/TravelInfo'\r\nimport GuestInfo from '../register/GuestInfo'\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Toast from 'react-bootstrap/Toast';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { userContext } from '../../../views/userContext'\r\nimport '../../../scss/bootstrap.css';\r\nconst notify = (type, message, systemerror) => {\r\n  switch (type) {\r\n    case 1:\r\n      toast.success(message, {\r\n        position: toast.POSITION.TOP_CENTER\r\n      });\r\n      break;\r\n    case 2:\r\n      var dtlmsg;\r\n      if (systemerror !== undefined) {\r\n        dtlmsg = <div>Please contact to administrator!<br></br>{message}</div>;\r\n      } else {\r\n        dtlmsg = <div>{message}</div>;\r\n      }\r\n\r\n      toast.error(<div>\r\n        <CIcon name=\"cil-warning\" /> Error\r\n\r\n        {dtlmsg}\r\n\r\n      </div>, {\r\n        position: toast.POSITION.TOP_CENTER\r\n      });\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nconst RegisterNew = () => {\r\n  const history = useHistory();\r\n  var Background = process.env.PUBLIC_URL + \"/bgnew.jpg\";\r\n  const [contextdata, setcontextdata] = useState();\r\n  const [isguestinfo, setisguestinfo] = useState(false);\r\n  const [registrationmodalpopup, setRegistrationModalPopUp] = useState(false)\r\n  const [travelinfo, setTravelinfo] = useState({\r\n    numberofguest: 0,\r\n    startdate: new Date(),\r\n    enddate: new Date(),\r\n    package: [],\r\n    boatinfo: [],\r\n    guestinfo: [],\r\n    hotel: [],\r\n    hotelbookingref: \"\",\r\n    vehicle: [],\r\n    fees: [{ feefor: \"ETAF\", discountable: true, amount: 0, sequencenumber: 1, id: 1, rentprice: 0 },\r\n    { feefor: \"Bracelet\", discountable: true, amount: 0, sequencenumber: 2, id: 4, rentprice: 0 },\r\n    { feefor: \"Boat\", discountable: true, amount: 0, sequencenumber: 3, id: 2, rentprice: 0 },\r\n    { feefor: \"Package\", discountable: true, amount: 0, sequencenumber: 4, id: 3, rentprice: 0 },\r\n    { feefor: \"IsLand Hopping\", discountable: true, amount: 0, sequencenumber: 6, id: 9, rentprice: 0 },\r\n    { feefor: \"Parking \", discountable: false, amount: 0, sequencenumber: 6, id: 5, rentprice: 0 },\r\n    { feefor: \"Discount\", discountable: true, amount: 0, sequencenumber: 5, id: 6, rentprice: 0 },\r\n    { feefor: \"Exemption\", discountable: true, amount: 0, sequencenumber: 6, id: 7, rentprice: 0 },\r\n    { feefor: \"Total\", discountable: false, amount: 0, sequencenumber: 6, id: 8, rentprice: 0 }\r\n    ],\r\n    isguest: isguestinfo,\r\n    parkingnotreq: false,\r\n    isBulkUpload: false\r\n  });\r\n  const [feesdata, setFeesData] = useState([]);\r\n  const [show, toggleShow] = useState();\r\n  const [disclaimer, setDisclaimer] = useState(\"\");\r\n  const clickevent = e => {\r\n\r\n  }\r\n\r\n  const setaction = () => {\r\n    if (isguestinfo == true) {\r\n      // Savedata();\r\n      //\r\n    } else {\r\n      // setguestactivepostion(0);\r\n      // setselectedguest(guestarr[0])\r\n      setisguestinfo(true)\r\n    }\r\n  }\r\n  const backaction = () => {\r\n    setisguestinfo(false);\r\n  }\r\n  const getfees = () => {\r\n    dataservice(\"fees\", { requestfor: 'getfees', data: { flag: 'a' } })\r\n      .then(function (data) {\r\n\r\n        if (data.resultkey == 1) {\r\n          //   \r\n          var result = data.resultvalue\r\n\r\n          setFeesData({ ...feesdata, data: result });\r\n        } else {\r\n          //  notify(2,\"No data found\");\r\n        }\r\n\r\n      })\r\n      .catch(function (edata) {\r\n        notify(2, edata.toString(), 1);\r\n      });\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    getfees();\r\n    getpagedata();\r\n  }, [])\r\n  const editbook = () => {\r\n    window.location.href = window.location.pathname + \"#/editbooking\";\r\n  }\r\n  const getpagedata = () => {\r\n    dataservice(\"staticpage\", { requestfor: 'getstaticpages', data: {} })\r\n      .then(function (data) {\r\n        if (data.resultkey == 1) {\r\n          var result = data.resultvalue;\r\n          if (result.length > 0) {\r\n            var _filter = result.filter(x => x.id == 1);\r\n            var pagedata = \"\";\r\n            if (_filter.length > 0) {\r\n              pagedata = _filter[0].pagedata;\r\n            }\r\n            setDisclaimer(pagedata);\r\n            if (pagedata != \"\") {\r\n              setRegistrationModalPopUp(true);\r\n            }\r\n\r\n\r\n          }\r\n\r\n          // setSeteditorval({ ...editorvalue, result });\r\n          // setSetedit({ ...edit, [\"value\"]: result});\r\n          //setFeesdata({ ...feedata, [\"data\"]: result });\r\n        } else {\r\n          //  notify(2,\"No data found\");\r\n        }\r\n\r\n      })\r\n      .catch(function (edata) {\r\n        notify(2, edata.toString(), 1);\r\n      });\r\n\r\n  }\r\n  useEffect(() => {\r\n    if (feesdata.data != undefined) {\r\n      if (feesdata.data.length > 0) {\r\n        var feesdatavalues = travelinfo.fees\r\n\r\n        for (let index = 0; index < feesdata.data.length; index++) {\r\n          var filterdata = feesdatavalues.filter(x => x.id == feesdata.data[index].id);\r\n          if (filterdata.length > 0) {\r\n            filterdata[0].amount = parseFloat(feesdata.data[index].price);\r\n            filterdata[0].rentprice = parseFloat(feesdata.data[index].rentprice);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [feesdata]);\r\n  const [gacc, setgacc] = useState(travelinfo);\r\n  return (<>\r\n\r\n\r\n    <div className=\"c-app c-default-layout flex-row align-items-center bg\" style={{\r\n      background: `url(${Background})`, backgroundRepeat: 'no-repeat',\r\n      backgroundPosition: 'top center',\r\n      backgroundSize: 'cover'\r\n    }}  >\r\n      <CContainer  >\r\n\r\n        <Card style={{ background: \"transparent\", border: \"none\" }} >\r\n          <userContext.Provider value={{ gacc, setgacc }}>\r\n            <Card.Body>\r\n              <div className=\"row\">\r\n                <div className=\"col-12\" style={{ display: isguestinfo == true ? \"none\" : \"\" }}>\r\n                  <TravelInfo data={gacc}></TravelInfo>\r\n\r\n                </div>\r\n                {/* <div  className=\"col-12\"  style={{ display: isguestinfo == true ? \"\" : \"none\" }}>\r\n                          <GuestInfo data={contextdata} ></GuestInfo>\r\n                        </div> */}\r\n\r\n              </div>\r\n\r\n            </Card.Body>\r\n\r\n          </userContext.Provider>\r\n\r\n        </Card>\r\n      </CContainer>\r\n      <CModal show={registrationmodalpopup} closeOnBackdrop={true} backdrop={true} onClose={() => setRegistrationModalPopUp(!registrationmodalpopup)} size=\"lg\">\r\n        <CModalHeader >\r\n          <CModalTitle>NOTICE </CModalTitle>\r\n        </CModalHeader>\r\n        <CModalBody>\r\n          <CCol md=\"12\">\r\n            <>\r\n              <div dangerouslySetInnerHTML={{ __html: disclaimer }}></div>\r\n            </>\r\n          </CCol>\r\n          <CButton color=\"primary \" style={{ float: \"right\" }} onClick={() => setRegistrationModalPopUp(!registrationmodalpopup)}>Create Booking</CButton>\r\n\r\n          <a href=\"#/editbooking\" className=\"btn btn-primary\" style={{ float: \"right\", \"marginRight\": \"2%\" }}>Edit Booking</a>\r\n\r\n\r\n          {/* <CButton color=\"primary \" style={{float: \"right\",\"marginRight\": \"2%\"}} onClick={() =>{}} ></CButton> */}\r\n        </CModalBody>\r\n\r\n      </CModal>\r\n\r\n    </div>\r\n  </>)\r\n}\r\nexport default RegisterNew;\r\n"]},"metadata":{},"sourceType":"module"}