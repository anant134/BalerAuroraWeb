{"ast":null,"code":"import _objectSpread from\"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory,useLocation}from'react-router-dom';import{CCard,CCardBody,CCardHeader,CCol,CRow,CButton,CModal,CModalTitle,CModalHeader,CModalBody,CForm,CInputGroupPrepend,CInputGroupText,CInputGroup,CInput,CFormGroup,CInputCheckbox,CLabel,CModalFooter,CBadge,CContainer,CSelect,CCardFooter}from'@coreui/react';import DataTable from\"react-data-table-component\";import DataTableExtensions from\"react-data-table-component-extensions\";import Select from'react-select';import CIcon from'@coreui/icons-react';import dataservice from'../../service/dataservice';import{toast}from'react-toastify';import{InputDecimal}from\"../../commoncomponents/inputdecimal\";import DatePicker from'react-date-picker';import{discounticon}from'src/assets/icons/discounticon';import moment from'moment';import uuid from'react-uuid';import FeesComputation from'../register/FeesComputation';import TravelInfo from'../register/TravelInfo';import GuestInfo from'../register/GuestInfo';import Jumbotron from'react-bootstrap/Jumbotron';import Toast from'react-bootstrap/Toast';import Container from'react-bootstrap/Container';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import{userContext}from'../../../views/userContext';import'../../../scss/bootstrap.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var notify=function notify(type,message,systemerror){switch(type){case 1:toast.success(message,{position:toast.POSITION.TOP_CENTER});break;case 2:var dtlmsg;if(systemerror!==undefined){dtlmsg=/*#__PURE__*/_jsxs(\"div\",{children:[\"Please contact to administrator!\",/*#__PURE__*/_jsx(\"br\",{}),message]});}else{dtlmsg=/*#__PURE__*/_jsx(\"div\",{children:message});}toast.error(/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CIcon,{name:\"cil-warning\"}),\" Error\",dtlmsg]}),{position:toast.POSITION.TOP_CENTER});break;default:break;}};var RegisterNew=function RegisterNew(){var history=useHistory();var Background=process.env.PUBLIC_URL+\"/bgnew.jpg\";var _useState=useState(),_useState2=_slicedToArray(_useState,2),contextdata=_useState2[0],setcontextdata=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isguestinfo=_useState4[0],setisguestinfo=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),registrationmodalpopup=_useState6[0],setRegistrationModalPopUp=_useState6[1];var _useState7=useState({numberofguest:0,startdate:new Date(),enddate:new Date(),package:[],boatinfo:[],guestinfo:[],hotel:[],hotelbookingref:\"\",vehicle:[],fees:[{feefor:\"ETAF\",discountable:true,amount:0,sequencenumber:1,id:1,rentprice:0},{feefor:\"Bracelet\",discountable:true,amount:0,sequencenumber:2,id:4,rentprice:0},{feefor:\"Boat\",discountable:true,amount:0,sequencenumber:3,id:2,rentprice:0},{feefor:\"Package\",discountable:true,amount:0,sequencenumber:4,id:3,rentprice:0},{feefor:\"IsLand Hopping\",discountable:true,amount:0,sequencenumber:6,id:9,rentprice:0},{feefor:\"Parking \",discountable:false,amount:0,sequencenumber:6,id:5,rentprice:0},{feefor:\"Discount\",discountable:true,amount:0,sequencenumber:5,id:6,rentprice:0},{feefor:\"Exemption\",discountable:true,amount:0,sequencenumber:6,id:7,rentprice:0},{feefor:\"Total\",discountable:false,amount:0,sequencenumber:6,id:8,rentprice:0}],isguest:isguestinfo,parkingnotreq:false,isBulkUpload:false}),_useState8=_slicedToArray(_useState7,2),travelinfo=_useState8[0],setTravelinfo=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),feesdata=_useState10[0],setFeesData=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),show=_useState12[0],toggleShow=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),disclaimer=_useState14[0],setDisclaimer=_useState14[1];var clickevent=function clickevent(e){};var setaction=function setaction(){if(isguestinfo==true){// Savedata();\n//\n}else{// setguestactivepostion(0);\n// setselectedguest(guestarr[0])\nsetisguestinfo(true);}};var backaction=function backaction(){setisguestinfo(false);};var getfees=function getfees(){dataservice(\"fees\",{requestfor:'getfees',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){//   \nvar result=data.resultvalue;setFeesData(_objectSpread(_objectSpread({},feesdata),{},{data:result}));}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};useEffect(function(){getfees();getpagedata();},[]);var editbook=function editbook(){window.location.href=window.location.pathname+\"#/editbooking\";};var getpagedata=function getpagedata(){dataservice(\"staticpage\",{requestfor:'getstaticpages',data:{}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;if(result.length>0){var _filter=result.filter(function(x){return x.id==1;});var pagedata=\"\";if(_filter.length>0){pagedata=_filter[0].pagedata;}setDisclaimer(pagedata);if(pagedata!=\"\"){setRegistrationModalPopUp(true);}}// setSeteditorval({ ...editorvalue, result });\n// setSetedit({ ...edit, [\"value\"]: result});\n//setFeesdata({ ...feedata, [\"data\"]: result });\n}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};useEffect(function(){if(feesdata.data!=undefined){if(feesdata.data.length>0){var feesdatavalues=travelinfo.fees;var _loop=function _loop(index){filterdata=feesdatavalues.filter(function(x){return x.id==feesdata.data[index].id;});if(filterdata.length>0){filterdata[0].amount=parseFloat(feesdata.data[index].price);filterdata[0].rentprice=parseFloat(feesdata.data[index].rentprice);}};for(var index=0;index<feesdata.data.length;index++){var filterdata;_loop(index);}}}},[feesdata]);var _useState15=useState(travelinfo),_useState16=_slicedToArray(_useState15,2),gacc=_useState16[0],setgacc=_useState16[1];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"c-app c-default-layout flex-row align-items-center bg\",style:{background:\"url(\".concat(Background,\")\"),backgroundRepeat:'no-repeat',backgroundPosition:'top center',backgroundSize:'cover'},children:[/*#__PURE__*/_jsx(CContainer,{children:/*#__PURE__*/_jsx(Card,{style:{background:\"transparent\",border:\"none\"},children:/*#__PURE__*/_jsx(userContext.Provider,{value:{gacc:gacc,setgacc:setgacc},children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",style:{display:isguestinfo==true?\"none\":\"\"},children:/*#__PURE__*/_jsx(TravelInfo,{data:gacc})})})})})})}),/*#__PURE__*/_jsxs(CModal,{show:registrationmodalpopup,closeOnBackdrop:true,backdrop:true,onClose:function onClose(){return setRegistrationModalPopUp(!registrationmodalpopup);},size:\"lg\",children:[/*#__PURE__*/_jsx(CModalHeader,{children:/*#__PURE__*/_jsx(CModalTitle,{children:\"NOTICE \"})}),/*#__PURE__*/_jsxs(CModalBody,{children:[/*#__PURE__*/_jsx(CCol,{md:\"12\",children:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:disclaimer}})})}),/*#__PURE__*/_jsx(CButton,{color:\"primary \",style:{float:\"right\"},onClick:function onClick(){return setRegistrationModalPopUp(!registrationmodalpopup);},children:\"Create Booking\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#/editbooking\",className:\"btn btn-primary\",style:{float:\"right\",\"marginRight\":\"2%\"},children:\"Edit Booking\"})]})]})]})});};export default RegisterNew;","map":{"version":3,"sources":["D:/I2T/Smarttech/tourbookingwebgit/src/views/pages/register/RegisterNew.js"],"names":["React","useState","useEffect","useHistory","useLocation","CCard","CCardBody","CCardHeader","CCol","CRow","CButton","CModal","CModalTitle","CModalHeader","CModalBody","CForm","CInputGroupPrepend","CInputGroupText","CInputGroup","CInput","CFormGroup","CInputCheckbox","CLabel","CModalFooter","CBadge","CContainer","CSelect","CCardFooter","DataTable","DataTableExtensions","Select","CIcon","dataservice","toast","InputDecimal","DatePicker","discounticon","moment","uuid","FeesComputation","TravelInfo","GuestInfo","Jumbotron","Toast","Container","Button","Card","userContext","notify","type","message","systemerror","success","position","POSITION","TOP_CENTER","dtlmsg","undefined","error","RegisterNew","history","Background","process","env","PUBLIC_URL","contextdata","setcontextdata","isguestinfo","setisguestinfo","registrationmodalpopup","setRegistrationModalPopUp","numberofguest","startdate","Date","enddate","package","boatinfo","guestinfo","hotel","hotelbookingref","vehicle","fees","feefor","discountable","amount","sequencenumber","id","rentprice","isguest","parkingnotreq","isBulkUpload","travelinfo","setTravelinfo","feesdata","setFeesData","show","toggleShow","disclaimer","setDisclaimer","clickevent","e","setaction","backaction","getfees","requestfor","data","flag","then","resultkey","result","resultvalue","catch","edata","toString","getpagedata","editbook","window","location","href","pathname","length","_filter","filter","x","pagedata","feesdatavalues","index","filterdata","parseFloat","price","gacc","setgacc","background","backgroundRepeat","backgroundPosition","backgroundSize","border","display","__html","float"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CButton,\r\n  CModal,\r\n  CModalTitle,\r\n  CModalHeader,\r\n  CModalBody,\r\n  CForm,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n  CInputGroup,\r\n  CInput,\r\n  CFormGroup,\r\n  CInputCheckbox,\r\n  CLabel,\r\n  CModalFooter,\r\n  CBadge,\r\n  CContainer,\r\n  CSelect,\r\n  CCardFooter\r\n} from '@coreui/react'\r\n\r\nimport DataTable from \"react-data-table-component\";\r\nimport DataTableExtensions from \"react-data-table-component-extensions\";\r\nimport Select from 'react-select';\r\nimport CIcon from '@coreui/icons-react';\r\nimport dataservice from '../../service/dataservice';\r\nimport { toast } from 'react-toastify';\r\nimport { InputDecimal } from \"../../commoncomponents/inputdecimal\";\r\nimport DatePicker from 'react-date-picker';\r\nimport { discounticon } from 'src/assets/icons/discounticon';\r\nimport moment from 'moment';\r\nimport uuid from 'react-uuid';\r\nimport FeesComputation from '../register/FeesComputation'\r\nimport TravelInfo from '../register/TravelInfo'\r\nimport GuestInfo from '../register/GuestInfo'\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Toast from 'react-bootstrap/Toast';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { userContext } from '../../../views/userContext'\r\nimport '../../../scss/bootstrap.css';\r\nconst notify = (type, message, systemerror) => {\r\n  switch (type) {\r\n    case 1:\r\n      toast.success(message, {\r\n        position: toast.POSITION.TOP_CENTER\r\n      });\r\n      break;\r\n    case 2:\r\n      var dtlmsg;\r\n      if (systemerror !== undefined) {\r\n        dtlmsg = <div>Please contact to administrator!<br></br>{message}</div>;\r\n      } else {\r\n        dtlmsg = <div>{message}</div>;\r\n      }\r\n\r\n      toast.error(<div>\r\n        <CIcon name=\"cil-warning\" /> Error\r\n\r\n        {dtlmsg}\r\n\r\n      </div>, {\r\n        position: toast.POSITION.TOP_CENTER\r\n      });\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nconst RegisterNew = () => {\r\n  const history = useHistory();\r\n  var Background = process.env.PUBLIC_URL + \"/bgnew.jpg\";\r\n  const [contextdata, setcontextdata] = useState();\r\n  const [isguestinfo, setisguestinfo] = useState(false);\r\n  const [registrationmodalpopup, setRegistrationModalPopUp] = useState(false)\r\n  const [travelinfo, setTravelinfo] = useState({\r\n    numberofguest: 0,\r\n    startdate: new Date(),\r\n    enddate: new Date(),\r\n    package: [],\r\n    boatinfo: [],\r\n    guestinfo: [],\r\n    hotel: [],\r\n    hotelbookingref: \"\",\r\n    vehicle: [],\r\n    fees: [{ feefor: \"ETAF\", discountable: true, amount: 0, sequencenumber: 1, id: 1, rentprice: 0 },\r\n    { feefor: \"Bracelet\", discountable: true, amount: 0, sequencenumber: 2, id: 4, rentprice: 0 },\r\n    { feefor: \"Boat\", discountable: true, amount: 0, sequencenumber: 3, id: 2, rentprice: 0 },\r\n    { feefor: \"Package\", discountable: true, amount: 0, sequencenumber: 4, id: 3, rentprice: 0 },\r\n    { feefor: \"IsLand Hopping\", discountable: true, amount: 0, sequencenumber: 6, id: 9, rentprice: 0 },\r\n    { feefor: \"Parking \", discountable: false, amount: 0, sequencenumber: 6, id: 5, rentprice: 0 },\r\n    { feefor: \"Discount\", discountable: true, amount: 0, sequencenumber: 5, id: 6, rentprice: 0 },\r\n    { feefor: \"Exemption\", discountable: true, amount: 0, sequencenumber: 6, id: 7, rentprice: 0 },\r\n    { feefor: \"Total\", discountable: false, amount: 0, sequencenumber: 6, id: 8, rentprice: 0 }\r\n    ],\r\n    isguest: isguestinfo,\r\n    parkingnotreq: false,\r\n    isBulkUpload: false\r\n  });\r\n  const [feesdata, setFeesData] = useState([]);\r\n  const [show, toggleShow] = useState();\r\n  const [disclaimer, setDisclaimer] = useState(\"\");\r\n  const clickevent = e => {\r\n\r\n  }\r\n\r\n  const setaction = () => {\r\n    if (isguestinfo == true) {\r\n      // Savedata();\r\n      //\r\n    } else {\r\n      // setguestactivepostion(0);\r\n      // setselectedguest(guestarr[0])\r\n      setisguestinfo(true)\r\n    }\r\n  }\r\n  const backaction = () => {\r\n    setisguestinfo(false);\r\n  }\r\n  const getfees = () => {\r\n    dataservice(\"fees\", { requestfor: 'getfees', data: { flag: 'a' } })\r\n      .then(function (data) {\r\n\r\n        if (data.resultkey == 1) {\r\n          //   \r\n          var result = data.resultvalue\r\n\r\n          setFeesData({ ...feesdata, data: result });\r\n        } else {\r\n          //  notify(2,\"No data found\");\r\n        }\r\n\r\n      })\r\n      .catch(function (edata) {\r\n        notify(2, edata.toString(), 1);\r\n      });\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    getfees();\r\n    getpagedata();\r\n  }, [])\r\n  const editbook = () => {\r\n    window.location.href = window.location.pathname + \"#/editbooking\";\r\n  }\r\n  const getpagedata = () => {\r\n    dataservice(\"staticpage\", { requestfor: 'getstaticpages', data: {} })\r\n      .then(function (data) {\r\n        if (data.resultkey == 1) {\r\n          var result = data.resultvalue;\r\n          if (result.length > 0) {\r\n            var _filter = result.filter(x => x.id == 1);\r\n            var pagedata = \"\";\r\n            if (_filter.length > 0) {\r\n              pagedata = _filter[0].pagedata;\r\n            }\r\n            setDisclaimer(pagedata);\r\n            if (pagedata != \"\") {\r\n              setRegistrationModalPopUp(true);\r\n            }\r\n\r\n\r\n          }\r\n\r\n          // setSeteditorval({ ...editorvalue, result });\r\n          // setSetedit({ ...edit, [\"value\"]: result});\r\n          //setFeesdata({ ...feedata, [\"data\"]: result });\r\n        } else {\r\n          //  notify(2,\"No data found\");\r\n        }\r\n\r\n      })\r\n      .catch(function (edata) {\r\n        notify(2, edata.toString(), 1);\r\n      });\r\n\r\n  }\r\n  useEffect(() => {\r\n    if (feesdata.data != undefined) {\r\n      if (feesdata.data.length > 0) {\r\n        var feesdatavalues = travelinfo.fees\r\n\r\n        for (let index = 0; index < feesdata.data.length; index++) {\r\n          var filterdata = feesdatavalues.filter(x => x.id == feesdata.data[index].id);\r\n          if (filterdata.length > 0) {\r\n            filterdata[0].amount = parseFloat(feesdata.data[index].price);\r\n            filterdata[0].rentprice = parseFloat(feesdata.data[index].rentprice);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [feesdata]);\r\n  const [gacc, setgacc] = useState(travelinfo);\r\n  return (<>\r\n\r\n\r\n    <div className=\"c-app c-default-layout flex-row align-items-center bg\" style={{\r\n      background: `url(${Background})`, backgroundRepeat: 'no-repeat',\r\n      backgroundPosition: 'top center',\r\n      backgroundSize: 'cover'\r\n    }}  >\r\n      <CContainer  >\r\n\r\n        <Card style={{ background: \"transparent\", border: \"none\" }} >\r\n          <userContext.Provider value={{ gacc, setgacc }}>\r\n            <Card.Body>\r\n              <div className=\"row\">\r\n                <div className=\"col-12\" style={{ display: isguestinfo == true ? \"none\" : \"\" }}>\r\n                  <TravelInfo data={gacc}></TravelInfo>\r\n\r\n                </div>\r\n                {/* <div  className=\"col-12\"  style={{ display: isguestinfo == true ? \"\" : \"none\" }}>\r\n                          <GuestInfo data={contextdata} ></GuestInfo>\r\n                        </div> */}\r\n\r\n              </div>\r\n\r\n            </Card.Body>\r\n\r\n          </userContext.Provider>\r\n\r\n        </Card>\r\n      </CContainer>\r\n      <CModal show={registrationmodalpopup} closeOnBackdrop={true} backdrop={true} onClose={() => setRegistrationModalPopUp(!registrationmodalpopup)} size=\"lg\">\r\n        <CModalHeader >\r\n          <CModalTitle>NOTICE </CModalTitle>\r\n        </CModalHeader>\r\n        <CModalBody>\r\n          <CCol md=\"12\">\r\n            <>\r\n              <div dangerouslySetInnerHTML={{ __html: disclaimer }}></div>\r\n            </>\r\n          </CCol>\r\n          <CButton color=\"primary \" style={{ float: \"right\" }} onClick={() => setRegistrationModalPopUp(!registrationmodalpopup)}>Create Booking</CButton>\r\n\r\n          <a href=\"#/editbooking\" className=\"btn btn-primary\" style={{ float: \"right\", \"marginRight\": \"2%\" }}>Edit Booking</a>\r\n\r\n\r\n          {/* <CButton color=\"primary \" style={{float: \"right\",\"marginRight\": \"2%\"}} onClick={() =>{}} ></CButton> */}\r\n        </CModalBody>\r\n\r\n      </CModal>\r\n\r\n    </div>\r\n  </>)\r\n}\r\nexport default RegisterNew;\r\n"]},"metadata":{},"sourceType":"module"}