{"ast":null,"code":"import _defineProperty from\"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory,useLocation}from'react-router-dom';import{CCard,CCardBody,CCardHeader,CCol,CRow,CButton,CModal,CModalTitle,CModalHeader,CModalBody,CForm,CInputGroupPrepend,CInputGroupText,CInputGroup,CInput,CFormGroup,CInputCheckbox,CLabel,CModalFooter,CBadge}from'@coreui/react';import DataTable from\"react-data-table-component\";import DataTableExtensions from\"react-data-table-component-extensions\";import Select from'react-select';import CIcon from'@coreui/icons-react';import dataservice from'../../service/dataservice';import{toast}from'react-toastify';import{CSVLink}from\"react-csv\";import DatePicker from\"react-date-picker\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var notify=function notify(type,message,systemerror){switch(type){case 1:toast.success(message,{position:toast.POSITION.TOP_CENTER});break;case 2:var dtlmsg;if(systemerror!==undefined){dtlmsg=/*#__PURE__*/_jsxs(\"div\",{children:[\"Please contact to administrator!\",/*#__PURE__*/_jsx(\"br\",{}),message]});}else{dtlmsg=/*#__PURE__*/_jsx(\"div\",{children:message});}toast.error(/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CIcon,{name:\"cil-warning\"}),\" Error\",dtlmsg]}),{position:toast.POSITION.TOP_CENTER});break;default:break;}};var headerss=[{label:\"Reference Number\",key:\"paymentreferencenumber\"},{label:\"Guest \",key:\"pax\"},{label:\"Bracelet Buy\",key:\"buybracelet\"},{label:\"Bracelet Rented\",key:\"rentbracelet\"},{label:\"Processing Fee\",key:\"processingfee\"},{label:\"Boat Charge\",key:\"boatcharge\"},{label:\"Discount\",key:\"Discount\"},{label:\"Bracelet Fee\",key:\"BraceletFee\"},{label:\"ETAF\",key:\"ETAF\"},{label:\"Parking Charges\",key:\"prkchrg\"},{label:\"Vehicle Parking\",key:\"typeofvehicle\"},{label:\"Number of Vehicle\",key:\"countveh\"},{label:\"Boat Name\",key:\"boatname\"},{label:\"Boat Fee\",key:\"BoatFee\"},{label:\"Traveling Start Date\",key:\"fromdate\"},{label:\"Payment Date\",key:\"paymentdate\"},{label:\"Channel fee\",key:\"channel_fee\"}];var FeeBreakDownRpt=function FeeBreakDownRpt(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),csvdata=_useState2[0],setCSVData=_useState2[1];var currentdateminuonemmonth=new Date();var currentdateminuonemmonth=currentdateminuonemmonth.setMonth(currentdateminuonemmonth.getMonth()-1);var _useState3=useState([new Date()]),_useState4=_slicedToArray(_useState3,2),selectedfromdate=_useState4[0],setFromdate=_useState4[1];var setselectedfromdate=function setselectedfromdate(e){setFromdate(e);//setTodate(e);\n};var _useState5=useState([new Date()]),_useState6=_slicedToArray(_useState5,2),selectedtodate=_useState6[0],setTodate=_useState6[1];var setselectedtodate=function setselectedtodate(e){setTodate(e);var todata=e;var fromdata=selectedfromdate[0]==undefined?selectedfromdate:selectedfromdate[0];};var search=function search(){gettransactiondata();};var gettransactiondata=function gettransactiondata(){var fromdata=selectedfromdate[0]==undefined?selectedfromdate:selectedfromdate[0];var todate=selectedtodate[0]==undefined?selectedtodate:selectedtodate[0];dataservice(\"report\",{requestfor:'feebreakdown',data:{flag:'a',fromdate:moment(fromdata).format(\"YYYY-MM-DD\"),todate:moment(todate).format(\"YYYY-MM-DD\")}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;console.log(result);setTransactionLog(_objectSpread(_objectSpread({},TransactionLogdata),{},_defineProperty({},\"data\",result)));var datasd=[];for(var index=0;index<result.length;index++){var element=result[index];datasd.push({BoatFee:element.BoatFee,Discount:element.discount,BraceletFee:element.BraceletFee,ETAF:element.ETAF,boatcharge:element.boatcharge,boatname:element.boatname,countveh:element.countveh,fromdate:element.fromdate,numberofdays:element.numberofdays,pax:element.pax,buybracelet:element.buybracelet,rentbracelet:element.rentbracelet,paymentreferencenumber:element.paymentreferencenumber,prkchrg:element.prkchrg,processingfee:element.processingfee,todate:element.todate,totalcharge:element.totalcharge,typeofvehicle:element.typeofvehicle,paymentdate:element.paymentdate,channel_fee:element.channel_fee});}setCSVData(datasd);}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};useEffect(function(){gettransactiondata();},[]);var columns=[{name:'Reference Number',selector:'paymentreferencenumber',sortable:true},{name:'Guest ',selector:'pax',sortable:true},{name:'Bracelet Buy',selector:'buybracelet',sortable:true},{name:'Bracelet Rent',selector:'rentbracelet',sortable:true},{name:'Processing Fee',selector:'processingfee',sortable:true},{name:'Bracelet Fee',selector:'BraceletFee',sortable:true},{name:'Boat Charge',selector:'boatcharge',sortable:true},{name:'ETAF',selector:'ETAF',sortable:true},{name:'Parking Charges',selector:'prkchrg',sortable:true},{name:'Vehicle',selector:'typeofvehicle',sortable:true},{name:'Number of Vehicle',selector:'countveh',sortable:true},{name:'Boat Name',selector:'boatname',sortable:true},{name:'Boat Fee',selector:'BoatFee',sortable:true},{name:'Discount',selector:'discount',sortable:true},{name:'Traveling Start Date',selector:'fromdate',sortable:true},{name:'Traveling End Date',selector:'todate',sortable:true},{name:'Payment Date',selector:'paymentdate',sortable:true},{name:'Channel Fee',selector:'channel_fee',sortable:true}//,\n// {\n//   name: 'Status',\n//   selector: 'isactive',\n//   sortable: true,\n//   cell: d => <CBadge color={d.isactive==\"1\"?\"success\":\"danger\"}>\n//                       {d.isactive==\"1\"?\"Active\":\"In Active\"}\n//                      </CBadge>,\n// }\n];var data=[];var _useState7=useState({columns:columns,data:data}),_useState8=_slicedToArray(_useState7,2),TransactionLogdata=_useState8[0],setTransactionLog=_useState8[1];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(CRow,{children:/*#__PURE__*/_jsx(CCol,{xl:12,children:/*#__PURE__*/_jsxs(CCard,{children:[/*#__PURE__*/_jsx(CCardHeader,{children:/*#__PURE__*/_jsx(CRow,{children:/*#__PURE__*/_jsxs(CCol,{xl:6,children:[\"Fees Break Down\",/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\" Report\"})]})})}),/*#__PURE__*/_jsxs(CCardBody,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-4 col-md-12 mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"country\",children:\"From Date\"}),/*#__PURE__*/_jsx(DatePicker,{className:\"form-control\",value:selectedfromdate,onChange:setselectedfromdate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-4 col-md-12 mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"country\",children:\"To Date\"}),/*#__PURE__*/_jsx(DatePicker,{className:\"form-control\",value:selectedtodate,onChange:setselectedtodate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-4 col-md-12 mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"country\",children:\"Search\"}),/*#__PURE__*/_jsx(CButton,{block:true,onClick:function onClick(){return search();},color:\"primary\",children:\"Search\"})]})]}),/*#__PURE__*/_jsx(CSVLink,{className:\"mr-1 btn btn-primary\",style:{float:\"right\"},data:csvdata,headers:headerss,filename:\"FeeBreakDown.csv\",children:\"Download csv\"}),/*#__PURE__*/_jsx(DataTableExtensions,_objectSpread(_objectSpread({},TransactionLogdata),{},{children:/*#__PURE__*/_jsx(DataTable,{noHeader:true,defaultSortField:\"id\",defaultSortAsc:false,pagination:true,highlightOnHover:true})}))]})]})})})});};export default FeeBreakDownRpt;","map":{"version":3,"sources":["D:/I2T/Smarttech/tourbookingwebgit/src/views/Reports/FeesBreakDownRpt/FeesBreak.js"],"names":["React","useState","useEffect","useHistory","useLocation","CCard","CCardBody","CCardHeader","CCol","CRow","CButton","CModal","CModalTitle","CModalHeader","CModalBody","CForm","CInputGroupPrepend","CInputGroupText","CInputGroup","CInput","CFormGroup","CInputCheckbox","CLabel","CModalFooter","CBadge","DataTable","DataTableExtensions","Select","CIcon","dataservice","toast","CSVLink","DatePicker","moment","notify","type","message","systemerror","success","position","POSITION","TOP_CENTER","dtlmsg","undefined","error","headerss","label","key","FeeBreakDownRpt","csvdata","setCSVData","currentdateminuonemmonth","Date","setMonth","getMonth","selectedfromdate","setFromdate","setselectedfromdate","e","selectedtodate","setTodate","setselectedtodate","todata","fromdata","search","gettransactiondata","todate","requestfor","data","flag","fromdate","format","then","resultkey","result","resultvalue","console","log","setTransactionLog","TransactionLogdata","datasd","index","length","element","push","BoatFee","Discount","discount","BraceletFee","ETAF","boatcharge","boatname","countveh","numberofdays","pax","buybracelet","rentbracelet","paymentreferencenumber","prkchrg","processingfee","totalcharge","typeofvehicle","paymentdate","channel_fee","catch","edata","toString","columns","name","selector","sortable","float"],"mappings":"4cAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,kBAAxC,CACA,OACEC,KADF,CAEEC,SAFF,CAGEC,WAHF,CAIEC,IAJF,CAKEC,IALF,CAMEC,OANF,CAOEC,MAPF,CAQEC,WARF,CASEC,YATF,CAUEC,UAVF,CAWEC,KAXF,CAYEC,kBAZF,CAaEC,eAbF,CAcEC,WAdF,CAeEC,MAfF,CAgBEC,UAhBF,CAiBEC,cAjBF,CAkBEC,MAlBF,CAmBEC,YAnBF,CAoBEC,MApBF,KAqBO,eArBP,CAuBA,MAAOC,CAAAA,SAAP,KAAsB,4BAAtB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,uCAAhC,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,C,6IACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,IAAD,CAAOC,OAAP,CAAgBC,WAAhB,CAAgC,CAC7C,OAAQF,IAAR,EACE,IAAK,EAAL,CACEL,KAAK,CAACQ,OAAN,CAAcF,OAAd,CAAuB,CACrBG,QAAQ,CAAET,KAAK,CAACU,QAAN,CAAeC,UADJ,CAAvB,EAGA,MACF,IAAK,EAAL,CACE,GAAIC,CAAAA,MAAJ,CACA,GAAIL,WAAW,GAAKM,SAApB,CAA+B,CAC7BD,MAAM,cAAG,uEAAqC,aAArC,CAA+CN,OAA/C,GAAT,CACD,CAFD,IAEO,CACLM,MAAM,cAAG,qBAAMN,OAAN,EAAT,CACD,CAEDN,KAAK,CAACc,KAAN,cAAY,oCACV,KAAC,KAAD,EAAO,IAAI,CAAC,aAAZ,EADU,UAGTF,MAHS,GAAZ,CAKQ,CACNH,QAAQ,CAAET,KAAK,CAACU,QAAN,CAAeC,UADnB,CALR,EAQA,MAEF,QACE,MAzBJ,CA2BD,CA5BD,CA+BA,GAAMI,CAAAA,QAAQ,CAAG,CACf,CAAEC,KAAK,CAAE,kBAAT,CAA6BC,GAAG,CAAE,wBAAlC,CADe,CAEf,CAAED,KAAK,CAAE,QAAT,CAAmBC,GAAG,CAAE,KAAxB,CAFe,CAGf,CAAED,KAAK,CAAE,cAAT,CAAyBC,GAAG,CAAE,aAA9B,CAHe,CAIf,CAAED,KAAK,CAAE,iBAAT,CAA4BC,GAAG,CAAE,cAAjC,CAJe,CAKf,CAAED,KAAK,CAAE,gBAAT,CAA2BC,GAAG,CAAE,eAAhC,CALe,CAMf,CAAED,KAAK,CAAE,aAAT,CAAwBC,GAAG,CAAE,YAA7B,CANe,CAOf,CAAED,KAAK,CAAE,UAAT,CAAqBC,GAAG,CAAE,UAA1B,CAPe,CAQf,CAAED,KAAK,CAAE,cAAT,CAAyBC,GAAG,CAAE,aAA9B,CARe,CASf,CAAED,KAAK,CAAE,MAAT,CAAiBC,GAAG,CAAE,MAAtB,CATe,CAUf,CAAED,KAAK,CAAE,iBAAT,CAA4BC,GAAG,CAAE,SAAjC,CAVe,CAWf,CAAED,KAAK,CAAE,iBAAT,CAA4BC,GAAG,CAAE,eAAjC,CAXe,CAYf,CAAED,KAAK,CAAE,mBAAT,CAA8BC,GAAG,CAAE,UAAnC,CAZe,CAaf,CAAED,KAAK,CAAE,WAAT,CAAsBC,GAAG,CAAE,UAA3B,CAbe,CAcf,CAAED,KAAK,CAAE,UAAT,CAAqBC,GAAG,CAAE,SAA1B,CAde,CAef,CAAED,KAAK,CAAE,sBAAT,CAAiCC,GAAG,CAAE,UAAtC,CAfe,CAgBf,CAAED,KAAK,CAAE,cAAT,CAAyBC,GAAG,CAAE,aAA9B,CAhBe,CAiBf,CAAED,KAAK,CAAE,aAAT,CAAwBC,GAAG,CAAE,aAA7B,CAjBe,CAAjB,CAoBA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,cAA8B/C,QAAQ,CAAC,EAAD,CAAtC,wCAAOgD,OAAP,eAAgBC,UAAhB,eACA,GAAIC,CAAAA,wBAAwB,CAAG,GAAIC,CAAAA,IAAJ,EAA/B,CACA,GAAID,CAAAA,wBAAwB,CAAGA,wBAAwB,CAACE,QAAzB,CAAkCF,wBAAwB,CAACG,QAAzB,GAAsC,CAAxE,CAA/B,CACA,eAAwCrD,QAAQ,CAAC,CAAC,GAAImD,CAAAA,IAAJ,EAAD,CAAD,CAAhD,yCAAOG,gBAAP,eAAyBC,WAAzB,eACA,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,CAAD,CAAO,CACjCF,WAAW,CAACE,CAAD,CAAX,CACA;AAED,CAJD,CAMA,eAAoCzD,QAAQ,CAAC,CAAC,GAAImD,CAAAA,IAAJ,EAAD,CAAD,CAA5C,yCAAOO,cAAP,eAAuBC,SAAvB,eACA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACH,CAAD,CAAO,CAC/BE,SAAS,CAACF,CAAD,CAAT,CACA,GAAII,CAAAA,MAAM,CAAGJ,CAAb,CACA,GAAIK,CAAAA,QAAQ,CACVR,gBAAgB,CAAC,CAAD,CAAhB,EAAuBZ,SAAvB,CAAmCY,gBAAnC,CAAsDA,gBAAgB,CAAC,CAAD,CADxE,CAGD,CAND,CAOA,GAAMS,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBC,kBAAkB,GACnB,CAFD,CAGA,GAAMA,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/B,GAAIF,CAAAA,QAAQ,CACVR,gBAAgB,CAAC,CAAD,CAAhB,EAAuBZ,SAAvB,CAAmCY,gBAAnC,CAAsDA,gBAAgB,CAAC,CAAD,CADxE,CAEA,GAAIW,CAAAA,MAAM,CACRP,cAAc,CAAC,CAAD,CAAd,EAAqBhB,SAArB,CAAiCgB,cAAjC,CAAkDA,cAAc,CAAC,CAAD,CADlE,CAEA9B,WAAW,CAAC,QAAD,CAAW,CACpBsC,UAAU,CAAE,cADQ,CACQC,IAAI,CAAE,CAChCC,IAAI,CAAE,GAD0B,CACrBC,QAAQ,CAAErC,MAAM,CAAC8B,QAAD,CAAN,CAAiBQ,MAAjB,CAAwB,YAAxB,CADW,CAC4BL,MAAM,CAAEjC,MAAM,CAACiC,MAAD,CAAN,CAAeK,MAAf,CAAsB,YAAtB,CADpC,CADd,CAAX,CAAX,CAKGC,IALH,CAKQ,SAAUJ,IAAV,CAAgB,CACpB,GAAIA,IAAI,CAACK,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIC,CAAAA,MAAM,CAAGN,IAAI,CAACO,WAAlB,CACAC,OAAO,CAACC,GAAR,CAAYH,MAAZ,EACAI,iBAAiB,gCAAMC,kBAAN,wBAA2B,MAA3B,CAAoCL,MAApC,GAAjB,CAEA,GAAIM,CAAAA,MAAM,CAAG,EAAb,CACA,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGP,MAAM,CAACQ,MAAnC,CAA2CD,KAAK,EAAhD,CAAoD,CAClD,GAAME,CAAAA,OAAO,CAAGT,MAAM,CAACO,KAAD,CAAtB,CACAD,MAAM,CAACI,IAAP,CACE,CAEEC,OAAO,CAAEF,OAAO,CAACE,OAFnB,CAGEC,QAAQ,CAAEH,OAAO,CAACI,QAHpB,CAIEC,WAAW,CAAEL,OAAO,CAACK,WAJvB,CAKEC,IAAI,CAAEN,OAAO,CAACM,IALhB,CAMEC,UAAU,CAAEP,OAAO,CAACO,UANtB,CAOEC,QAAQ,CAAER,OAAO,CAACQ,QAPpB,CAQEC,QAAQ,CAAET,OAAO,CAACS,QARpB,CASEtB,QAAQ,CAAEa,OAAO,CAACb,QATpB,CAUEuB,YAAY,CAAEV,OAAO,CAACU,YAVxB,CAWEC,GAAG,CAAEX,OAAO,CAACW,GAXf,CAYEC,WAAW,CAAEZ,OAAO,CAACY,WAZvB,CAaEC,YAAY,CAAEb,OAAO,CAACa,YAbxB,CAcEC,sBAAsB,CAAEd,OAAO,CAACc,sBAdlC,CAeEC,OAAO,CAAEf,OAAO,CAACe,OAfnB,CAgBEC,aAAa,CAAEhB,OAAO,CAACgB,aAhBzB,CAiBEjC,MAAM,CAAEiB,OAAO,CAACjB,MAjBlB,CAkBEkC,WAAW,CAAEjB,OAAO,CAACiB,WAlBvB,CAmBEC,aAAa,CAAElB,OAAO,CAACkB,aAnBzB,CAoBEC,WAAW,CAAEnB,OAAO,CAACmB,WApBvB,CAqBEC,WAAW,CAAEpB,OAAO,CAACoB,WArBvB,CADF,EA0BD,CACDrD,UAAU,CAAC8B,MAAD,CAAV,CACD,CApCD,IAoCO,CACL;AACD,CAEF,CA9CH,EA+CGwB,KA/CH,CA+CS,SAAUC,KAAV,CAAiB,CACtBvE,MAAM,CAAC,CAAD,CAAIuE,KAAK,CAACC,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CAjDH,EAqDD,CA1DD,CA2DAxG,SAAS,CAAC,UAAM,CAEd+D,kBAAkB,GAGnB,CALQ,CAKN,EALM,CAAT,CAOA,GAAM0C,CAAAA,OAAO,CAAG,CACd,CACEC,IAAI,CAAE,kBADR,CAEEC,QAAQ,CAAE,wBAFZ,CAGEC,QAAQ,CAAE,IAHZ,CADc,CAMd,CACEF,IAAI,CAAE,QADR,CAEEC,QAAQ,CAAE,KAFZ,CAGEC,QAAQ,CAAE,IAHZ,CANc,CAWd,CACEF,IAAI,CAAE,cADR,CAEEC,QAAQ,CAAE,aAFZ,CAGEC,QAAQ,CAAE,IAHZ,CAXc,CAgBd,CACEF,IAAI,CAAE,eADR,CAEEC,QAAQ,CAAE,cAFZ,CAGEC,QAAQ,CAAE,IAHZ,CAhBc,CAqBd,CACEF,IAAI,CAAE,gBADR,CAEEC,QAAQ,CAAE,eAFZ,CAGEC,QAAQ,CAAE,IAHZ,CArBc,CA0Bd,CACEF,IAAI,CAAE,cADR,CAEEC,QAAQ,CAAE,aAFZ,CAGEC,QAAQ,CAAE,IAHZ,CA1Bc,CA+Bd,CACEF,IAAI,CAAE,aADR,CAEEC,QAAQ,CAAE,YAFZ,CAGEC,QAAQ,CAAE,IAHZ,CA/Bc,CAoCd,CACEF,IAAI,CAAE,MADR,CAEEC,QAAQ,CAAE,MAFZ,CAGEC,QAAQ,CAAE,IAHZ,CApCc,CAyCd,CACEF,IAAI,CAAE,iBADR,CAEEC,QAAQ,CAAE,SAFZ,CAGEC,QAAQ,CAAE,IAHZ,CAzCc,CA8Cd,CACEF,IAAI,CAAE,SADR,CAEEC,QAAQ,CAAE,eAFZ,CAGEC,QAAQ,CAAE,IAHZ,CA9Cc,CAmDd,CACEF,IAAI,CAAE,mBADR,CAEEC,QAAQ,CAAE,UAFZ,CAGEC,QAAQ,CAAE,IAHZ,CAnDc,CAwDd,CACEF,IAAI,CAAE,WADR,CAEEC,QAAQ,CAAE,UAFZ,CAGEC,QAAQ,CAAE,IAHZ,CAxDc,CA6Dd,CACEF,IAAI,CAAE,UADR,CAEEC,QAAQ,CAAE,SAFZ,CAGEC,QAAQ,CAAE,IAHZ,CA7Dc,CAkEd,CACEF,IAAI,CAAE,UADR,CAEEC,QAAQ,CAAE,UAFZ,CAGEC,QAAQ,CAAE,IAHZ,CAlEc,CAuEd,CACEF,IAAI,CAAE,sBADR,CAEEC,QAAQ,CAAE,UAFZ,CAGEC,QAAQ,CAAE,IAHZ,CAvEc,CA4Ed,CACEF,IAAI,CAAE,oBADR,CAEEC,QAAQ,CAAE,QAFZ,CAGEC,QAAQ,CAAE,IAHZ,CA5Ec,CAiFd,CACEF,IAAI,CAAE,cADR,CAEEC,QAAQ,CAAE,aAFZ,CAGEC,QAAQ,CAAE,IAHZ,CAjFc,CAsFd,CACEF,IAAI,CAAE,aADR,CAEEC,QAAQ,CAAE,aAFZ,CAGEC,QAAQ,CAAE,IAHZ,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApGc,CAAhB,CAuGA,GAAM1C,CAAAA,IAAI,CAAG,EAAb,CACA,eAAgDnE,QAAQ,CAAC,CACvD0G,OAAO,CAAPA,OADuD,CAEvDvC,IAAI,CAAJA,IAFuD,CAAD,CAAxD,yCAAOW,kBAAP,eAA2BD,iBAA3B,eAIA,mBACE,sCACE,KAAC,IAAD,wBACE,KAAC,IAAD,EAAM,EAAE,CAAE,EAAV,uBACE,MAAC,KAAD,yBACE,KAAC,WAAD,wBACE,KAAC,IAAD,wBACE,MAAC,IAAD,EAAM,EAAE,CAAE,CAAV,0CAEE,cAAO,SAAS,CAAC,YAAjB,qBAFF,GADF,EADF,EADF,cAaE,MAAC,SAAD,yBACE,aAAK,SAAS,CAAC,KAAf,wBACE,aAAK,SAAS,CAAC,yBAAf,wBACE,cAAO,GAAG,CAAC,SAAX,uBADF,cAIE,KAAC,UAAD,EACE,SAAS,CAAC,cADZ,CAEE,KAAK,CAAEvB,gBAFT,CAGE,QAAQ,CAAEE,mBAHZ,EAJF,GADF,cAWE,aAAK,SAAS,CAAC,yBAAf,wBACE,cAAO,GAAG,CAAC,SAAX,qBADF,cAIE,KAAC,UAAD,EACE,SAAS,CAAC,cADZ,CAEE,KAAK,CAAEE,cAFT,CAGE,QAAQ,CAAEE,iBAHZ,EAJF,GAXF,cAqBE,aAAK,SAAS,CAAC,yBAAf,wBACE,cAAO,GAAG,CAAC,SAAX,oBADF,cAIE,KAAC,OAAD,EAAS,KAAK,KAAd,CAAe,OAAO,CAAE,yBAAMG,CAAAA,MAAM,EAAZ,EAAxB,CAAwC,KAAK,CAAC,SAA9C,oBAJF,GArBF,GADF,cA+BE,KAAC,OAAD,EAAS,SAAS,CAAC,sBAAnB,CAA0C,KAAK,CAAE,CAAE+C,KAAK,CAAE,OAAT,CAAjD,CAAqE,IAAI,CAAE9D,OAA3E,CAAoF,OAAO,CAAEJ,QAA7F,CAAuG,QAAQ,CAAE,kBAAjH,0BA/BF,cAkCE,KAAC,mBAAD,gCACMkC,kBADN,4BAKE,KAAC,SAAD,EACE,QAAQ,KADV,CAEE,gBAAgB,CAAC,IAFnB,CAGE,cAAc,CAAE,KAHlB,CAIE,UAAU,KAJZ,CAKE,gBAAgB,KALlB,EALF,GAlCF,GAbF,GADF,EADF,EADF,EADF,CAyED,CA7QD,CA8QA,cAAe/B,CAAAA,eAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CButton,\r\n  CModal,\r\n  CModalTitle,\r\n  CModalHeader,\r\n  CModalBody,\r\n  CForm,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n  CInputGroup,\r\n  CInput,\r\n  CFormGroup,\r\n  CInputCheckbox,\r\n  CLabel,\r\n  CModalFooter,\r\n  CBadge\r\n} from '@coreui/react'\r\n\r\nimport DataTable from \"react-data-table-component\";\r\nimport DataTableExtensions from \"react-data-table-component-extensions\";\r\nimport Select from 'react-select';\r\nimport CIcon from '@coreui/icons-react';\r\nimport dataservice from '../../service/dataservice';\r\nimport { toast } from 'react-toastify';\r\nimport { CSVLink } from \"react-csv\";\r\nimport DatePicker from \"react-date-picker\";\r\nimport moment from \"moment\";\r\nconst notify = (type, message, systemerror) => {\r\n  switch (type) {\r\n    case 1:\r\n      toast.success(message, {\r\n        position: toast.POSITION.TOP_CENTER\r\n      });\r\n      break;\r\n    case 2:\r\n      var dtlmsg;\r\n      if (systemerror !== undefined) {\r\n        dtlmsg = <div>Please contact to administrator!<br></br>{message}</div>;\r\n      } else {\r\n        dtlmsg = <div>{message}</div>;\r\n      }\r\n\r\n      toast.error(<div>\r\n        <CIcon name=\"cil-warning\" /> Error\r\n\r\n        {dtlmsg}\r\n\r\n      </div>, {\r\n        position: toast.POSITION.TOP_CENTER\r\n      });\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\n\r\nconst headerss = [\r\n  { label: \"Reference Number\", key: \"paymentreferencenumber\" },\r\n  { label: \"Guest \", key: \"pax\" },\r\n  { label: \"Bracelet Buy\", key: \"buybracelet\" },\r\n  { label: \"Bracelet Rented\", key: \"rentbracelet\" },\r\n  { label: \"Processing Fee\", key: \"processingfee\" },\r\n  { label: \"Boat Charge\", key: \"boatcharge\" },\r\n  { label: \"Discount\", key: \"Discount\" },\r\n  { label: \"Bracelet Fee\", key: \"BraceletFee\" },\r\n  { label: \"ETAF\", key: \"ETAF\" },\r\n  { label: \"Parking Charges\", key: \"prkchrg\" },\r\n  { label: \"Vehicle Parking\", key: \"typeofvehicle\" },\r\n  { label: \"Number of Vehicle\", key: \"countveh\" },\r\n  { label: \"Boat Name\", key: \"boatname\" },\r\n  { label: \"Boat Fee\", key: \"BoatFee\" },\r\n  { label: \"Traveling Start Date\", key: \"fromdate\" },\r\n  { label: \"Payment Date\", key: \"paymentdate\" },\r\n  { label: \"Channel fee\", key: \"channel_fee\" }\r\n\r\n];\r\nconst FeeBreakDownRpt = () => {\r\n  const [csvdata, setCSVData] = useState([]);\r\n  var currentdateminuonemmonth = new Date();\r\n  var currentdateminuonemmonth = currentdateminuonemmonth.setMonth(currentdateminuonemmonth.getMonth() - 1);\r\n  const [selectedfromdate, setFromdate] = useState([new Date()]);\r\n  const setselectedfromdate = (e) => {\r\n    setFromdate(e);\r\n    //setTodate(e);\r\n\r\n  };\r\n\r\n  const [selectedtodate, setTodate] = useState([new Date()]);\r\n  const setselectedtodate = (e) => {\r\n    setTodate(e);\r\n    var todata = e;\r\n    var fromdata =\r\n      selectedfromdate[0] == undefined ? selectedfromdate : selectedfromdate[0];\r\n\r\n  };\r\n  const search = () => {\r\n    gettransactiondata();\r\n  }\r\n  const gettransactiondata = () => {\r\n    var fromdata =\r\n      selectedfromdate[0] == undefined ? selectedfromdate : selectedfromdate[0];\r\n    var todate =\r\n      selectedtodate[0] == undefined ? selectedtodate : selectedtodate[0];\r\n    dataservice(\"report\", {\r\n      requestfor: 'feebreakdown', data: {\r\n        flag: 'a', fromdate: moment(fromdata).format(\"YYYY-MM-DD\"), todate: moment(todate).format(\"YYYY-MM-DD\")\r\n      }\r\n    })\r\n      .then(function (data) {\r\n        if (data.resultkey == 1) {\r\n          var result = data.resultvalue;\r\n          console.log(result);\r\n          setTransactionLog({ ...TransactionLogdata, [\"data\"]: result });\r\n\r\n          let datasd = [];\r\n          for (let index = 0; index < result.length; index++) {\r\n            const element = result[index];\r\n            datasd.push(\r\n              {\r\n\r\n                BoatFee: element.BoatFee,\r\n                Discount: element.discount,\r\n                BraceletFee: element.BraceletFee,\r\n                ETAF: element.ETAF,\r\n                boatcharge: element.boatcharge,\r\n                boatname: element.boatname,\r\n                countveh: element.countveh,\r\n                fromdate: element.fromdate,\r\n                numberofdays: element.numberofdays,\r\n                pax: element.pax,\r\n                buybracelet: element.buybracelet,\r\n                rentbracelet: element.rentbracelet,\r\n                paymentreferencenumber: element.paymentreferencenumber,\r\n                prkchrg: element.prkchrg,\r\n                processingfee: element.processingfee,\r\n                todate: element.todate,\r\n                totalcharge: element.totalcharge,\r\n                typeofvehicle: element.typeofvehicle,\r\n                paymentdate: element.paymentdate,\r\n                channel_fee: element.channel_fee\r\n              }\r\n            );\r\n\r\n          }\r\n          setCSVData(datasd);\r\n        } else {\r\n          //  notify(2,\"No data found\");\r\n        }\r\n\r\n      })\r\n      .catch(function (edata) {\r\n        notify(2, edata.toString(), 1);\r\n      });\r\n\r\n\r\n\r\n  }\r\n  useEffect(() => {\r\n\r\n    gettransactiondata();\r\n\r\n\r\n  }, [])\r\n\r\n  const columns = [\r\n    {\r\n      name: 'Reference Number',\r\n      selector: 'paymentreferencenumber',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Guest ',\r\n      selector: 'pax',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Bracelet Buy',\r\n      selector: 'buybracelet',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Bracelet Rent',\r\n      selector: 'rentbracelet',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Processing Fee',\r\n      selector: 'processingfee',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Bracelet Fee',\r\n      selector: 'BraceletFee',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Boat Charge',\r\n      selector: 'boatcharge',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'ETAF',\r\n      selector: 'ETAF',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Parking Charges',\r\n      selector: 'prkchrg',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Vehicle',\r\n      selector: 'typeofvehicle',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Number of Vehicle',\r\n      selector: 'countveh',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Boat Name',\r\n      selector: 'boatname',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Boat Fee',\r\n      selector: 'BoatFee',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Discount',\r\n      selector: 'discount',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Traveling Start Date',\r\n      selector: 'fromdate',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Traveling End Date',\r\n      selector: 'todate',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Payment Date',\r\n      selector: 'paymentdate',\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Channel Fee',\r\n      selector: 'channel_fee',\r\n      sortable: true,\r\n    },\r\n\r\n    //,\r\n    // {\r\n    //   name: 'Status',\r\n    //   selector: 'isactive',\r\n    //   sortable: true,\r\n    //   cell: d => <CBadge color={d.isactive==\"1\"?\"success\":\"danger\"}>\r\n    //                       {d.isactive==\"1\"?\"Active\":\"In Active\"}\r\n    //                      </CBadge>,\r\n    // }\r\n\r\n  ];\r\n  const data = [];\r\n  const [TransactionLogdata, setTransactionLog] = useState({\r\n    columns,\r\n    data\r\n  });\r\n  return (\r\n    <>\r\n      <CRow>\r\n        <CCol xl={12}>\r\n          <CCard>\r\n            <CCardHeader>\r\n              <CRow>\r\n                <CCol xl={6}>\r\n                  Fees Break Down\r\n                  <small className=\"text-muted\"> Report</small>\r\n                </CCol>\r\n\r\n              </CRow>\r\n\r\n\r\n\r\n            </CCardHeader>\r\n            <CCardBody>\r\n              <div className='row'>\r\n                <div className=\"col-lg-4 col-md-12 mb-4\">\r\n                  <label for=\"country\">\r\n                    From Date\r\n                  </label>\r\n                  <DatePicker\r\n                    className=\"form-control\"\r\n                    value={selectedfromdate}\r\n                    onChange={setselectedfromdate}\r\n                  />\r\n                </div>\r\n                <div className=\"col-lg-4 col-md-12 mb-4\">\r\n                  <label for=\"country\">\r\n                    To Date\r\n                  </label>\r\n                  <DatePicker\r\n                    className=\"form-control\"\r\n                    value={selectedtodate}\r\n                    onChange={setselectedtodate}\r\n                  />\r\n                </div>\r\n                <div className=\"col-lg-4 col-md-12 mb-4\">\r\n                  <label for=\"country\">\r\n                    Search\r\n                  </label>\r\n                  <CButton block onClick={() => search()} color=\"primary\">\r\n                    Search\r\n                  </CButton>\r\n                </div>\r\n              </div>\r\n              <CSVLink className=\"mr-1 btn btn-primary\" style={{ float: \"right\" }} data={csvdata} headers={headerss} filename={\"FeeBreakDown.csv\"}>\r\n                Download csv\r\n              </CSVLink>\r\n              <DataTableExtensions\r\n                {...TransactionLogdata}\r\n              >\r\n\r\n\r\n                <DataTable\r\n                  noHeader\r\n                  defaultSortField=\"id\"\r\n                  defaultSortAsc={false}\r\n                  pagination\r\n                  highlightOnHover\r\n\r\n                />\r\n              </DataTableExtensions>\r\n\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n      </CRow>\r\n    </>\r\n\r\n  )\r\n}\r\nexport default FeeBreakDownRpt"]},"metadata":{},"sourceType":"module"}