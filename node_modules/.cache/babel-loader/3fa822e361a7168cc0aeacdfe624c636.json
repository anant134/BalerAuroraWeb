{"ast":null,"code":"import _toConsumableArray from\"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/I2T/Smarttech/tourbookingwebgit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory,useLocation}from'react-router-dom';import{CCard,CCardBody,CCardHeader,CCol,CRow,CButton,CModal,CModalTitle,CModalHeader,CModalBody,CForm,CInputGroupPrepend,CInputGroupText,CInputGroup,CInput,CFormGroup,CInputCheckbox,CLabel,CModalFooter,CBadge,CContainer,CCollapse,CSelect,CCardFooter,CImg}from'@coreui/react';import DataTable from\"react-data-table-component\";import DataTableExtensions from\"react-data-table-component-extensions\";import Select from'react-select';import CIcon from'@coreui/icons-react';import dataservice from'../../service/dataservice';import{toast}from'react-toastify';import{InputDecimal}from\"../../commoncomponents/inputdecimal\";import DatePicker from\"react-datepicker\";import{discounticon}from'src/assets/icons/discounticon';import moment from'moment';import uuid from'react-uuid';import FeesComputation from'../register/FeesComputation';import TravelInfo from'../register/TravelInfo';import GuestInfo from'../register/GuestInfo';import Jumbotron from'react-bootstrap/Jumbotron';import Toast from'react-bootstrap/Toast';import Container from'react-bootstrap/Container';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import{userContext}from'../../../views/userContext';import'../../../scss/bootstrap.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var notify=function notify(type,message,systemerror){switch(type){case 1:toast.success(message,{position:toast.POSITION.TOP_CENTER});break;case 2:var dtlmsg;if(systemerror!==undefined){dtlmsg=/*#__PURE__*/_jsxs(\"div\",{children:[\"Please contact to administrator!\",/*#__PURE__*/_jsx(\"br\",{}),message]});}else{dtlmsg=/*#__PURE__*/_jsx(\"div\",{children:message});}toast.error(/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CIcon,{name:\"cil-warning\"}),\" Error\",dtlmsg]}),{position:toast.POSITION.TOP_CENTER});break;case 3:toast.info(message,{position:toast.POSITION.TOP_CENTER,autoClose:5000});break;default:break;}};var processing=process.env.PUBLIC_URL+\"/processing.gif\";var EditBooking=function EditBooking(){var _jsx2,_jsx3;var history=useHistory();var Background=process.env.PUBLIC_URL+\"/bgnew.jpg\";var _useState=useState(),_useState2=_slicedToArray(_useState,2),contextdata=_useState2[0],setcontextdata=_useState2[1];var _useState3=useState({refenecenum:\"\",emailid:\"\"}),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];var _useState5=useState(new Date()),_useState6=_slicedToArray(_useState5,2),fromDate=_useState6[0],setFromDate=_useState6[1];var _useState7=useState(new Date()),_useState8=_slicedToArray(_useState7,2),toDate=_useState8[0],setToDate=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),accordion=_useState10[0],setAccordion=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),ispricerise=_useState12[0],setIsPriceRise=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),totaldue=_useState14[0],setTotalDue=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),totalrefund=_useState16[0],setTotalRefund=_useState16[1];var getMonth=function getMonth(month){var returnmonth=\"\";switch(month){case 1:returnmonth=\"Jan\";break;case 2:returnmonth=\"Feb\";break;case 3:returnmonth=\"Mar\";break;case 4:returnmonth=\"Apr\";break;case 5:returnmonth=\"May\";break;case 6:returnmonth=\"Jun\";break;case 7:returnmonth=\"Jul\";break;case 8:returnmonth=\"Aug\";break;case 9:returnmonth=\"Sep\";break;case 10:returnmonth=\"Oct\";break;case 11:returnmonth=\"Nov\";break;case 12:returnmonth=\"Dec\";break;default:break;}return returnmonth;};//#region Number of Guest  */\nvar _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),numberofguests=_useState18[0],setNumberOfGuestData=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),selectednumberguest=_useState20[0],setSelectedNumberGuest=_useState20[1];var _useState21=useState(true),_useState22=_slicedToArray(_useState21,2),isboatselectionopen=_useState22[0],setIsBoatSeletionOpen=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isbookingfetch=_useState24[0],setIsBookingFetch=_useState24[1];var getnumberofguest=function getnumberofguest(){var countdata=[];for(var index=1;index<=parseInt(25);index++){countdata.push({value:index,label:index.toString()});}setNumberOfGuestData(countdata);};var handleChangeOptionNOG=function handleChangeOptionNOG(e){setSelectedNumberGuest(e.value);};//#endregion Number of Guest */ \n//#region Gender  */\nvar _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),Gender=_useState26[0],setGender=_useState26[1];var getGender=function getGender(){var countdata=[];var genderval=[\"Male\",\"Female\",\"Other\"];for(var index=0;index<3;index++){countdata.push({value:index,label:genderval[index]});}setGender(countdata);};//#endregion Gender */ \n//#region Slot  */\nvar _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),timeslot=_useState28[0],setTimeSlot=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),selectedtimeslot=_useState30[0],setSelectedTimeSlot=_useState30[1];var getslotdata=function getslotdata(){dataservice(\"slots\",{requestfor:'getslots',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){var tempdata=data.resultvalue;var countdata=[];for(var index=0;index<tempdata.length;index++){countdata.push({value:tempdata[index].id,label:tempdata[index].description});}setTimeSlot(countdata);//document.write( dt );\n// setSelectedBoatData(countdata);\n}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};var handleChangeOptionTS=function handleChangeOptionTS(e){setSelectedTimeSlot(e.value);};//#endregion Slot */ \n//#region Boat  */\nvar _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),boatdata=_useState32[0],setBoatdata=_useState32[1];var _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),selectedboatdata=_useState34[0],setSelectedBoatData=_useState34[1];var getboatdata=function getboatdata(){dataservice(\"boat\",{requestfor:'getboatcapacity',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){var tempdata=data.resultvalue;var result=[];var countdata=[];for(var index=0;index<tempdata.length;index++){var element=tempdata[index];element.uuid=uuid();var obj1={};obj1={value:element.uuid,capacity:element.capacity,label:\"  (capacity-\"+element.capacity+\")\",price:element.twowayprice};countdata.push(obj1);}// setBoatdataarr(tempdata);\n//    if(countdata.length>0){\n//     setIsBoatSeletionOpen(false);\n//   }else{\n//     setIsBoatSeletionOpen(true);\n//   }\nsetBoatdata(countdata);}else{notify(2,\"No data found\");}}).catch(function(edata){notify(2,edata.toString(),1);});};var handleChangeOptionBC=function handleChangeOptionBC(e){setSelectedBoatData(Array.isArray(e)?e.map(function(x){return x.value;}):[]);};//#endregion Boat  */\n//#region common\nvar _useState35=useState({fromdate:new Date(),todate:new Date(),pax:0,totalcharge:0,hotelid:[],boatid:[],slotid:null,ishotelprovideboat:0,vehicle:[],touristdata:[]}),_useState36=_slicedToArray(_useState35,2),booking=_useState36[0],setBooking=_useState36[1];var _useState37=useState({fromdate:new Date(),todate:new Date(),pax:0,totalcharge:0,hotelid:[],boatid:[],slotid:null,ishotelprovideboat:0,vehicle:[],touristdata:[],totaldue:0,totalrefund:0}),_useState38=_slicedToArray(_useState37,2),prevBooking=_useState38[0],setPrevBooking=_useState38[1];var searchbooking=function searchbooking(){setIsShowActionBtn(false);if(state.refenecenum==\"\"){notify(2,\"Enter booking refenece number\");}else if(state.emailid==\"\"){notify(2,\"Enter email id\");}else{dataservice(\"booking\",{requestfor:'getbookingforedit',data:{refrencenumber:state.refenecenum,emailid:state.emailid}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;if(result.length>0){setIsShowActionBtn(true);var _bookinginfo=result[0];if(_bookinginfo.isnoshowrefund==\"1\"){notify(3,\"Refund under process please wait patiently !\");return;}else{console.log(result[0]);setIsBookingFetch(true);setIsBoatSeletionOpen(_bookinginfo.ishotelprovideboat==\"0\"?false:true);var pck=JSON.parse(_bookinginfo.package);var boat=_bookinginfo.boatid!=\"\"?JSON.parse(_bookinginfo.boatid):[];var hotel=_bookinginfo.hotelid!=\"\"?JSON.parse(_bookinginfo.hotelid):[];var boatids=[];if(boat.length>0){var _loop=function _loop(index){var element=boat[index];isboat=boatdata.filter(function(x){return x.capacity==element.capacity;});if(isboat.length>0){isboat[0].value=element.uuid;boatids.push(element.uuid);}};for(var index=0;index<boat.length;index++){var isboat;_loop(index);}}setBoatdata(boatdata);var _toursitdata=_bookinginfo.tourist;for(var td=0;td<_toursitdata.length;td++){var eletd=_toursitdata[td];eletd.isassigned=eletd.isassigned==\"0\"?false:true;eletd.isbraceletavailable=eletd.isbraceletavailable==\"0\"?false:true;eletd.isbraceletreturned=eletd.isbraceletreturned==\"0\"?false:true;eletd.ismaubancitizen=eletd.ismaubancitizen==\"0\"?false:true;eletd.isprimary=eletd.isprimary==\"0\"?false:true;eletd.isrentbracelet=eletd.isrentbracelet==\"0\"?false:true;eletd.isreturningguest=eletd.isreturningguest==\"0\"?false:true;eletd.islandhopping=eletd.islandhopping==\"0\"?false:true;eletd.isreturningguestvaildate=eletd.isreturningguest==\"0\"?false:true;;eletd.deleted=false;eletd.uuid=uuid();eletd.hotelid=JSON.parse(eletd.hotelid);}var _vehicledata=[];var _loop2=function _loop2(vh){var element=vehicledata[vh];vehdata=_bookinginfo.vehicle==\"\"||_bookinginfo.vehicle==undefined||_bookinginfo.vehicle==null?[]:JSON.parse(_bookinginfo.vehicle);if(vehdata.length>0){vehfilter=vehdata.filter(function(x){return x.id==element.id;});if(vehfilter.length>0){element.qty=vehfilter[0].qty;}}_vehicledata.push(element);};for(var vh=0;vh<vehicledata.length;vh++){var vehdata;var vehfilter;_loop2(vh);}setBooking({currentdate:new Date(_bookinginfo.currentdate),fromdate:new Date(_bookinginfo.fromdate),todate:new Date(_bookinginfo.todate),pax:_bookinginfo.pax,totalcharge:parseFloat(_bookinginfo.totalcharge)-parseFloat(_bookinginfo.refundamt)+parseFloat(_bookinginfo.partialpayment),hotelid:_bookinginfo.hotelid!=\"\"?JSON.parse(_bookinginfo.hotelid):[],boatid:_bookinginfo.boatid!=\"\"?JSON.parse(_bookinginfo.boatid):[],slotid:_bookinginfo.slotid,ishotelprovideboat:_bookinginfo.ishotelprovideboat==\"0\"?false:true,vehicle:_vehicledata,bookingrefencenum:_bookinginfo.hotelbookingref,parkingnotreq:_bookinginfo.parkingnotreq==\"0\"?false:true,touristdata:_toursitdata,totaldue:0,totalrefund:0,package:_bookinginfo.package!=\"\"?JSON.parse(_bookinginfo.package):[],bookingid:_bookinginfo.id});var _prevehicledata=JSON.parse(JSON.stringify(_vehicledata));var _pretoursitdata=JSON.parse(JSON.stringify(_toursitdata));setPrevBooking({currentdate:new Date(_bookinginfo.currentdate),fromdate:new Date(_bookinginfo.fromdate),todate:new Date(_bookinginfo.todate),pax:_bookinginfo.pax,totalcharge:parseFloat(_bookinginfo.totalcharge)-parseFloat(_bookinginfo.refundamt)+parseFloat(_bookinginfo.partialpayment),hotelid:_bookinginfo.hotelid!=\"\"?JSON.parse(_bookinginfo.hotelid):[],boatid:_bookinginfo.boatid!=\"\"?JSON.parse(_bookinginfo.boatid):[],slotid:_bookinginfo.slotid,ishotelprovideboat:_bookinginfo.ishotelprovideboat==\"0\"?false:true,vehicle:_prevehicledata,bookingrefencenum:_bookinginfo.hotelbookingref,parkingnotreq:_bookinginfo.parkingnotreq==\"0\"?false:true,touristdata:_pretoursitdata,totaldue:0,totalrefund:0,package:_bookinginfo.package!=\"\"?JSON.parse(_bookinginfo.package):[],bookingid:_bookinginfo.id});// SetBookingCalValues({currentBookingvalues:{},preBookingvalues:{}});\nsetFromDate(new Date(_bookinginfo.fromdate));setToDate(new Date(_bookinginfo.todate));setSelectedNumberGuest(parseFloat(_bookinginfo.pax));setSelectedTimeSlot(_bookinginfo.slotid);setSelectedPackage(pck[0].id);setSelectedBoatData(boatids);setSelectedPreferredHotels(hotel[0]);}//(booking.todate);\n}else{notify(2,\"booking number does not exist\");}// setSeteditorval({ ...editorvalue, result });\n// setSetedit({ ...edit, [\"value\"]: result});\n//setFeesdata({ ...feedata, [\"data\"]: result });\n}else{notify(2,\"booking number does not exist\");}}).catch(function(edata){notify(2,edata.toString(),1);});}};var handleEBChange=function handleEBChange(e){var _e$target=e.target,id=_e$target.id,value=_e$target.value;if(e.target.type==='checkbox'){setBooking(_objectSpread(_objectSpread({},booking),{},_defineProperty({},id,e.target.checked==true?e.target.checked:false)));switch(id){case\"parkingnotreq\":for(var index=0;index<booking.vehicle.length;index++){var element=booking.vehicle[index];element.qty=0;}if(e.target.checked){setBooking(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{vehicle:booking.vehicle});});}break;default:break;}}else{setBooking(_objectSpread(_objectSpread({},booking),{},_defineProperty({},id,value)));}};var handleChange=function handleChange(e){var _e$target2=e.target,id=_e$target2.id,value=_e$target2.value;if(e.target.type==='checkbox'){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},id,e.target.checked==true?e.target.checked:false)));}else{setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},id,value)));}};var _useState39=useState([]),_useState40=_slicedToArray(_useState39,2),feesdata=_useState40[0],setFeesData=_useState40[1];var getfees=function getfees(){dataservice(\"fees\",{requestfor:'getfees',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){//   \nvar result=data.resultvalue;setFeesData(_objectSpread(_objectSpread({},feesdata),{},{data:result}));}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};useEffect(function(){getnumberofguest();getslotdata();getpreferredhotels();getPackage();getboatdata();getvehicles();getGender();getCitizenship();getCountry();getProvince();getMunicipalities();getfees();},[]);useEffect(function(){// if(selectedboatdata.length>0){\nReCal();//}\n},[selectedboatdata]);useEffect(function(){if(booking!==undefined&&booking.touristdata.length>0){var pax=booking.touristdata.filter(function(x){return x.deleted==false;}).length;setSelectedNumberGuest(parseFloat(pax));ReCal();}},[booking]);var ReCal=function ReCal(){//#region old cal\n//   if(booking.touristdata!==undefined && booking.touristdata.length>0){\n//   const diffTime = Math.abs(booking.todate - booking.fromdate);\n//   // const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))+1;\n//    let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n//    if(diffDays==0 || diffDays==1){\n//      diffDays=1;\n//    } \n//    var environmentdata=feesdata.data.filter(x=>x.id==1);\n//    var braceletdata=feesdata.data.filter(x=>x.id==4);\n//    var islandhoppingdata=feesdata.data.filter(x=>x.id==9);\n//    var ETAFamt=0;\n//    var Braceletmt=0;\n//    var IslandHoppingAmt=0;\n//    var parking=0;\n//    var Boatamt=0;\n//    var exemptionamt=0;\n//    var discountamt=0;\n//    if(!booking.ishotelprovideboat){\n//      if(selectedboatdata.length>0){\n//       for (let bt = 0; bt < selectedboatdata.length; bt++) {\n//         let eleboat = selectedboatdata[bt];\n//         let filterboat=boatdata.filter(x=>x.value==eleboat);\n//         if(filterboat.length>0){\n//           Boatamt=+ parseFloat(filterboat[0].price);\n//         }\n//       }\n//      }\n//    }\n//    if(!booking.parkingnotreq){\n//     for (let vh = 0; vh < booking.vehicle.length; vh++) {\n//       parking+=((parseFloat(booking.vehicle[vh].qty)*(parseFloat(booking.vehicle[vh].amount) ))*(diffDays)); \n//      }\n//    }\n//    for (let index = 0; index < booking.touristdata.length; index++) {\n//      const eletourist = booking.touristdata[index];\n//      if(!eletourist.deleted)\n//      {\n//       Braceletmt+=eletourist.isrentbracelet==true?(parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0)):(eletourist.isbraceletavailable==true?0:parseFloat(braceletdata[0].price));\n//       IslandHoppingAmt+=eletourist.islandhopping==true?(parseFloat(islandhoppingdata.length>0?islandhoppingdata[0].price:0)):0;\n//      if(!eletourist.ismaubancitizen){\n//         ETAFamt+=parseFloat(environmentdata[0].price);\n//      }else{\n//         exemptionamt+=parseFloat(environmentdata[0].price);\n//      }\n//     }\n//    }\n//    var totalchr=(ETAFamt+Braceletmt+Boatamt+parking+IslandHoppingAmt)-(exemptionamt+discountamt);\n//    var _diffval=(totalchr-booking.totalcharge);\n//   var totaldue=(_diffval>0)==true?(_diffval):0;\n//   var totalrefund=(_diffval<0)==true?(_diffval * (-1)):0;\n//   setTotalDue(totaldue);\n//   setTotalRefund(totalrefund);\n//  }\n//#endregion\nif(booking.touristdata!==undefined&&booking.touristdata.length>0){//pricing fees\nvar environmentdata=feesdata.data.filter(function(x){return x.id==1;});var braceletdata=feesdata.data.filter(function(x){return x.id==4;});var islandhoppingdata=feesdata.data.filter(function(x){return x.id==9;});//#region previous Charges \nvar prediffTime=Math.abs(prevBooking.todate-prevBooking.fromdate);var prediffDays=Math.ceil(prediffTime/(1000*60*60*24));if(prediffDays==0||prediffDays==1){prediffDays=1;}//guest filter \nvar _prevaildguest=prevBooking.touristdata.filter(function(x){return x.deleted==false;});var _premaubaninguest=_prevaildguest.filter(function(x){return x.ismaubancitizen==true;});var _prenonmaubaninguest=_prevaildguest.filter(function(x){return x.ismaubancitizen==false;});var _preislandhoppingguest=_prevaildguest.filter(function(x){return x.islandhopping==true;}).length;//bracelet filter\nvar _prerentbraceletcount=_prenonmaubaninguest.filter(function(x){return x.isrentbracelet==true;}).length;var _preownbraceletcount=_prenonmaubaninguest.filter(function(x){return x.isrentbracelet==false;}).length;var preBraceletmt=(_prerentbraceletcount>0?parseFloat(_prerentbraceletcount)*parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0):0)+(_preownbraceletcount>0?_preownbraceletcount*(braceletdata.length>0?braceletdata[0].price:0):0);//environment charges\nvar preETAFamt=_prenonmaubaninguest.length>0?parseFloat(_prenonmaubaninguest.length)*parseFloat(environmentdata.length>0?parseFloat(environmentdata[0].price):0):0;//island hopping charges\nvar preIslandHoppingAmt=_preislandhoppingguest>0?parseFloat(_preislandhoppingguest)*(islandhoppingdata.length>0?islandhoppingdata[0].price:0):0;//boat charges\nvar preBoatamt=0;if(!prevBooking.ishotelprovideboat){var _loop3=function _loop3(bt){var eleboat=prevBooking.boatid[bt];var filterboat=boatdata.filter(function(x){return x.value==eleboat.uuid;});if(filterboat.length>0){preBoatamt+=parseFloat(filterboat[0].price);}};for(var bt=0;bt<prevBooking.boatid.length;bt++){_loop3(bt);}}//parking charges\nvar preparking=0;if(!prevBooking.parkingnotreq){for(var vh=0;vh<prevBooking.vehicle.length;vh++){preparking+=parseFloat(prevBooking.vehicle[vh].qty)*parseFloat(prevBooking.vehicle[vh].amount)*prediffDays;}}//exemptiona charges for Maubanin\nvar preexemptionamt=0;//senior citizen discount for Maubanin\nvar prediscountamt=0;var preTotalAmt=preETAFamt+preBraceletmt+preBoatamt+preparking+preIslandHoppingAmt-(preexemptionamt+prediscountamt);//#endregion previous Charges\n//#region Current Charges\n// number of day guest stay\nvar diffTime=Math.abs(booking.todate-booking.fromdate);var diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays==0||diffDays==1){diffDays=1;}//guest filter \nvar _vaildguest=booking.touristdata.filter(function(x){return x.deleted==false;});var _maubaninguest=_vaildguest.filter(function(x){return x.ismaubancitizen==true;});var _nonmaubaninguest=_vaildguest.filter(function(x){return x.ismaubancitizen==false;});var _islandhoppingguest=_vaildguest.filter(function(x){return x.islandhopping==true;}).length;;//bracelet filter\nvar _rentbraceletcount=_nonmaubaninguest.filter(function(x){return x.isrentbracelet==true;}).length;var _ownbraceletcount=_nonmaubaninguest.filter(function(x){return x.isrentbracelet==false;}).length;var Braceletmt=(_rentbraceletcount>0?parseFloat(_rentbraceletcount)*parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0):0)+(_ownbraceletcount>0?_ownbraceletcount*(braceletdata.length>0?braceletdata[0].price:0):0);//environment charges\nvar ETAFamt=_nonmaubaninguest.length>0?parseFloat(_nonmaubaninguest.length)*parseFloat(environmentdata.length>0?parseFloat(environmentdata[0].price):0):0;//island hopping charges\nvar IslandHoppingAmt=_islandhoppingguest>0?parseFloat(_islandhoppingguest)*(islandhoppingdata.length>0?islandhoppingdata[0].price:0):0;//boat charges\nvar Boatamt=0;if(!booking.ishotelprovideboat){if(selectedboatdata.length>0){var _loop4=function _loop4(_bt){var eleboat=selectedboatdata[_bt];var filterboat=boatdata.filter(function(x){return x.value==eleboat;});if(filterboat.length>0){Boatamt+=parseFloat(filterboat[0].price);}};for(var _bt=0;_bt<selectedboatdata.length;_bt++){_loop4(_bt);}}}//parking charges\nvar parking=0;if(!booking.parkingnotreq){for(var _vh=0;_vh<booking.vehicle.length;_vh++){parking+=parseFloat(booking.vehicle[_vh].qty)*parseFloat(booking.vehicle[_vh].amount)*diffDays;}}//exemptiona charges for Maubanin\nvar exemptionamt=0;//senior citizen discount for Maubanin\nvar discountamt=0;var TotalAmt=ETAFamt+Braceletmt+Boatamt+parking+IslandHoppingAmt-(exemptionamt+discountamt);//#endregion Current Charges\nSetBookingCalValues({preBookingvalues:{ETAF:preETAFamt,Bracelet:preBraceletmt,Boat:preBoatamt,Package:preparking,IslandHopping:preIslandHoppingAmt,Parking:preparking,Discount:prediscountamt,Exemption:preexemptionamt,Total:preTotalAmt,TotalAmountDue:0,TotalRefund:0},currentBookingvalues:{ETAF:ETAFamt,Bracelet:Braceletmt,Boat:Boatamt,Package:parking,IslandHopping:IslandHoppingAmt,Parking:parking,Discount:discountamt,Exemption:exemptionamt,Total:TotalAmt,TotalAmountDue:TotalAmt-preTotalAmt>0?TotalAmt-preTotalAmt:0,TotalRefund:TotalAmt-preTotalAmt<=0?(TotalAmt-preTotalAmt)*-1:0}});}};var handleChangeHPB=function handleChangeHPB(e){if(e.target.checked){//booking.ishotelprovideboat=true;\nsetBooking(_objectSpread(_objectSpread({},booking),{},_defineProperty({},\"ishotelprovideboat\",true)));setSelectedBoatData([]);}else{// booking.ishotelprovideboat=false;\nsetBooking(_objectSpread(_objectSpread({},booking),{},_defineProperty({},\"ishotelprovideboat\",false)));}};var getdropdownarr=function getdropdownarr(result){var countdata=[];//let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\nfor(var index=0;index<result.length;index++){var item=result[index];countdata.push({value:item.id,label:item.description});}return countdata;};//#endregion \n//#region hotel */\nvar _useState41=useState([]),_useState42=_slicedToArray(_useState41,2),preferredhotels=_useState42[0],setPreferredHotels=_useState42[1];var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),selectedpreferredhotels=_useState44[0],setSelectedPreferredHotels=_useState44[1];var _useState45=useState([]),_useState46=_slicedToArray(_useState45,2),hotelbookingref=_useState46[0],setHotelBookingRef=_useState46[1];var handleChangeOptionPH=function handleChangeOptionPH(e){var Ph=preferredhotels.filter(function(obj){return obj.value===e.value;});setSelectedPreferredHotels(Ph);// setLocalTravelInfoData({...localtravelinfodata, [\"hotel\"]:Ph});\n};var getpreferredhotels=function getpreferredhotels(){dataservice(\"hotel\",{requestfor:'gethotel',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;var countdata=[];//let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\nfor(var index=0;index<result.length;index++){//   \nvar item=result[index];countdata.push({value:item.id,label:item.description});if(countdata.length===1){// setSelectedvehicle(item.id);\n}}setPreferredHotels(countdata);}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};//#endregion hotel  */\n//#region Package  */\nvar _useState47=useState([]),_useState48=_slicedToArray(_useState47,2),packagedata=_useState48[0],setPackagedata=_useState48[1];var _useState49=useState([]),_useState50=_slicedToArray(_useState49,2),packageddl=_useState50[0],setPackageddl=_useState50[1];var _useState51=useState(\"\"),_useState52=_slicedToArray(_useState51,2),selectedPackage=_useState52[0],setSelectedPackage=_useState52[1];var getPackage=function getPackage(){dataservice(\"package\",{requestfor:'getpackage',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;var countdata=[];var pckddl=[];for(var index=0;index<result.length;index++){// \nvar d=result[index];pckddl.push({value:d.id,label:d.description});if(d.isactive==\"1\"){if(d.id==1){var packdetail=d.description;countdata.push({id:d.id,label:packdetail,checked:true,price:d.price});}else{var packdetail=d.description;countdata.push({id:d.id,label:packdetail,checked:false,price:d.price});}}}setPackagedata(countdata);setPackageddl(pckddl);}else{}}).catch(function(edata){notify(2,edata.toString(),1);});};//#endregion Package  */\n//#region vehicle */\nvar _useState53=useState([]),_useState54=_slicedToArray(_useState53,2),vehicledata=_useState54[0],setVehicledata=_useState54[1];var handleChangevehicleqty=function handleChangevehicleqty(index){return function(e){console.log('index: '+index);console.log('property name: '+e.target.value);var newArr=_toConsumableArray(booking.vehicle);// copying the old datas array\nnewArr[index].qty=isNaN(parseFloat(e.target.value))==false?parseFloat(e.target.value):0;// replace e.target.value with whatever you want to change it to\n//setBooking(...booking,[\"vehicle\"],newArr);\nsetBooking(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{vehicle:newArr});});// ??\n//   recaltotal();\n};};var getvehicles=function getvehicles(){// \ndataservice(\"vehicle\",{requestfor:'getvehicle',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;for(var index=0;index<result.length;index++){var element=result[index];element.qty=0;}setVehicledata(result);}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};//#endregion vehicle     \nvar test=function test(){};//#region editbooking tourist  */\nvar _useState55=useState(\"\"),_useState56=_slicedToArray(_useState55,2),edittouristpopup=_useState56[0],setEditTouristpopup=_useState56[1];var _useState57=useState([]),_useState58=_slicedToArray(_useState57,2),edittourist=_useState58[0],setEditTourist=_useState58[1];var _useState59=useState(\"\"),_useState60=_slicedToArray(_useState59,2),returnguestmsg=_useState60[0],setReturnGuestMsg=_useState60[1];var _useState61=useState(new Date()),_useState62=_slicedToArray(_useState61,2),selectedtouristdob=_useState62[0],setSelectedTouristDOB=_useState62[1];var _useState63=useState(),_useState64=_slicedToArray(_useState63,2),selectedtouristgender=_useState64[0],setSelectedTouristGender=_useState64[1];var _useState65=useState(false),_useState66=_slicedToArray(_useState65,2),deletetouristpopup=_useState66[0],setDeletetouristpopup=_useState66[1];var _useState67=useState(false),_useState68=_slicedToArray(_useState67,2),isconfirmbooking=_useState68[0],setIsConfirmBooking=_useState68[1];var _useState69=useState(false),_useState70=_slicedToArray(_useState69,2),isShowActionBtn=_useState70[0],setIsShowActionBtn=_useState70[1];var handleEBTChange=function handleEBTChange(e){var _e$target3=e.target,id=_e$target3.id,value=_e$target3.value;if(e.target.type==='checkbox'){setEditTourist(_objectSpread(_objectSpread({},edittourist),{},_defineProperty({},id,e.target.checked==true?e.target.checked:false)));if(e.target.checked){switch(id){case\"isreturningguest\":edittourist.isreturningguestvaildate=false;edittourist.emailid=\"\";edittourist.Address=\"\";edittourist.Mobilenumber=\"\";setReturnGuestMsg(\"Please vaildate guest!\");break;default:break;}}else{switch(id){case\"isreturningguest\":edittourist.isreturningguestvaildate=false;edittourist.emailid=\"\";edittourist.Address=\"\";edittourist.Mobilenumber=\"\";setReturnGuestMsg(\"\");break;default:break;}}}else{setEditTourist(_objectSpread(_objectSpread({},edittourist),{},_defineProperty({},id,value)));}};var handleChangeEBTGender=function handleChangeEBTGender(e){edittourist.gender=e.value;setSelectedTouristGender(e.value);};var editdata=function editdata(row,e){var fromdate=new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"));var curdate=new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"));if(curdate>fromdate){notify(2,\"Can't edit past date travel itinerary !. \");return;}if(row==-1){e={actualimagename:\"\",address1:\"\",citizenid:\"1\",deleted:false,dob:moment(new Date()).format(\"YYYY-MM-DD\"),emailid:\"\",firstname:\"\",gender:\"\",hotelid:[],isassigned:false,isbraceletavailable:false,isbraceletreturned:false,ismaubancitizen:false,isprimary:false,isrentbracelet:false,isreturningguest:false,isreturningguestvaildate:false,isalreadyvaildatereturningguest:false,lastname:\"\",mobilenumber:\"\",municipalityid:\"1968\",nationalityid:\"2\",provinceid:\"81\",qrcode:null,rfid:null,touristid:\"\",uploadimage:\"\",uuid:uuid()};}setEditTouristpopup(!edittouristpopup);setEditTourist(e);setSelectedTouristDOB(new Date(e.dob));setSelectedTouristGender(parseFloat(e.gender));setSelectedTouristCS(e.citizenid);setSelectedEBTCOO(e.nationalityid);var municipalitydata=RawMunicipality.filter(function(x){return x.provinceid==e.provinceid;});var _ddpmunicipalitydata=getdropdownarr(municipalitydata);setMunicipality(_ddpmunicipalitydata);setSelectedEBTProvince(e.provinceid);setSelectedMunicipality(e.municipalityid);};var opendeletetouristpopup=function opendeletetouristpopup(row,e){var fromdate=new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"));var curdate=new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"));if(curdate>fromdate){notify(2,\"Can't edit past date travel itinerary !. \");return;}setEditTourist(e);setDeletetouristpopup(!deletetouristpopup);};var deletetourist=function deletetourist(){var newdata=booking[\"touristdata\"].map(function(item){if(item.uuid===edittourist.uuid){var updatedItem=_objectSpread(_objectSpread({},item),{},{actualimagename:edittourist.actualimagename,address1:edittourist.address1,citizenid:edittourist.citizenid,dob:edittourist.dob,emailid:edittourist.emailid,firstname:edittourist.firstname,gender:edittourist.gender,hotelid:edittourist.hotelid,isassigned:edittourist.isassigned,isbraceletavailable:edittourist.isbraceletavailable,isbraceletreturned:edittourist.isbraceletreturned,ismaubancitizen:edittourist.ismaubancitizen,isprimary:edittourist.isprimary,isrentbracelet:edittourist.isrentbracelet,isreturningguest:edittourist.isreturningguest,isreturningguestvaildate:edittourist.isreturningguestvaildate,lastname:edittourist.lastname,mobilenumber:edittourist.mobilenumber,municipalityid:edittourist.municipalityid,nationalityid:edittourist.nationalityid,provinceid:edittourist.provinceid,qrcode:edittourist.qrcode,rfid:edittourist.rfid,touristid:edittourist.touristid,uploadimage:edittourist.uploadimage,deleted:true});return updatedItem;}return item;});setBooking(_objectSpread(_objectSpread({},booking),{},_defineProperty({},\"touristdata\",newdata)));setDeletetouristpopup(!deletetouristpopup);};//#endregion editbooking tourist  */\n//#region Citizen\nvar _useState71=useState([]),_useState72=_slicedToArray(_useState71,2),citizenship=_useState72[0],setCitizenship=_useState72[1];var _useState73=useState([]),_useState74=_slicedToArray(_useState73,2),selectedTouristCS=_useState74[0],setSelectedTouristCS=_useState74[1];var getCitizenship=function getCitizenship(){dataservice(\"citizenship\",{requestfor:'getcitizenship',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;var countdata=[];//let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\nfor(var index=0;index<result.length;index++){//   \nvar item=result[index];countdata.push({value:item.id,label:item.description});}setCitizenship(countdata);}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};var handleChangeEBTCS=function handleChangeEBTCS(e){setSelectedTouristCS(e.value);};//#endregion Citizen\n//#region Country Of orgin\nvar _useState75=useState([]),_useState76=_slicedToArray(_useState75,2),country=_useState76[0],setCountry=_useState76[1];var _useState77=useState([]),_useState78=_slicedToArray(_useState77,2),selectedEBTCOO=_useState78[0],setSelectedEBTCOO=_useState78[1];var getCountry=function getCountry(){dataservice(\"country\",{requestfor:'getcountry',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;var countdata=[];//let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\n// countdata.push({ value: \"-1\", label: \"Select Country\" })\nfor(var index=0;index<result.length;index++){//   \nvar item=result[index];countdata.push({value:item.id,label:item.description});}setCountry(countdata);}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};var handleChangeEBTCOO=function handleChangeEBTCOO(e){setSelectedEBTCOO(e.value);};//#endregion\n//#region Province\nvar _useState79=useState([]),_useState80=_slicedToArray(_useState79,2),Province=_useState80[0],setProvince=_useState80[1];var _useState81=useState([]),_useState82=_slicedToArray(_useState81,2),RawProvince=_useState82[0],setRawProvince=_useState82[1];var _useState83=useState([]),_useState84=_slicedToArray(_useState83,2),selectedEBTProvince=_useState84[0],setSelectedEBTProvince=_useState84[1];var getProvince=function getProvince(){dataservice(\"province\",{requestfor:'getprovince',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;setRawProvince(result);var provincedata=getdropdownarr(result);setProvince(provincedata);}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};var handleChangeEBTProvince=function handleChangeEBTProvince(e){setSelectedEBTProvince(e.value);var municipalitydata=RawMunicipality.filter(function(x){return x.provinceid==e.value;});var _ddpmunicipalitydata=getdropdownarr(municipalitydata);setSelectedMunicipality(_ddpmunicipalitydata[0].value);setMunicipality(_ddpmunicipalitydata);};//#endregion\n//#region Municipality\nvar _useState85=useState([]),_useState86=_slicedToArray(_useState85,2),Municipality=_useState86[0],setMunicipality=_useState86[1];var _useState87=useState([]),_useState88=_slicedToArray(_useState87,2),RawMunicipality=_useState88[0],setRawMunicipality=_useState88[1];var _useState89=useState([]),_useState90=_slicedToArray(_useState89,2),selectedMunicipality=_useState90[0],setSelectedMunicipality=_useState90[1];var getMunicipalities=function getMunicipalities(){dataservice(\"municipality\",{requestfor:'getmunicipality',data:{flag:'a'}}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;var countdata=[];//let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\nfor(var index=0;index<result.length;index++){//   \nvar item=result[index];countdata.push({value:item.id,label:item.description});if(countdata.length===1){setSelectedMunicipality(item.id);}}// setMunicipality(countdata);\nsetRawMunicipality(result);}else{//  notify(2,\"No data found\");\n}}).catch(function(edata){notify(2,edata.toString(),1);});};var handleChangeEBTMunicipality=function handleChangeEBTMunicipality(e){setSelectedMunicipality(e.value);};//#endregion\nvar _useState91=useState(false),_useState92=_slicedToArray(_useState91,2),isprocessing=_useState92[0],setIsProcessing=_useState92[1];var _useState93=useState(false),_useState94=_slicedToArray(_useState93,2),isvaildatereturnprocessing=_useState94[0],setIsVaildatereturnProcessing=_useState94[1];var _useState95=useState([]),_useState96=_slicedToArray(_useState95,2),bookingcalvalues=_useState96[0],SetBookingCalValues=_useState96[1];var vaildateguest=function vaildateguest(){setIsVaildatereturnProcessing(true);if(edittourist.firstname==\"\"){notify(2,\"Please enter first name!\");return;}else if(edittourist.lastname==\"\"){notify(2,\"Please enter last name!\");return;}else{dataservice(\"returnguest\",{requestfor:'vaildatereturnguest',data:{firstname:edittourist.firstname,lastname:edittourist.lastname,dob:moment(edittourist.selectedtouristdob).format(\"YYYY-MM-DD\"),gender:selectedtouristgender}}).then(function(data){setIsVaildatereturnProcessing(false);if(data.resultkey==1){var result=data.resultvalue[0];if(result.lastvisited==0){edittourist.isreturningguestvaildate=true;edittourist.emailid=result.emailid;edittourist.address1=result.address1;edittourist.mobilenumber=result.mobilenumber;setSelectedTouristCS(result.citizenid);setSelectedEBTCOO(result.nationalityid);//localtravelinfodata[\"guestinfo\"][guestactivepostion].Municipality=result.ismaubancitizen;\n// guestarr.isguestvaildated=true;\n// guestarr.emailid=result.emailid;\n// guestarr.Address=result.address1;\n// guestarr.Mobilenumber=result.mobilenumber;\n// guestarr.Municipality=result.municipalityid;\n//           address1: \"asdasd\"\n// citizenid: \"1\"\n// emailid: \"anant@gmail.com\"\n// ismaubancitizen: \"0\"\n// mobilenumber: \"99999999\"\n// municipalityid: \"1\"\n// nationalityid: \"2\"\n// provinceid: \"10\"\nsetReturnGuestMsg(\"\");//  recaltotal();\n}}else{// localtravelinfodata[\"guestinfo\"][guestactivepostion].isguestvaildated=false;\nedittourist.isreturningguestvaildate=false;setReturnGuestMsg(\"Sorry guest info doesn't exist.\");}}).catch(function(edata){setIsVaildatereturnProcessing(false);notify(2,edata.toString(),1);});}};var updatetourist=function updatetourist(){var _guestexist=booking.touristdata.filter(function(x){return x.uuid==edittourist.uuid;});if(_guestexist.length>0){var newdata=booking[\"touristdata\"].map(function(item){if(item.touristid===edittourist.touristid){var updatedItem=_objectSpread(_objectSpread({},item),{},{actualimagename:edittourist.actualimagename,address1:edittourist.address1,citizenid:selectedTouristCS,dob:edittourist.dob,emailid:edittourist.emailid,firstname:edittourist.firstname,gender:selectedtouristgender,hotelid:edittourist.hotelid,isassigned:edittourist.isassigned,isbraceletavailable:edittourist.isbraceletavailable,isbraceletreturned:edittourist.isbraceletreturned,ismaubancitizen:edittourist.ismaubancitizen,isprimary:edittourist.isprimary,isrentbracelet:edittourist.isrentbracelet,isreturningguest:edittourist.isreturningguest,isreturningguestvaildate:edittourist.isreturningguestvaildate,lastname:edittourist.lastname,mobilenumber:edittourist.mobilenumber,municipalityid:selectedMunicipality,nationalityid:selectedEBTCOO,provinceid:selectedEBTProvince,qrcode:edittourist.qrcode,rfid:edittourist.rfid,touristid:edittourist.touristid,uploadimage:edittourist.uploadimage});return updatedItem;}return item;});setBooking(_objectSpread(_objectSpread({},booking),{},_defineProperty({},\"touristdata\",newdata)));}else{setBooking(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{touristdata:[].concat(_toConsumableArray(booking.touristdata),[edittourist])});});}setEditTouristpopup(!edittouristpopup);};var Savedata=function Savedata(){if(totaldue>=0&&totalrefund==0){//payment\nvar diffTime=Math.abs(new Date(booking.todate)-new Date(booking.fromdate));// const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))+1;\nvar diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays==0||diffDays==1){diffDays=1;}var boatinfo=[];var Boatamt=0;if(!booking.ishotelprovideboat){if(selectedboatdata.length>0){var _loop5=function _loop5(bt){var eleboat=selectedboatdata[bt];var filterboat=boatdata.filter(function(x){return x.value==eleboat;});if(filterboat.length>0){Boatamt=+parseFloat(filterboat[0].price);boatinfo.push(filterboat[0]);}};for(var bt=0;bt<selectedboatdata.length;bt++){_loop5(bt);}}}var val=Math.floor(1000+Math.random()*9000);var submitdata={fromdate:moment(booking.fromdate).format(\"YYYY-MM-DD\"),todate:moment(booking.todate).format(\"YYYY-MM-DD\"),numberofdays:diffDays,totalcharge:booking.totalcharge,pax:booking.touristdata.filter(function(x){return x.deleted==false;}).length,boatcapcity:boatinfo,preferredhotels:preferredhotels.filter(function(x){return x.value==selectedpreferredhotels.value;}),paymentid:val,selectedvehicleinfo:[],touristinfo:booking.touristdata.filter(function(x){return x.deleted==false;}),chargesinfo:[],numberofvehicle:booking.vehicle.filter(function(x){return x.qty>0;}).length,touristvehicles:booking.vehicle.filter(function(x){return x.qty>0;}),packagedata:booking.package,slotid:selectedtimeslot,ishotelprovideboat:booking.ishotelprovideboat==true?\"1\":\"0\",slotdetail:timeslot.filter(function(x){return x.value==selectedtimeslot;}),parkingnotreq:booking.parkingnotreq==true?\"1\":\"0\",hotelbookingref:booking.bookingrefencenum,packageinfo:{},totalpaydue:totaldue,paymentreferencenumber:\"\",editrefnum:\"\",bookingid:booking.bookingid,hotelid:preferredhotels.filter(function(x){return x.value==selectedpreferredhotels.value;}),boatid:boatinfo};if(totaldue>0){dataservice(\"booking\",{requestfor:'checkavailability',data:{\"fromdate\":moment(new Date(booking.fromdate)).format(\"YYYY-MM-DD\"),\"touristcount\":booking.touristdata.length}}).then(function(checkdata){if(checkdata.resultkey==1){if(checkdata.resultvalue[0].isSlotAvialble>0){dataservice(\"booking\",{requestfor:'updatenewbooking',data:submitdata}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;var responseurl=JSON.parse(data.resultvalue.url).results.data.url;if(responseurl!=\"\"&&responseurl!==undefined){window.location.href=responseurl;}else{notify(2,\"No response from payment gateway try again!\");setIsProcessing(false);}}else{notify(2,\"error!\");setIsProcessing(false);}}).catch(function(error){notify(2,\"error!\"+error);setIsProcessing(false);});}else{notify(2,\"no slot available for this date!\");setIsProcessing(false);}}else{notify(2,\"error !\"+JSON.stringify(checkdata.resultvalue));setIsProcessing(false);}}).catch(function(error){notify(2,\"error !\"+error);setIsProcessing(false);// console.log(error);\n});}else{dataservice(\"booking\",{requestfor:'checkavailability',data:{\"fromdate\":moment(new Date(booking.fromdate)).format(\"YYYY-MM-DD\"),\"touristcount\":booking.touristdata.length}}).then(function(checkdata){if(checkdata.resultkey==1){if(checkdata.resultvalue[0].isSlotAvialble>0){dataservice(\"booking\",{requestfor:'updatenewbooking',data:submitdata}).then(function(data){if(data.resultkey==1){notify(1,\"Booking updated successfully!\");setTimeout(function(){window.location.reload();},3000);}else{notify(2,\"error!\");setIsProcessing(false);}}).catch(function(error){notify(2,\"error!\"+error);setIsProcessing(false);});}else{notify(2,\"no slot available for this date!\");setIsProcessing(false);}}else{notify(2,\"error !\"+JSON.stringify(checkdata.resultvalue));setIsProcessing(false);}}).catch(function(error){notify(2,\"error !\"+error);setIsProcessing(false);// console.log(error);\n});}}else{//refund or cancel\nif(booking.touristdata!==undefined&&booking.touristdata.length>0){var _diffTime=Math.abs(booking.todate-booking.fromdate);// const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))+1;\nvar _diffDays=Math.ceil(_diffTime/(1000*60*60*24));if(_diffDays==0||_diffDays==1){_diffDays=1;}var environmentdata=feesdata.data.filter(function(x){return x.id==1;});var braceletdata=feesdata.data.filter(function(x){return x.id==4;});var ETAFamt=0;var Braceletmt=0;var parking=0;var Boatamt=0;var boatinfo=[];var exemptionamt=0;var discountamt=0;if(!booking.ishotelprovideboat){if(selectedboatdata.length>0){var _loop6=function _loop6(_bt2){var eleboat=selectedboatdata[_bt2];var filterboat=boatdata.filter(function(x){return x.value==eleboat;});if(filterboat.length>0){Boatamt=+parseFloat(filterboat[0].price);boatinfo.push(filterboat[0]);}};for(var _bt2=0;_bt2<selectedboatdata.length;_bt2++){_loop6(_bt2);}}}if(!booking.parkingnotreq){for(var vh=0;vh<booking.vehicle.length;vh++){parking+=parseFloat(booking.vehicle[vh].qty)*parseFloat(booking.vehicle[vh].amount)*_diffDays;}}for(var index=0;index<booking.touristdata.length;index++){var eletourist=booking.touristdata[index];if(!eletourist.deleted){Braceletmt+=eletourist.isrentbracelet==true?parseFloat(braceletdata[0].rentprice):eletourist.isbraceletavailable==true?0:parseFloat(braceletdata[0].price);if(!eletourist.ismaubancitizen){ETAFamt+=parseFloat(environmentdata[0].price);}else{exemptionamt+=parseFloat(environmentdata[0].price);}}}var _booking=JSON.stringify(booking);var _bookingobj=JSON.parse(_booking);_bookingobj.touristdata=_bookingobj.touristdata.filter(function(x){return x.deleted==true;});_bookingobj.vehicle=_bookingobj.vehicle.filter(function(x){return x.qty>0;});var refundvalues={Refundamt:isRefundNoShow==1?booking.totalcharge:totalrefund,Totalamt:isRefundNoShow==1?0:booking.totalcharge-totalrefund,ETAF:ETAFamt,Bracelet:Braceletmt,Package:booking.package,Boat:boatinfo,NOG:selectednumberguest,Parking:parking,Discount:discountamt,Exemption:exemptionamt,Bookinginfo:_bookingobj,Vehicle:booking.vehicle.filter(function(x){return x.qty>0;}),Guestinfo:booking.touristdata.filter(function(x){return x.deleted==false;})};var submitdata={refunddata:refundvalues,bookingid:booking.bookingid,totalcharge:booking.totalcharge,parkingnotreq:booking.parkingnotreq==true?\"1\":\"0\",hotelbookingref:booking.bookingrefencenum,ishotelprovideboat:booking.ishotelprovideboat==true?\"1\":\"0\",isnoshowrefund:isRefundNoShow,fromdate:moment(booking.fromdate).format(\"YYYY-MM-DD\"),todate:moment(booking.todate).format(\"YYYY-MM-DD\"),slotid:selectedtimeslot,boatid:boatinfo,hotelid:preferredhotels.filter(function(x){return x.value==selectedpreferredhotels.value;}),numberofdays:_diffDays,pax:booking.touristdata.filter(function(x){return x.deleted==false;}).length,touristinfo:booking.touristdata.filter(function(x){return x.deleted==false;}),numberofvehicle:booking.vehicle.filter(function(x){return x.qty>0;}).length};dataservice(\"booking\",{requestfor:'checkavailability',data:{\"fromdate\":moment(new Date(booking.fromdate)).format(\"YYYY-MM-DD\"),\"touristcount\":booking.touristdata.length}}).then(function(checkdata){if(checkdata.resultkey==1){if(checkdata.resultvalue[0].isSlotAvialble>0){dataservice(\"booking\",{requestfor:'refundpayment',data:submitdata}).then(function(data){if(data.resultkey==1){var result=data.resultvalue;notify(1,\"Application for refund is submited successsfully.  We will connect you soon.\");window.location.reload();// you have PHP 370 for refund ,please wait for a call from one of our representative. \n// var responseurl= JSON.parse(data.resultvalue.url).results.data.url;\n// if(responseurl!=\"\" && responseurl!==undefined){\n//   window.location.href=responseurl;\n// }else{\n//   notify(2,\"No response from payment gateway try again!\");\n//   setIsProcessing(false);\n// }\n}else{notify(2,\"error!\");setIsProcessing(false);}}).catch(function(error){notify(2,\"error!\"+error);setIsProcessing(false);});}else{notify(2,\"no slot available for this date!\");setIsProcessing(false);}}else{notify(2,\"error !\"+JSON.stringify(checkdata.resultvalue));setIsProcessing(false);}}).catch(function(error){notify(2,\"error !\"+error);setIsProcessing(false);// console.log(error);\n});}}};var _useState97=useState(0),_useState98=_slicedToArray(_useState97,2),isRefundNoShow=_useState98[0],setIsRefundNoShow=_useState98[1];var refundpaymentinfo=function refundpaymentinfo(data){if(booking.touristdata.length>0){setIsRefundNoShow(data);setIsConfirmBooking(!isconfirmbooking);}else{notify(2,\"No booking data to update,Please search again!\");return;}};var refundpayment=function refundpayment(){var diffTime=Math.abs(booking.todate-booking.fromdate);// const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))+1;\nvar diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays==0||diffDays==1){diffDays=1;}var boatinfo=[];for(var index=0;index<selectedboatdata.length;index++){var element=selectedboatdata[index];var _filterboat=boatdata.filter(function(x){return x;});}};var getTimeSlot=function getTimeSlot(data){if(selectedtimeslot==\"\"){return\"\";}else{return timeslot.filter(function(x){return x.value==selectedtimeslot;})[0].label;}};var getBoats=function getBoats(){var boatlables=\"\";var _loop7=function _loop7(index){var element=selectedboatdata[index];filterboat=boatdata.filter(function(x){return x.value==element;});if(filterboat.length>0){boatlables+=filterboat[0].label+\",\";}};for(var index=0;index<selectedboatdata.length;index++){var filterboat;_loop7(index);}if(boatlables!=\"\"){boatlables=boatlables.substring(0,boatlables.length-1);}return boatlables;};var getHideShowUpdate=function getHideShowUpdate(){var result=\"none\";var fromdate=new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"));var curdate=new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"));if(curdate<fromdate){if(totaldue>0){result=\"\";}}return result;};var getHideShowNoShow=function getHideShowNoShow(){var result=\"none\";var fromdate=new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"));var curdate=new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"));if(curdate>fromdate){result=\"\";}return result;};var cleardata=function cleardata(){window.location.reload();};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"c-app c-default-layout flex-row align-items-center bg\",style:{background:\"url(\".concat(Background,\")\"),backgroundRepeat:'no-repeat',backgroundPosition:'top center',backgroundSize:'cover'},children:/*#__PURE__*/_jsxs(CContainer,{children:[/*#__PURE__*/_jsx(Card,{style:{minHeight:\"300px\"},children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(CCol,{md:\"12\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CForm,{children:/*#__PURE__*/_jsxs(CRow,{children:[/*#__PURE__*/_jsx(CCol,{xs:\"3\",className:\"text-right\",children:/*#__PURE__*/_jsxs(CInputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(CInputGroupPrepend,{children:/*#__PURE__*/_jsxs(CInputGroupText,{children:[\"Refrence #\",/*#__PURE__*/_jsx(\"sup\",{style:{color:\"red\"},children:\"*\"})]})}),/*#__PURE__*/_jsx(CInput,(_jsx2={type:\"text\",onChange:handleChange},_defineProperty(_jsx2,\"type\",\"text\"),_defineProperty(_jsx2,\"value\",state.refenecenum),_defineProperty(_jsx2,\"id\",\"refenecenum\"),_defineProperty(_jsx2,\"placeholder\",\"Enter Refrence Number\"),_jsx2))]})}),/*#__PURE__*/_jsx(CCol,{xs:\"4\",children:/*#__PURE__*/_jsxs(CInputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(CInputGroupPrepend,{children:/*#__PURE__*/_jsxs(CInputGroupText,{children:[\"Primary Email\",/*#__PURE__*/_jsx(\"sup\",{style:{color:\"red\"},children:\"*\"})]})}),/*#__PURE__*/_jsx(CInput,(_jsx3={type:\"text\",onChange:handleChange},_defineProperty(_jsx3,\"type\",\"email\"),_defineProperty(_jsx3,\"value\",state.emailid),_defineProperty(_jsx3,\"id\",\"emailid\"),_defineProperty(_jsx3,\"placeholder\",\"Enter Email ID\"),_jsx3))]})}),/*#__PURE__*/_jsx(CCol,{xs:\"5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(CButton,{color:\"primary\",onClick:function onClick(){searchbooking();},children:\"Search \"}),\" \\xA0\\xA0\",/*#__PURE__*/_jsx(CButton,{color:\"primary\",hidden:booking.touristdata.length>0?false:true,disabled:new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"))>new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\")),onClick:function onClick(){refundpaymentinfo();},children:\"Update\"}),\"\\xA0\\xA0\",/*#__PURE__*/_jsx(CButton,{color:\"primary\",hidden:booking.touristdata.length>0?false:true,onClick:function onClick(){cleardata();},children:\"Cancel\"})]})})})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:isbookingfetch==false?\"none\":\"\"},children:/*#__PURE__*/_jsxs(\"div\",{id:\"accordion\",children:[/*#__PURE__*/_jsxs(CCard,{className:\"mb-0\",children:[/*#__PURE__*/_jsxs(CCardHeader,{id:\"headingOne\",children:[function(){var rows=[];// if(bookingcalvalues.currentBookingvalues.Boat!==undefined){\nif(bookingcalvalues.currentBookingvalues!==undefined){;console.log(bookingcalvalues.currentBookingvalues);rows.push(/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-3\",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total : PHP \",bookingcalvalues.currentBookingvalues.Total]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-5\",children:/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(CIcon,{name:bookingcalvalues.currentBookingvalues.TotalAmountDue>0?\"cil-arrow-top\":\"\",className:\"mfe-2\",style:booking.totaldue>0?{color:\"green\"}:{}}),\"Total Amount Due : PHP \",bookingcalvalues.currentBookingvalues.TotalAmountDue,\" \"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4\",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total Refund : PHP \",bookingcalvalues.currentBookingvalues.TotalRefund,\" \"]})})]})}));return rows;}// }\n}(),/*#__PURE__*/_jsx(CButton,{block:true,color:\"link\",className:\"text-left m-0 p-0\",onClick:function onClick(){return setAccordion(accordion===0?null:0);},children:/*#__PURE__*/_jsx(\"h5\",{className:\"m-0 p-0\",children:\"Booking Info\"})})]}),/*#__PURE__*/_jsx(CCollapse,{show:accordion===0,children:/*#__PURE__*/_jsxs(CCardBody,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"From Date \"}),/*#__PURE__*/_jsx(DatePicker,{dateFormat:\"dd-MMM-yyyy\",minDate:new Date(),className:\"form-control\",selected:new Date(booking.fromdate),onChange:function onChange(date){// if(date>booking.todate){\n// setBooking({...booking, [\"fromDate\"]:date,[\"todate\"]:date });\nsetBooking(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{fromdate:date,todate:date});});console.log(booking);// }else{\n//   setBooking({...booking, [\"fromDate\"]:date });\n// }\n}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"TO Date \"}),/*#__PURE__*/_jsx(DatePicker,{dateFormat:\"dd-MMM-yyyy\",minDate:new Date(booking.fromdate),className:\"form-control\",selected:new Date(booking.todate),onChange:function onChange(date){//  setToDate(date);\nsetBooking(_objectSpread(_objectSpread({},booking),{},_defineProperty({},\"todate\",date)));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Number Of Guests \"}),/*#__PURE__*/_jsx(Select,{isDisabled:true,className:\"dropdown\",placeholder:\"Select\",value:numberofguests.find(function(obj){return obj.value===selectednumberguest;})// set selected values\n,options:numberofguests// set list of the data\n,onChange:handleChangeOptionNOG// assign onChange function\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Time of Arrival in Mauban\"}),/*#__PURE__*/_jsx(Select,{className:\"dropdown\",placeholder:\"Select\",value:timeslot.find(function(obj){return obj.value===selectedtimeslot;})// set selected values\n,options:timeslot// set list of the data\n,onChange:handleChangeOptionTS// assign onChange function\n})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Boat Capacity \"}),/*#__PURE__*/_jsx(Select,{isMulti:true,isDisabled:booking.ishotelprovideboat,className:\"dropdown\",placeholder:\"Select Boat Capacity\",value:boatdata.filter(function(obj){return selectedboatdata.includes(obj.value);})// set selected values\n,options:boatdata// set list of the data\n,onChange:handleChangeOptionBC// assign onChange function\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select Package*\"}),/*#__PURE__*/_jsx(Select,{className:\"dropdown\",placeholder:\"Select\",isDisabled:true,value:packageddl.find(function(obj){return obj.value===selectedPackage;})// set selected values\n,options:packageddl// set list of the data\n})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Is Boat Provided by Resort?\"}),/*#__PURE__*/_jsx(CInput,{style:{width:\"20%\",fontSize:\"0rem\"},type:\"checkbox\",value:booking.ishotelprovideboat,onChange:handleChangeHPB,id:\"ismaubancitizen\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-3\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Accommodation\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:/*#__PURE__*/_jsx(\"sup\",{children:\"*\"})})]}),/*#__PURE__*/_jsx(Select,{className:\"dropdown\",placeholder:\"Select Resort\",value:selectedpreferredhotels// set selected values\n,options:preferredhotels// set list of the data\n,onChange:handleChangeOptionPH// assign onChange function\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-3\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"guests\",children:[\" Booking Reference#\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:/*#__PURE__*/_jsx(\"sup\",{children:\"*\"})})]}),/*#__PURE__*/_jsx(CInput,{onChange:handleEBChange,value:booking.bookingrefencenum,type:\"text\",id:\"bookingrefencenum\",placeholder:\" Booking Reference Number\"})]})]})]})})]}),/*#__PURE__*/_jsxs(CCard,{className:\"mb-0\",children:[/*#__PURE__*/_jsx(CCardHeader,{id:\"headingTwo\",children:/*#__PURE__*/_jsx(CButton,{block:true,color:\"link\",className:\"text-left m-0 p-0\",onClick:function onClick(){return setAccordion(accordion===1?null:1);},children:/*#__PURE__*/_jsx(\"h5\",{className:\"m-0 p-0\",children:\"Vehicle\"})})}),/*#__PURE__*/_jsx(CCollapse,{show:accordion===1,children:/*#__PURE__*/_jsxs(CCardBody,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-6 col-md-12 mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"guests\",children:[\"Parking not Required\",booking.parkingnotreq]}),/*#__PURE__*/_jsx(CInput,{style:{width:\"20%\",fontSize:\"0rem\"},onChange:handleEBChange,type:\"checkbox\",checked:booking.parkingnotreq,value:booking.parkingnotreq,id:\"parkingnotreq\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"vehicle\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qty\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Charge\"})]}),/*#__PURE__*/_jsx(\"tbody\",{children:function(){var rows=[];if(booking.vehicle!==undefined){if(booking.vehicle.length>0){for(var i=0;i<booking.vehicle.length;i++){var _jsx4;var _veh=booking.vehicle[i];//_veh.checked = false;\nrows.push(/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:_veh.typeofvehicle}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(InputDecimal,(_jsx4={type:\"text\",readOnly:booking.parkingnotreq,id:\"vehicleqty\",value:_veh.qty},_defineProperty(_jsx4,\"id\",_veh.id),_defineProperty(_jsx4,\"onChange\",handleChangevehicleqty(i)),_defineProperty(_jsx4,\"placeholder\",\"Qty\"),_jsx4))}),/*#__PURE__*/_jsx(\"td\",{children:_veh.qty*parseFloat(_veh.amount)})]}),\" \"]}));}return rows;}}}()})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\"})]})})]}),/*#__PURE__*/_jsxs(CCard,{className:\"mb-0\",children:[/*#__PURE__*/_jsx(CCardHeader,{id:\"headingThree\",children:/*#__PURE__*/_jsx(CButton,{block:true,color:\"link\",className:\"text-left m-0 p-0\",onClick:function onClick(){return setAccordion(accordion===2?null:2);},children:/*#__PURE__*/_jsx(\"h5\",{className:\"m-0 p-0\",children:\"Guest Info\"})})}),/*#__PURE__*/_jsx(CCollapse,{show:accordion===2,children:/*#__PURE__*/_jsxs(CCardBody,{children:[/*#__PURE__*/_jsx(CButton,{color:\"primary\",disabled:new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"))>new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\")),onClick:function onClick(e){return editdata(-1,{});},children:\"Add\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Firstname\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Lastname\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Gender\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DOB\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Maubanin\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:\"Action\"})]}),/*#__PURE__*/_jsx(\"tbody\",{children:function(){var rows=[];if(booking.touristdata!=undefined&&booking.touristdata.length>0){var _loop8=function _loop8(i){_tourist=booking.touristdata[i];if(_tourist.deleted==false){gender=Gender.filter(function(x){return x.value==_tourist.gender;})[0].label;dob=new Date(_tourist.dob);displaydob=dob.getDate()+\" \"+getMonth(dob.getMonth()+1)+\" \"+dob.getFullYear();ismaubancitizen=_tourist.ismaubancitizen==true?\"Yes\":\"No\";isprimaryguest=_tourist.isprimary;//_veh.checked = false;\nrows.push(/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:_tourist.firstname}),/*#__PURE__*/_jsx(\"td\",{children:_tourist.lastname}),/*#__PURE__*/_jsx(\"td\",{children:gender}),/*#__PURE__*/_jsx(\"td\",{children:displaydob}),/*#__PURE__*/_jsx(\"td\",{children:ismaubancitizen}),/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"end\"},children:[/*#__PURE__*/_jsx(CButton,{color:\"primary\",disabled:new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"))>new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\")),onClick:function onClick(e){return editdata(i,booking.touristdata[i]);},children:\"Edit\"}),\" \\xA0\\xA0\",/*#__PURE__*/_jsx(CButton,{color:\"primary\",hidden:isprimaryguest,onClick:function onClick(){opendeletetouristpopup(i,booking.touristdata[i]);},children:\"Delete\"})]})]}),\" \"]}));}};for(var i=0;i<booking.touristdata.length;i++){var _tourist;var gender;var dob;var displaydob;var ismaubancitizen;var isprimaryguest;_loop8(i);}return rows;}}()})]})]})})]}),/*#__PURE__*/_jsxs(CCard,{className:\"mb-0\",children:[/*#__PURE__*/_jsx(CCardHeader,{id:\"headingFour\",children:/*#__PURE__*/_jsx(CButton,{block:true,color:\"link\",className:\"text-left m-0 p-0\",onClick:function onClick(){return setAccordion(accordion===3?null:3);},children:/*#__PURE__*/_jsx(\"h5\",{className:\"m-0 p-0\",children:\"Payment Detail \"})})}),/*#__PURE__*/_jsx(CCollapse,{show:accordion===3,children:/*#__PURE__*/_jsx(CCardBody,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:function(){var rows=[];if(booking.touristdata!==undefined){if(booking.touristdata.length>0){//pricing fees\nvar environmentdata=feesdata.data.filter(function(x){return x.id==1;});var braceletdata=feesdata.data.filter(function(x){return x.id==4;});var islandhoppingdata=feesdata.data.filter(function(x){return x.id==9;});//#region previous Charges \nvar prediffTime=Math.abs(prevBooking.todate-prevBooking.fromdate);var prediffDays=Math.ceil(prediffTime/(1000*60*60*24));if(prediffDays==0||prediffDays==1){prediffDays=1;}//guest filter \nvar _prevaildguest=prevBooking.touristdata.filter(function(x){return x.deleted==false;});var _premaubaninguest=_prevaildguest.filter(function(x){return x.ismaubancitizen==true;});var _prenonmaubaninguest=_prevaildguest.filter(function(x){return x.ismaubancitizen==false;});var _preislandhoppingguest=_prevaildguest.filter(function(x){return x.islandhopping==true;}).length;//bracelet filter\nvar _prerentbraceletcount=_prenonmaubaninguest.filter(function(x){return x.isrentbracelet==true;}).length;var _preownbraceletcount=_prenonmaubaninguest.filter(function(x){return x.isrentbracelet==false;}).length;var preBraceletmt=(_prerentbraceletcount>0?parseFloat(_prerentbraceletcount)*parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0):0)+(_preownbraceletcount>0?_preownbraceletcount*(braceletdata.length>0?braceletdata[0].price:0):0);//environment charges\nvar preETAFamt=_prenonmaubaninguest.length>0?parseFloat(_prenonmaubaninguest.length)*parseFloat(environmentdata.length>0?parseFloat(environmentdata[0].price):0):0;//island hopping charges\nvar preIslandHoppingAmt=_preislandhoppingguest>0?parseFloat(_preislandhoppingguest)*(islandhoppingdata.length>0?islandhoppingdata[0].price:0):0;//boat charges\nvar preBoatamt=0;if(!prevBooking.ishotelprovideboat){var _loop9=function _loop9(bt){var eleboat=prevBooking.boatid[bt];var filterboat=boatdata.filter(function(x){return x.value==eleboat.uuid;});if(filterboat.length>0){preBoatamt+=parseFloat(filterboat[0].price);}};for(var bt=0;bt<prevBooking.boatid.length;bt++){_loop9(bt);}}//parking charges\nvar preparking=0;if(!prevBooking.parkingnotreq){for(var vh=0;vh<prevBooking.vehicle.length;vh++){preparking+=parseFloat(prevBooking.vehicle[vh].qty)*parseFloat(prevBooking.vehicle[vh].amount)*prediffDays;}}//exemptiona charges for Maubanin\nvar preexemptionamt=0;//senior citizen discount for Maubanin\nvar prediscountamt=0;var preTotalAmt=preETAFamt+preBraceletmt+preBoatamt+preparking+preIslandHoppingAmt-(preexemptionamt+prediscountamt);//#endregion previous Charges\n//#region Current Charges\n// number of day guest stay\nvar diffTime=Math.abs(booking.todate-booking.fromdate);var diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays==0||diffDays==1){diffDays=1;}//guest filter \nvar _vaildguest=booking.touristdata.filter(function(x){return x.deleted==false;});var _maubaninguest=_vaildguest.filter(function(x){return x.ismaubancitizen==true;});var _nonmaubaninguest=_vaildguest.filter(function(x){return x.ismaubancitizen==false;});var _islandhoppingguest=_vaildguest.filter(function(x){return x.islandhopping==true;}).length;;//bracelet filter\nvar _rentbraceletcount=_nonmaubaninguest.filter(function(x){return x.isrentbracelet==true;}).length;var _ownbraceletcount=_nonmaubaninguest.filter(function(x){return x.isrentbracelet==false;}).length;var Braceletmt=(_rentbraceletcount>0?parseFloat(_rentbraceletcount)*parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0):0)+(_ownbraceletcount>0?_ownbraceletcount*(braceletdata.length>0?braceletdata[0].price:0):0);//environment charges\nvar ETAFamt=_nonmaubaninguest.length>0?parseFloat(_nonmaubaninguest.length)*parseFloat(environmentdata.length>0?parseFloat(environmentdata[0].price):0):0;//island hopping charges\nvar IslandHoppingAmt=_islandhoppingguest>0?parseFloat(_islandhoppingguest)*(islandhoppingdata.length>0?islandhoppingdata[0].price:0):0;//boat charges\nvar Boatamt=0;if(!booking.ishotelprovideboat){if(selectedboatdata.length>0){var _loop10=function _loop10(_bt3){var eleboat=selectedboatdata[_bt3];var filterboat=boatdata.filter(function(x){return x.value==eleboat;});if(filterboat.length>0){Boatamt+=parseFloat(filterboat[0].price);}};for(var _bt3=0;_bt3<selectedboatdata.length;_bt3++){_loop10(_bt3);}}}//parking charges\nvar parking=0;if(!booking.parkingnotreq){for(var _vh2=0;_vh2<booking.vehicle.length;_vh2++){parking+=parseFloat(booking.vehicle[_vh2].qty)*parseFloat(booking.vehicle[_vh2].amount)*diffDays;}}//exemptiona charges for Maubanin\nvar exemptionamt=0;//senior citizen discount for Maubanin\nvar discountamt=0;var TotalAmt=ETAFamt+Braceletmt+Boatamt+parking+IslandHoppingAmt-(exemptionamt+discountamt);// setBooking(prevState => ({\n//   ...prevState,\n//   totalcharge: TotalAmt,\n//   totaldue:((TotalAmt-preTotalAmt)>0?((TotalAmt-preTotalAmt)):0),\n//   totalrefund:((TotalAmt-preTotalAmt)<=0?((TotalAmt-preTotalAmt) * (-1)):0)\n// }));\n//#endregion Current Charges\nrows.push(/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Charges For \"}),/*#__PURE__*/_jsx(\"td\",{children:\"Current Charges \"}),/*#__PURE__*/_jsx(\"td\",{className:\"prevchrgs\",children:\"Previous Charges \"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"ETAF \"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"PHP \",ETAFamt.toFixed(2),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[\"PHP \",preETAFamt.toFixed(2),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Bracelet \"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"PHP \",Braceletmt.toFixed(2),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[\"PHP \",preBraceletmt.toFixed(2),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Boat \"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"PHP \",Boatamt.toFixed(2),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[\"PHP \",preBoatamt.toFixed(2),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Package \"}),/*#__PURE__*/_jsx(\"td\",{children:\"PHP 0.00 \"}),/*#__PURE__*/_jsx(\"td\",{className:\"prevchrgs\",children:\"PHP 0.00 \"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Island Hopping \"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"PHP \",IslandHoppingAmt.toFixed(2),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[\"PHP \",preIslandHoppingAmt.toFixed(2),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Parking \"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"PHP \",parking.toFixed(2),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[\"PHP \",preparking.toFixed(2),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Discount \"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"PHP \",discountamt.toFixed(2),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[\"PHP \",prediscountamt.toFixed(2),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Exemption \"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"PHP \",exemptionamt.toFixed(2),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[\"PHP \",preexemptionamt.toFixed(2),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total\"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"b\",{children:[\"PHP \",TotalAmt.toFixed(2)]}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[/*#__PURE__*/_jsxs(\"b\",{children:[\"PHP \",preTotalAmt.toFixed(2)]}),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total Amount Due\"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"b\",{children:[\"PHP \",(TotalAmt-preTotalAmt>0?TotalAmt-preTotalAmt:0).toFixed(2)]}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[/*#__PURE__*/_jsxs(\"b\",{children:[\"PHP \",prevBooking.totaldue.toFixed(2)]}),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total Refund\"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"b\",{children:[\"PHP \",(TotalAmt-preTotalAmt<=0?(TotalAmt-preTotalAmt)*-1:0).toFixed(2)]}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"prevchrgs\",children:[/*#__PURE__*/_jsxs(\"b\",{children:[\"PHP \",prevBooking.totalrefund.toFixed(2)]}),\" \"]})]})]})]})}));return rows;}}}()})})})})]})]})})]})})})})}),/*#__PURE__*/_jsxs(CModal,{show:edittouristpopup,closeOnBackdrop:true,backdrop:true,onClose:function onClose(){return setEditTouristpopup(!edittouristpopup);},size:\"lgx\",children:[/*#__PURE__*/_jsx(CModalHeader,{children:/*#__PURE__*/_jsx(CModalTitle,{children:\"Edit Booking\"})}),/*#__PURE__*/_jsxs(CModalBody,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",style:{fontWeight:\"bold\"},children:\"Returning Guest?\"}),/*#__PURE__*/_jsx(CInput,{style:{width:\"20%\",fontSize:\"0rem\"},onChange:handleEBTChange,type:\"checkbox\",checked:edittourist.isreturningguest,value:edittourist.isreturningguest,id:\"isreturningguest\"})]})}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\",display:edittourist.isreturningguest==true?\"\":\"none\"},children:\"Note : Please Fill-in your Firstname, Lastname, gender and birthday to Validate! \"}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfixmargin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"guests\",style:{fontWeight:\"bold\"},children:[\"First name\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:\"*\"})]}),/*#__PURE__*/_jsx(CInput,{onChange:handleEBTChange,value:edittourist.firstname,type:\"text\",id:\"firstname\",placeholder:\"First Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"guests\",style:{fontWeight:\"bold\"},children:[\"Last name\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:\"*\"})]}),/*#__PURE__*/_jsx(CInput,{onChange:handleEBTChange,type:\"text\",value:edittourist.lastname,id:\"lastname\",placeholder:\"Last name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"guests\",style:{fontWeight:\"bold\"},children:[\"Date Of Birth\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:\"*\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(DatePicker,{dateFormat:\"dd-MMM-yyyy\",className:\"form-control\",selected:selectedtouristdob,onChange:function onChange(date){setSelectedTouristDOB(date);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfixmargin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"guests\",style:{fontWeight:\"bold\"},children:[\"Gender\",/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:\"*\"})]}),/*#__PURE__*/_jsx(Select,{className:\"dropdown\",placeholder:\"Select\",value:Gender.find(function(obj){return obj.value===selectedtouristgender;})// set selected values\n,options:Gender// set list of the data\n,onChange:handleChangeEBTGender// assign onChange function\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",style:{display:edittourist.isreturningguest==true?\"\":\"none\"},children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",children:\"Vaildate Return Guest\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CButton,{color:\"primary\",onClick:function onClick(){return vaildateguest();},children:\"Go\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfixmargin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsxs(\"label\",{for:\"guests\",style:{fontWeight:\"bold\"},children:[\"Citizenship \",edittourist.isreturningguestvaildate]}),/*#__PURE__*/_jsx(Select,{className:\"dropdown\",isDisabled:edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false,placeholder:\"Select Citizenship\",value:citizenship.find(function(obj){return obj.value===selectedTouristCS;})// set selected values\n,options:citizenship// set list of the data\n,onChange:handleChangeEBTCS// assign onChange function\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",style:{fontWeight:\"bold\"},children:\"Country Of orgin\"}),/*#__PURE__*/_jsx(Select,{id:\"CountryofOrigin\",className:\"dropdown\",isDisabled:edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false,placeholder:\"Select\",value:country.find(function(obj){return obj.value===selectedEBTCOO;})// set selected values\n,options:country// set list of the data\n,onChange:handleChangeEBTCOO// assign onChange function\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",style:{fontWeight:\"bold\"},children:\"Province\"}),/*#__PURE__*/_jsx(Select,{className:\"dropdown\",placeholder:\"Select\",isDisabled:edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false,value:Province.find(function(obj){return obj.value===selectedEBTProvince;})// set selected values\n,options:Province// set list of the data\n,onChange:handleChangeEBTProvince// assign onChange function\n})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfixmargin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",children:\"Municipality\"}),/*#__PURE__*/_jsx(Select,{className:\"dropdown\",placeholder:\"Select\",isDisabled:edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false,value:Municipality.find(function(obj){return obj.value===selectedMunicipality;})// set selected values\n,options:Municipality// set list of the data\n,onChange:handleChangeEBTMunicipality// assign onChange function\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",children:\"Address\"}),/*#__PURE__*/_jsx(CInput,{onChange:handleEBTChange,disabled:edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false,value:edittourist.address1,type:\"text\",id:\"address1\",placeholder:\"Address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",children:\"Mobile Number\"}),/*#__PURE__*/_jsx(CInput,{onChange:handleEBTChange,disabled:edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false,value:edittourist.mobilenumber,type:\"text\",id:\"mobilenumber\",placeholder:\"Mobile \"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfixmargin\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",children:\"E-mail Address\"}),/*#__PURE__*/_jsx(CInput,{onChange:handleEBTChange,disabled:edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false,value:edittourist.emailid,type:\"text\",id:\"emailid\",placeholder:\"Email\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfixmargin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",style:{fontWeight:\"bold\"},children:\"Rent Bracelet\"}),/*#__PURE__*/_jsx(CInput,{style:{width:\"20%\",fontSize:\"0rem\"},onChange:handleEBTChange,type:\"checkbox\",disabled:edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false,checked:edittourist.isrentbracelet,value:edittourist.isrentbracelet,id:\"isrentbracelet\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",style:{fontWeight:\"bold\",display:edittourist.isreturningguestvaildate==true?\"\":\"none\"},children:[/*#__PURE__*/_jsx(\"label\",{for:\"guests\",style:{fontSize:\"14px\"},children:\"Do you have Bracelet\"}),/*#__PURE__*/_jsx(CInput,{style:{width:\"20%\",fontSize:\"0rem\"},onChange:handleEBTChange,type:\"checkbox\",disabled:edittourist.isreturningguest==true?edittourist.isreturningguestvaildate:false,checked:edittourist.braceletavailable,value:edittourist.braceletavailable,id:\"braceletavailable\"})]})]})]}),/*#__PURE__*/_jsxs(CModalFooter,{children:[/*#__PURE__*/_jsx(CButton,{color:\"primary\",onClick:function onClick(){return updatetourist();},children:\"Save\"}),' ',/*#__PURE__*/_jsx(CButton,{color:\"secondary\",onClick:function onClick(){return setEditTouristpopup(!edittouristpopup);},children:\"Cancel\"})]})]}),/*#__PURE__*/_jsxs(CModal,{show:deletetouristpopup,closeOnBackdrop:true,backdrop:true,onClose:function onClose(){return setDeletetouristpopup(!deletetouristpopup);},size:\"sm\",children:[/*#__PURE__*/_jsx(CModalHeader,{children:\"Deleteing Toursist \"}),/*#__PURE__*/_jsxs(CModalBody,{children:[\"Are you sure want to delete \\\" \",edittourist.firstname,\" \",edittourist.lastname,\" \\\" tourist?\"]}),/*#__PURE__*/_jsxs(CModalFooter,{children:[/*#__PURE__*/_jsx(CButton,{color:\"primary\",onClick:function onClick(){return deletetourist();},children:\"Delete\"}),' ',/*#__PURE__*/_jsx(CButton,{color:\"secondary\",onClick:function onClick(){return setDeletetouristpopup(!deletetouristpopup);},children:\"Cancel\"})]})]}),/*#__PURE__*/_jsxs(CModal,{show:isconfirmbooking,onClose:function onClose(){return setIsConfirmBooking(!isconfirmbooking);},size:\"lg\",children:[/*#__PURE__*/_jsx(CModalHeader,{closeButton:true,children:/*#__PURE__*/_jsxs(CModalTitle,{children:[\"Booking    \",/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\" Detail\"}),\" \"]})}),/*#__PURE__*/_jsx(CModalBody,{children:/*#__PURE__*/_jsx(CCol,{md:\"12\",children:/*#__PURE__*/_jsxs(CForm,{children:[/*#__PURE__*/_jsxs(CRow,{children:[/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"From Date\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsx(\"b\",{children:moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\")})})]}),/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"To Date\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsx(\"b\",{children:moment(new Date(booking.todate)).format(\"DD MMM YYYY\")})})]}),/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"Time\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsx(\"b\",{children:booking.touristdata.length>0?getTimeSlot():0})})]}),/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"Boat Capacity\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsx(\"b\",{children:booking.touristdata.length>0?getBoats():0})})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(CRow,{children:[/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"Package\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsx(\"b\",{children:booking.touristdata.length>0?booking.package[0].label:0})})]}),/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"Boat Provided by Resort\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsx(\"b\",{children:booking.ishotelprovideboat==true?\"Yes\":\"No\"})})]}),/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"Accommodation\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsx(\"b\",{children:booking.hotelid.length>0?booking.hotelid[0].label:0})})]}),/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"Number Of Guest\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsx(\"b\",{children:selectednumberguest})})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(CRow,{children:[/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"Previous Charge\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"PHP \",parseFloat(booking.totalcharge).toFixed(2)]})})]}),/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:\"New Charge\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"PHP \",parseFloat(totaldue>0?booking.totalcharge+totaldue:0).toFixed(2)]})})]}),/*#__PURE__*/_jsxs(CCol,{xs:\"3\",children:[/*#__PURE__*/_jsx(CLabel,{children:isRefundNoShow==1?\"No Show Refund\":totaldue>0?\"Total Amount Due\":totalrefund>0?\"Total Refund\":\"Total Amount Due\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CLabel,{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"PHP \",isRefundNoShow==1?parseFloat(booking.totalcharge):parseFloat(totaldue>0?totaldue:totalrefund>0?totalrefund:0).toFixed(2)]})})]})]})]})})}),/*#__PURE__*/_jsxs(CModalFooter,{children:[/*#__PURE__*/_jsx(CImg,{src:processing,height:\"50\",width:\"50\",style:{display:isprocessing==true?\"\":\"none\"},alt:\"qrcode\"}),/*#__PURE__*/_jsx(CButton,{color:\"primary \",style:{float:\"right\",display:isprocessing==true?\"none\":\"\"},onClick:function onClick(){return Savedata();},children:totaldue>0?\"Proceed to Pay\":\"Apply For Refund\"}),/*#__PURE__*/_jsx(CButton,{color:\"primary \",style:{float:\"right\"},onClick:function onClick(){return setIsConfirmBooking(!isconfirmbooking);},children:\"Make Changes\"})]})]})]})})});};export default EditBooking;","map":{"version":3,"sources":["D:/I2T/Smarttech/tourbookingwebgit/src/views/pages/register/EditBooking.js"],"names":["React","useState","useEffect","useHistory","useLocation","CCard","CCardBody","CCardHeader","CCol","CRow","CButton","CModal","CModalTitle","CModalHeader","CModalBody","CForm","CInputGroupPrepend","CInputGroupText","CInputGroup","CInput","CFormGroup","CInputCheckbox","CLabel","CModalFooter","CBadge","CContainer","CCollapse","CSelect","CCardFooter","CImg","DataTable","DataTableExtensions","Select","CIcon","dataservice","toast","InputDecimal","DatePicker","discounticon","moment","uuid","FeesComputation","TravelInfo","GuestInfo","Jumbotron","Toast","Container","Button","Card","userContext","notify","type","message","systemerror","success","position","POSITION","TOP_CENTER","dtlmsg","undefined","error","info","autoClose","processing","process","env","PUBLIC_URL","EditBooking","history","Background","contextdata","setcontextdata","refenecenum","emailid","state","setState","Date","fromDate","setFromDate","toDate","setToDate","accordion","setAccordion","ispricerise","setIsPriceRise","totaldue","setTotalDue","totalrefund","setTotalRefund","getMonth","month","returnmonth","numberofguests","setNumberOfGuestData","selectednumberguest","setSelectedNumberGuest","isboatselectionopen","setIsBoatSeletionOpen","isbookingfetch","setIsBookingFetch","getnumberofguest","countdata","index","parseInt","push","value","label","toString","handleChangeOptionNOG","e","Gender","setGender","getGender","genderval","timeslot","setTimeSlot","selectedtimeslot","setSelectedTimeSlot","getslotdata","requestfor","data","flag","then","resultkey","tempdata","resultvalue","length","id","description","catch","edata","handleChangeOptionTS","boatdata","setBoatdata","selectedboatdata","setSelectedBoatData","getboatdata","result","element","obj1","capacity","price","twowayprice","handleChangeOptionBC","Array","isArray","map","x","fromdate","todate","pax","totalcharge","hotelid","boatid","slotid","ishotelprovideboat","vehicle","touristdata","booking","setBooking","prevBooking","setPrevBooking","searchbooking","setIsShowActionBtn","refrencenumber","_bookinginfo","isnoshowrefund","console","log","pck","JSON","parse","package","boat","hotel","boatids","isboat","filter","_toursitdata","tourist","td","eletd","isassigned","isbraceletavailable","isbraceletreturned","ismaubancitizen","isprimary","isrentbracelet","isreturningguest","islandhopping","isreturningguestvaildate","deleted","_vehicledata","vh","vehicledata","vehdata","vehfilter","qty","currentdate","parseFloat","refundamt","partialpayment","bookingrefencenum","hotelbookingref","parkingnotreq","bookingid","_prevehicledata","stringify","_pretoursitdata","setSelectedPackage","setSelectedPreferredHotels","handleEBChange","target","checked","prevState","handleChange","feesdata","setFeesData","getfees","getpreferredhotels","getPackage","getvehicles","getCitizenship","getCountry","getProvince","getMunicipalities","ReCal","environmentdata","braceletdata","islandhoppingdata","prediffTime","Math","abs","prediffDays","ceil","_prevaildguest","_premaubaninguest","_prenonmaubaninguest","_preislandhoppingguest","_prerentbraceletcount","_preownbraceletcount","preBraceletmt","rentprice","preETAFamt","preIslandHoppingAmt","preBoatamt","bt","eleboat","filterboat","preparking","amount","preexemptionamt","prediscountamt","preTotalAmt","diffTime","diffDays","_vaildguest","_maubaninguest","_nonmaubaninguest","_islandhoppingguest","_rentbraceletcount","_ownbraceletcount","Braceletmt","ETAFamt","IslandHoppingAmt","Boatamt","parking","exemptionamt","discountamt","TotalAmt","SetBookingCalValues","preBookingvalues","ETAF","Bracelet","Boat","Package","IslandHopping","Parking","Discount","Exemption","Total","TotalAmountDue","TotalRefund","currentBookingvalues","handleChangeHPB","getdropdownarr","item","preferredhotels","setPreferredHotels","selectedpreferredhotels","setHotelBookingRef","handleChangeOptionPH","Ph","obj","packagedata","setPackagedata","packageddl","setPackageddl","selectedPackage","pckddl","d","isactive","packdetail","setVehicledata","handleChangevehicleqty","newArr","isNaN","test","edittouristpopup","setEditTouristpopup","edittourist","setEditTourist","returnguestmsg","setReturnGuestMsg","selectedtouristdob","setSelectedTouristDOB","selectedtouristgender","setSelectedTouristGender","deletetouristpopup","setDeletetouristpopup","isconfirmbooking","setIsConfirmBooking","isShowActionBtn","handleEBTChange","Address","Mobilenumber","handleChangeEBTGender","gender","editdata","row","format","curdate","actualimagename","address1","citizenid","dob","firstname","isalreadyvaildatereturningguest","lastname","mobilenumber","municipalityid","nationalityid","provinceid","qrcode","rfid","touristid","uploadimage","setSelectedTouristCS","setSelectedEBTCOO","municipalitydata","RawMunicipality","_ddpmunicipalitydata","setMunicipality","setSelectedEBTProvince","setSelectedMunicipality","opendeletetouristpopup","deletetourist","newdata","updatedItem","citizenship","setCitizenship","selectedTouristCS","handleChangeEBTCS","country","setCountry","selectedEBTCOO","handleChangeEBTCOO","Province","setProvince","RawProvince","setRawProvince","selectedEBTProvince","provincedata","handleChangeEBTProvince","Municipality","setRawMunicipality","selectedMunicipality","handleChangeEBTMunicipality","isprocessing","setIsProcessing","isvaildatereturnprocessing","setIsVaildatereturnProcessing","bookingcalvalues","vaildateguest","lastvisited","updatetourist","_guestexist","Savedata","boatinfo","val","floor","random","submitdata","numberofdays","boatcapcity","paymentid","selectedvehicleinfo","touristinfo","chargesinfo","numberofvehicle","touristvehicles","slotdetail","packageinfo","totalpaydue","paymentreferencenumber","editrefnum","checkdata","isSlotAvialble","responseurl","url","results","window","location","href","setTimeout","reload","eletourist","_booking","_bookingobj","refundvalues","Refundamt","isRefundNoShow","Totalamt","NOG","Bookinginfo","Vehicle","Guestinfo","refunddata","setIsRefundNoShow","refundpaymentinfo","refundpayment","_filterboat","getTimeSlot","getBoats","boatlables","substring","getHideShowUpdate","getHideShowNoShow","cleardata","background","backgroundRepeat","backgroundPosition","backgroundSize","minHeight","color","display","rows","date","find","includes","width","fontSize","i","_veh","typeofvehicle","textAlign","_tourist","displaydob","getDate","getFullYear","isprimaryguest","toFixed","fontWeight","braceletavailable","float"],"mappings":"6mBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,kBAAxC,CACA,OACEC,KADF,CAEEC,SAFF,CAGEC,WAHF,CAIEC,IAJF,CAKEC,IALF,CAMEC,OANF,CAOEC,MAPF,CAQEC,WARF,CASEC,YATF,CAUEC,UAVF,CAWEC,KAXF,CAYEC,kBAZF,CAaEC,eAbF,CAcEC,WAdF,CAeEC,MAfF,CAgBEC,UAhBF,CAiBEC,cAjBF,CAkBEC,MAlBF,CAmBEC,YAnBF,CAoBEC,MApBF,CAqBEC,UArBF,CAsBEC,SAtBF,CAuBEC,OAvBF,CAwBEC,WAxBF,CAyBEC,IAzBF,KA0BO,eA1BP,CA4BA,MAAOC,CAAAA,SAAP,KAAsB,4BAAtB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,uCAAhC,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,YAAT,KAA6B,qCAA7B,CACA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CACA,OAASC,YAAT,KAA6B,+BAA7B,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,eAAP,KAA4B,6BAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,wBAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,uBAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,OAASC,WAAT,KAA4B,4BAA5B,CACA,MAAO,6BAAP,C,6IACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,IAAD,CAAOC,OAAP,CAAgBC,WAAhB,CAAgC,CAC3C,OAAQF,IAAR,EACE,IAAK,EAAL,CACEhB,KAAK,CAACmB,OAAN,CAAcF,OAAd,CAAuB,CACrBG,QAAQ,CAAEpB,KAAK,CAACqB,QAAN,CAAeC,UADJ,CAAvB,EAGA,MACF,IAAK,EAAL,CACE,GAAIC,CAAAA,MAAJ,CACA,GAAIL,WAAW,GAAKM,SAApB,CAA+B,CAC7BD,MAAM,cAAG,uEAAqC,aAArC,CAA+CN,OAA/C,GAAT,CACD,CAFD,IAEO,CACLM,MAAM,cAAG,qBAAMN,OAAN,EAAT,CACD,CAEDjB,KAAK,CAACyB,KAAN,cAAY,oCACV,KAAC,KAAD,EAAO,IAAI,CAAC,aAAZ,EADU,UAGTF,MAHS,GAAZ,CAKQ,CACNH,QAAQ,CAAEpB,KAAK,CAACqB,QAAN,CAAeC,UADnB,CALR,EAQA,MACA,IAAK,EAAL,CAEEtB,KAAK,CAAC0B,IAAN,CAAWT,OAAX,CAAoB,CAClBG,QAAQ,CAAEpB,KAAK,CAACqB,QAAN,CAAeC,UADP,CAElBK,SAAS,CAAE,IAFO,CAApB,EAIF,MAEF,QACE,MAhCJ,CAkCD,CAnCH,CAoCE,GAAIC,CAAAA,UAAU,CAACC,OAAO,CAACC,GAAR,CAAYC,UAAZ,CAAuB,iBAAtC,CACF,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,iBACxB,GAAMC,CAAAA,OAAO,CAACjE,UAAU,EAAxB,CACE,GAAIkE,CAAAA,UAAU,CAACL,OAAO,CAACC,GAAR,CAAYC,UAAZ,CAAuB,YAAtC,CACA,cAAsCjE,QAAQ,EAA9C,wCAAOqE,WAAP,eAAoBC,cAApB,eACA,eAA0BtE,QAAQ,CAAC,CAACuE,WAAW,CAAC,EAAb,CAAgBC,OAAO,CAAC,EAAxB,CAAD,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eACA,eAAgC1E,QAAQ,CAAC,GAAI2E,CAAAA,IAAJ,EAAD,CAAxC,yCAAOC,QAAP,eAAiBC,WAAjB,eACA,eAA4B7E,QAAQ,CAAC,GAAI2E,CAAAA,IAAJ,EAAD,CAApC,yCAAOG,MAAP,eAAeC,SAAf,eACA,eAAkC/E,QAAQ,CAAC,CAAD,CAA1C,0CAAOgF,SAAP,gBAAkBC,YAAlB,gBACA,gBAAsCjF,QAAQ,CAAC,EAAD,CAA9C,2CAAOkF,WAAP,gBAAoBC,cAApB,gBACA,gBAAgCnF,QAAQ,CAAC,CAAD,CAAxC,2CAAOoF,QAAP,gBAAiBC,WAAjB,gBACA,gBAAsCrF,QAAQ,CAAC,CAAD,CAA9C,2CAAOsF,WAAP,gBAAoBC,cAApB,gBAGA,GAAMC,CAAAA,QAAQ,CAAC,QAATA,CAAAA,QAAS,CAACC,KAAD,CAAS,CACpB,GAAIC,CAAAA,WAAW,CAAC,EAAhB,CACA,OAAQD,KAAR,EACI,IAAK,EAAL,CACIC,WAAW,CAAE,KAAb,CACA,MACJ,IAAK,EAAL,CACIA,WAAW,CAAE,KAAb,CACA,MACJ,IAAK,EAAL,CACIA,WAAW,CAAE,KAAb,CACA,MACJ,IAAK,EAAL,CACIA,WAAW,CAAE,KAAb,CACA,MACJ,IAAK,EAAL,CACIA,WAAW,CAAE,KAAb,CACA,MACJ,IAAK,EAAL,CACIA,WAAW,CAAE,KAAb,CACA,MACA,IAAK,EAAL,CACAA,WAAW,CAAE,KAAb,CACA,MACA,IAAK,EAAL,CACAA,WAAW,CAAE,KAAb,CACA,MACA,IAAK,EAAL,CACAA,WAAW,CAAE,KAAb,CACA,MACA,IAAK,GAAL,CACAA,WAAW,CAAE,KAAb,CACA,MACA,IAAK,GAAL,CACAA,WAAW,CAAE,KAAb,CACA,MACA,IAAK,GAAL,CACAA,WAAW,CAAE,KAAb,CACA,MAOJ,QACI,MA5CR,CA8CA,MAAOA,CAAAA,WAAP,CACH,CAjDD,CAmDJ;AACI,gBAA+C1F,QAAQ,CAAC,EAAD,CAAvD,2CAAO2F,cAAP,gBAAuBC,oBAAvB,gBACA,gBAAsD5F,QAAQ,CAAC,EAAD,CAA9D,2CAAO6F,mBAAP,gBAA4BC,sBAA5B,gBACA,gBAAqD9F,QAAQ,CAAC,IAAD,CAA7D,2CAAO+F,mBAAP,gBAA4BC,qBAA5B,gBACA,gBAA4ChG,QAAQ,CAAC,KAAD,CAApD,2CAAOiG,cAAP,gBAAuBC,iBAAvB,gBACA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC3B,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CACA,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,EAAIC,QAAQ,CAAC,EAAD,CAArC,CAA2CD,KAAK,EAAhD,CAAoD,CAClDD,SAAS,CAACG,IAAV,CAAe,CACbC,KAAK,CAAEH,KADM,CAEbI,KAAK,CAAEJ,KAAK,CAACK,QAAN,EAFM,CAAf,EAKD,CACDd,oBAAoB,CAACQ,SAAD,CAApB,CACD,CAVH,CAYA,GAAMO,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAAAC,CAAC,CAAI,CAC/Bd,sBAAsB,CAACc,CAAC,CAACJ,KAAH,CAAtB,CAED,CAHH,CAKC;AAEL;AACM,gBAA4BxG,QAAQ,CAAC,EAAD,CAApC,2CAAO6G,MAAP,gBAAeC,SAAf,gBACA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAIX,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAIY,CAAAA,SAAS,CAAG,CAAC,MAAD,CAAS,QAAT,CAAmB,OAAnB,CAAhB,CACA,IAAK,GAAIX,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAG,CAA5B,CAA+BA,KAAK,EAApC,CAAwC,CACtCD,SAAS,CAACG,IAAV,CAAe,CACbC,KAAK,CAAEH,KADM,CAEbI,KAAK,CAAEO,SAAS,CAACX,KAAD,CAFH,CAAf,EAKD,CACDS,SAAS,CAACV,SAAD,CAAT,CACD,CAXD,CAYC;AAEP;AACI,gBAAgCpG,QAAQ,CAAC,EAAD,CAAxC,2CAAOiH,QAAP,gBAAiBC,WAAjB,gBACA,gBAAgDlH,QAAQ,CAAC,EAAD,CAAxD,2CAAOmH,gBAAP,gBAAyBC,mBAAzB,gBAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CAE1BpF,WAAW,CAAC,OAAD,CAAU,CAAEqF,UAAU,CAAE,UAAd,CAA0BC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAAhC,CAAV,CAAX,CACKC,IADL,CACU,SAAUF,IAAV,CAAgB,CACtB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACrB,GAAIC,CAAAA,QAAQ,CAACJ,IAAI,CAACK,WAAlB,CAEJ,GAAIxB,CAAAA,SAAS,CAAC,EAAd,CACI,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGsB,QAAQ,CAACE,MAArC,CAA6CxB,KAAK,EAAlD,CAAsD,CAEtDD,SAAS,CAACG,IAAV,CAAe,CACXC,KAAK,CAAEmB,QAAQ,CAACtB,KAAD,CAAR,CAAgByB,EADZ,CAEXrB,KAAK,CAAEkB,QAAQ,CAACtB,KAAD,CAAR,CAAgB0B,WAFZ,CAAf,EAOC,CAEDb,WAAW,CAACd,SAAD,CAAX,CAGA;AAEJ;AAEC,CAtBD,IAsBO,CACH;AACH,CAEA,CA5BL,EA6BK4B,KA7BL,CA6BW,SAAUC,KAAV,CAAiB,CACxBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACC,CA/BL,EAmCC,CArCD,CAuCA,GAAMwB,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAAAtB,CAAC,CAAI,CAE9BQ,mBAAmB,CAACR,CAAC,CAACJ,KAAH,CAAnB,CAEH,CAJD,CAKA;AAEJ;AACI,gBAAgCxG,QAAQ,CAAC,EAAD,CAAxC,2CAAOmI,QAAP,gBAAiBC,WAAjB,gBACA,gBAAgDpI,QAAQ,CAAC,EAAD,CAAxD,2CAAOqI,gBAAP,gBAAyBC,mBAAzB,gBAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBtG,WAAW,CAAC,MAAD,CAAS,CAAEqF,UAAU,CAAE,iBAAd,CAAiCC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAAvC,CAAT,CAAX,CACGC,IADH,CACQ,SAAUF,IAAV,CAAgB,CACpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIC,CAAAA,QAAQ,CAACJ,IAAI,CAACK,WAAlB,CAGA,GAAIY,CAAAA,MAAM,CAAG,EAAb,CAEA,GAAIpC,CAAAA,SAAS,CAAG,EAAhB,CACA,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGsB,QAAQ,CAACE,MAArC,CAA6CxB,KAAK,EAAlD,CAAsD,CACnD,GAAIoC,CAAAA,OAAO,CAAGd,QAAQ,CAACtB,KAAD,CAAtB,CACAoC,OAAO,CAAClG,IAAR,CAAaA,IAAI,EAAjB,CACE,GAAImG,CAAAA,IAAI,CAAC,EAAT,CACAA,IAAI,CAAC,CAAElC,KAAK,CAAEiC,OAAO,CAAClG,IAAjB,CACJoG,QAAQ,CAACF,OAAO,CAACE,QADb,CAEHlC,KAAK,CAAC,eAAiBgC,OAAO,CAACE,QAAzB,IAFH,CAE2CC,KAAK,CAACH,OAAO,CAACI,WAFzD,CAAL,CAGAzC,SAAS,CAACG,IAAV,CAAemC,IAAf,EACH,CACF;AACF;AACA;AAEA;AAEA;AACA;AACEN,WAAW,CAAChC,SAAD,CAAX,CAGD,CA3BD,IA2BO,CACHnD,MAAM,CAAC,CAAD,CAAG,eAAH,CAAN,CACH,CAEF,CAjCH,EAkCG+E,KAlCH,CAkCS,SAAUC,KAAV,CAAiB,CACtBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CApCH,EAwCD,CAzCH,CA0CA,GAAMoC,CAAAA,oBAAoB,CAAC,QAArBA,CAAAA,oBAAqB,CAAAlC,CAAC,CAAE,CAE1B0B,mBAAmB,CAACS,KAAK,CAACC,OAAN,CAAcpC,CAAd,EAAmBA,CAAC,CAACqC,GAAF,CAAM,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAAC1C,KAAN,EAAP,CAAnB,CAAyC,EAA1C,CAAnB,CAGD,CALH,CAMA;AAEJ;AACK,gBAA8BxG,QAAQ,CAAC,CACtCmJ,QAAQ,CAAC,GAAIxE,CAAAA,IAAJ,EAD6B,CAEtCyE,MAAM,CAAC,GAAIzE,CAAAA,IAAJ,EAF+B,CAGtC0E,GAAG,CAAC,CAHkC,CAItCC,WAAW,CAAC,CAJ0B,CAKtCC,OAAO,CAAC,EAL8B,CAMtCC,MAAM,CAAC,EAN+B,CAOtCC,MAAM,CAAC,IAP+B,CAQtCC,kBAAkB,CAAC,CARmB,CAStCC,OAAO,CAAC,EAT8B,CAUtCC,WAAW,CAAC,EAV0B,CAAD,CAAtC,2CAAOC,OAAP,gBAAgBC,UAAhB,gBAcH,gBAAsC9J,QAAQ,CAAC,CAC7CmJ,QAAQ,CAAC,GAAIxE,CAAAA,IAAJ,EADoC,CAE7CyE,MAAM,CAAC,GAAIzE,CAAAA,IAAJ,EAFsC,CAG7C0E,GAAG,CAAC,CAHyC,CAI7CC,WAAW,CAAC,CAJiC,CAK7CC,OAAO,CAAC,EALqC,CAM7CC,MAAM,CAAC,EANsC,CAO7CC,MAAM,CAAC,IAPsC,CAQ7CC,kBAAkB,CAAC,CAR0B,CAS7CC,OAAO,CAAC,EATqC,CAU7CC,WAAW,CAAC,EAViC,CAW7CxE,QAAQ,CAAC,CAXoC,CAY7CE,WAAW,CAAC,CAZiC,CAAD,CAA9C,2CAAOyE,WAAP,gBAAoBC,cAApB,gBAiBA,GAAMC,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,EAAI,CACpBC,kBAAkB,CAAC,KAAD,CAAlB,CACA,GAAGzF,KAAK,CAACF,WAAN,EAAmB,EAAtB,CAAyB,CACvBtB,MAAM,CAAC,CAAD,CAAG,+BAAH,CAAN,CACD,CAFD,IAEM,IAAGwB,KAAK,CAACD,OAAN,EAAe,EAAlB,CAAqB,CACzBvB,MAAM,CAAC,CAAD,CAAG,gBAAH,CAAN,CACD,CAFK,IAED,CACDhB,WAAW,CAAC,SAAD,CAAW,CAAEqF,UAAU,CAAE,mBAAd,CAAmCC,IAAI,CAAC,CAAC4C,cAAc,CAAC1F,KAAK,CAACF,WAAtB,CAAkCC,OAAO,CAACC,KAAK,CAACD,OAAhD,CAAxC,CAAX,CAAX,CACCiD,IADD,CACM,SAASF,IAAT,CAAe,CACrB,GAAGA,IAAI,CAACG,SAAL,EAAgB,CAAnB,CAAqB,CAEjB,GAAIc,CAAAA,MAAM,CAACjB,IAAI,CAACK,WAAhB,CACA,GAAGY,MAAM,CAACX,MAAP,CAAc,CAAjB,CAAmB,CACjBqC,kBAAkB,CAAC,IAAD,CAAlB,CAEE,GAAIE,CAAAA,YAAY,CAAC5B,MAAM,CAAC,CAAD,CAAvB,CACA,GAAG4B,YAAY,CAACC,cAAb,EAA6B,GAAhC,CAAoC,CAClCpH,MAAM,CAAC,CAAD,CAAG,8CAAH,CAAN,CACA,OACD,CAHD,IAGK,CACFqH,OAAO,CAACC,GAAR,CAAY/B,MAAM,CAAC,CAAD,CAAlB,EACHtC,iBAAiB,CAAC,IAAD,CAAjB,CACAF,qBAAqB,CAACoE,YAAY,CAACV,kBAAb,EAAiC,GAAjC,CAAqC,KAArC,CAA2C,IAA5C,CAArB,CACA,GAAIc,CAAAA,GAAG,CAACC,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACO,OAAxB,CAAR,CACA,GAAIC,CAAAA,IAAI,CAACR,YAAY,CAACZ,MAAb,EAAqB,EAArB,CAAwBiB,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACZ,MAAxB,CAAxB,CAAwD,EAAjE,CACA,GAAIqB,CAAAA,KAAK,CAACT,YAAY,CAACb,OAAb,EAAsB,EAAtB,CAAyBkB,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACb,OAAxB,CAAzB,CAA0D,EAApE,CACA,GAAIuB,CAAAA,OAAO,CAAC,EAAZ,CACA,GAAGF,IAAI,CAAC/C,MAAL,CAAY,CAAf,CAAiB,0BACJxB,KADI,EAET,GAAMoC,CAAAA,OAAO,CAAGmC,IAAI,CAACvE,KAAD,CAApB,CACI0E,MAAM,CAAC5C,QAAQ,CAAC6C,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACP,QAAF,EAAYF,OAAO,CAACE,QAAtB,EAAjB,CAHF,CAIT,GAAGoC,MAAM,CAAClD,MAAP,CAAc,CAAjB,CAAmB,CACfkD,MAAM,CAAC,CAAD,CAAN,CAAUvE,KAAV,CAAiBiC,OAAO,CAAClG,IAAzB,CACAuI,OAAO,CAACvE,IAAR,CAAakC,OAAO,CAAClG,IAArB,EACH,CAPQ,EACb,IAAK,GAAI8D,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGuE,IAAI,CAAC/C,MAAjC,CAAyCxB,KAAK,EAA9C,CAAkD,IAE1C0E,CAAAA,MAF0C,OAAzC1E,KAAyC,EAOjD,CACJ,CACD+B,WAAW,CAACD,QAAD,CAAX,CAGA,GAAI8C,CAAAA,YAAY,CAACb,YAAY,CAACc,OAA9B,CACA,IAAK,GAAIC,CAAAA,EAAE,CAAG,CAAd,CAAiBA,EAAE,CAAGF,YAAY,CAACpD,MAAnC,CAA2CsD,EAAE,EAA7C,CAAiD,CAC/C,GAAIC,CAAAA,KAAK,CAAGH,YAAY,CAACE,EAAD,CAAxB,CACAC,KAAK,CAACC,UAAN,CAAiBD,KAAK,CAACC,UAAN,EAAkB,GAAlB,CAAsB,KAAtB,CAA4B,IAA7C,CACAD,KAAK,CAACE,mBAAN,CAA0BF,KAAK,CAACE,mBAAN,EAA2B,GAA3B,CAA+B,KAA/B,CAAqC,IAA/D,CACAF,KAAK,CAACG,kBAAN,CAAyBH,KAAK,CAACG,kBAAN,EAA0B,GAA1B,CAA8B,KAA9B,CAAoC,IAA7D,CACAH,KAAK,CAACI,eAAN,CAAsBJ,KAAK,CAACI,eAAN,EAAuB,GAAvB,CAA2B,KAA3B,CAAiC,IAAvD,CACAJ,KAAK,CAACK,SAAN,CAAgBL,KAAK,CAACK,SAAN,EAAiB,GAAjB,CAAqB,KAArB,CAA2B,IAA3C,CACAL,KAAK,CAACM,cAAN,CAAqBN,KAAK,CAACM,cAAN,EAAsB,GAAtB,CAA0B,KAA1B,CAAgC,IAArD,CACAN,KAAK,CAACO,gBAAN,CAAuBP,KAAK,CAACO,gBAAN,EAAwB,GAAxB,CAA4B,KAA5B,CAAkC,IAAzD,CACAP,KAAK,CAACQ,aAAN,CAAoBR,KAAK,CAACQ,aAAN,EAAqB,GAArB,CAAyB,KAAzB,CAA+B,IAAnD,CACAR,KAAK,CAACS,wBAAN,CAA+BT,KAAK,CAACO,gBAAN,EAAwB,GAAxB,CAA4B,KAA5B,CAAkC,IAAjE,CAAsE,CACtEP,KAAK,CAACU,OAAN,CAAc,KAAd,CACAV,KAAK,CAAC7I,IAAN,CAAWA,IAAI,EAAf,CACA6I,KAAK,CAAC7B,OAAN,CAAckB,IAAI,CAACC,KAAL,CAAWU,KAAK,CAAC7B,OAAjB,CAAd,CACD,CAED,GAAIwC,CAAAA,YAAY,CAAC,EAAjB,CAtCK,2BAuCIC,EAvCJ,EAwCH,GAAMvD,CAAAA,OAAO,CAAGwD,WAAW,CAACD,EAAD,CAA3B,CACIE,OAAO,CAAG9B,YAAY,CAACT,OAAb,EAAsB,EAAtB,EAA4BS,YAAY,CAACT,OAAb,EAAsBjG,SAAlD,EAA+D0G,YAAY,CAACT,OAAb,EAAsB,IAAtF,CAA4F,EAA5F,CAA+Fc,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACT,OAAxB,CAzCzG,CA0CH,GAAGuC,OAAO,CAACrE,MAAR,CAAe,CAAlB,CAAoB,CACdsE,SAAS,CAAED,OAAO,CAAClB,MAAR,CAAe,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACpB,EAAF,EAAMW,OAAO,CAACX,EAAhB,EAAhB,CADG,CAElB,GAAGqE,SAAS,CAACtE,MAAV,CAAiB,CAApB,CAAsB,CACpBY,OAAO,CAAC2D,GAAR,CAAYD,SAAS,CAAC,CAAD,CAAT,CAAaC,GAAzB,CACD,CACF,CACDL,YAAY,CAACxF,IAAb,CAAkBkC,OAAlB,EAhDG,EAuCL,IAAK,GAAIuD,CAAAA,EAAE,CAAG,CAAd,CAAiBA,EAAE,CAAGC,WAAW,CAACpE,MAAlC,CAA0CmE,EAAE,EAA5C,CAAgD,IAE1CE,CAAAA,OAF0C,IAIxCC,CAAAA,SAJwC,QAAvCH,EAAuC,EAW/C,CAEDlC,UAAU,CAAC,CACPuC,WAAW,CAAC,GAAI1H,CAAAA,IAAJ,CAASyF,YAAY,CAACiC,WAAtB,CADL,CAEPlD,QAAQ,CAAC,GAAIxE,CAAAA,IAAJ,CAASyF,YAAY,CAACjB,QAAtB,CAFF,CAGPC,MAAM,CAAC,GAAIzE,CAAAA,IAAJ,CAASyF,YAAY,CAAChB,MAAtB,CAHA,CAIPC,GAAG,CAACe,YAAY,CAACf,GAJV,CAKPC,WAAW,CAAGgD,UAAU,CAAClC,YAAY,CAACd,WAAd,CAAV,CAAqCgD,UAAU,CAAClC,YAAY,CAACmC,SAAd,CAAhD,CAA0ED,UAAU,CAAClC,YAAY,CAACoC,cAAd,CAL1F,CAMPjD,OAAO,CAAEa,YAAY,CAACb,OAAb,EAAsB,EAAtB,CAAyBkB,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACb,OAAxB,CAAzB,CAA0D,EAN5D,CAOPC,MAAM,CAAEY,YAAY,CAACZ,MAAb,EAAqB,EAArB,CAAwBiB,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACZ,MAAxB,CAAxB,CAAwD,EAPzD,CAQPC,MAAM,CAACW,YAAY,CAACX,MARb,CASPC,kBAAkB,CAACU,YAAY,CAACV,kBAAb,EAAiC,GAAjC,CAAqC,KAArC,CAA2C,IATvD,CAUPC,OAAO,CAACoC,YAVD,CAWPU,iBAAiB,CAACrC,YAAY,CAACsC,eAXxB,CAYPC,aAAa,CAACvC,YAAY,CAACuC,aAAb,EAA4B,GAA5B,CAAgC,KAAhC,CAAsC,IAZ7C,CAaP/C,WAAW,CAACqB,YAbL,CAcP7F,QAAQ,CAAC,CAdF,CAePE,WAAW,CAAC,CAfL,CAgBPqF,OAAO,CAAEP,YAAY,CAACO,OAAb,EAAsB,EAAtB,CAAyBF,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACO,OAAxB,CAAzB,CAA0D,EAhB5D,CAiBPiC,SAAS,CAACxC,YAAY,CAACtC,EAjBhB,CAAD,CAAV,CAmBA,GAAI+E,CAAAA,eAAe,CAACpC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACqC,SAAL,CAAef,YAAf,CAAX,CAApB,CACA,GAAIgB,CAAAA,eAAe,CAAEtC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACqC,SAAL,CAAe7B,YAAf,CAAX,CAArB,CACAjB,cAAc,CAAC,CACbqC,WAAW,CAAC,GAAI1H,CAAAA,IAAJ,CAASyF,YAAY,CAACiC,WAAtB,CADC,CAEblD,QAAQ,CAAC,GAAIxE,CAAAA,IAAJ,CAASyF,YAAY,CAACjB,QAAtB,CAFI,CAGbC,MAAM,CAAC,GAAIzE,CAAAA,IAAJ,CAASyF,YAAY,CAAChB,MAAtB,CAHM,CAIbC,GAAG,CAACe,YAAY,CAACf,GAJJ,CAKbC,WAAW,CAAGgD,UAAU,CAAClC,YAAY,CAACd,WAAd,CAAV,CAAqCgD,UAAU,CAAClC,YAAY,CAACmC,SAAd,CAAhD,CAA0ED,UAAU,CAAClC,YAAY,CAACoC,cAAd,CALpF,CAMbjD,OAAO,CAAEa,YAAY,CAACb,OAAb,EAAsB,EAAtB,CAAyBkB,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACb,OAAxB,CAAzB,CAA0D,EANtD,CAObC,MAAM,CAAEY,YAAY,CAACZ,MAAb,EAAqB,EAArB,CAAwBiB,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACZ,MAAxB,CAAxB,CAAwD,EAPnD,CAQbC,MAAM,CAACW,YAAY,CAACX,MARP,CASbC,kBAAkB,CAACU,YAAY,CAACV,kBAAb,EAAiC,GAAjC,CAAqC,KAArC,CAA2C,IATjD,CAUbC,OAAO,CAACkD,eAVK,CAWbJ,iBAAiB,CAACrC,YAAY,CAACsC,eAXlB,CAYbC,aAAa,CAACvC,YAAY,CAACuC,aAAb,EAA4B,GAA5B,CAAgC,KAAhC,CAAsC,IAZvC,CAab/C,WAAW,CAACmD,eAbC,CAcb3H,QAAQ,CAAC,CAdI,CAebE,WAAW,CAAC,CAfC,CAgBbqF,OAAO,CAAEP,YAAY,CAACO,OAAb,EAAsB,EAAtB,CAAyBF,IAAI,CAACC,KAAL,CAAWN,YAAY,CAACO,OAAxB,CAAzB,CAA0D,EAhBtD,CAiBbiC,SAAS,CAACxC,YAAY,CAACtC,EAjBV,CAAD,CAAd,CAmBA;AACAjD,WAAW,CAAC,GAAIF,CAAAA,IAAJ,CAASyF,YAAY,CAACjB,QAAtB,CAAD,CAAX,CACApE,SAAS,CAAC,GAAIJ,CAAAA,IAAJ,CAASyF,YAAY,CAAChB,MAAtB,CAAD,CAAT,CACAtD,sBAAsB,CAACwG,UAAU,CAAClC,YAAY,CAACf,GAAd,CAAX,CAAtB,CACAjC,mBAAmB,CAACgD,YAAY,CAACX,MAAd,CAAnB,CACAuD,kBAAkB,CAACxC,GAAG,CAAC,CAAD,CAAH,CAAO1C,EAAR,CAAlB,CACAQ,mBAAmB,CAACwC,OAAD,CAAnB,CACAmC,0BAA0B,CAACpC,KAAK,CAAC,CAAD,CAAN,CAA1B,CACC,CASF;AAEF,CAtHD,IAsHK,CACH5H,MAAM,CAAC,CAAD,CAAG,+BAAH,CAAN,CACD,CAED;AACA;AACA;AACH,CAhID,IAgIK,CACHA,MAAM,CAAC,CAAD,CAAG,+BAAH,CAAN,CACD,CAEA,CAtID,EAuIC+E,KAvID,CAuIO,SAASC,KAAT,CAAe,CAClBhF,MAAM,CAAC,CAAD,CAAGgF,KAAK,CAACvB,QAAN,EAAH,CAAoB,CAApB,CAAN,CACH,CAzID,EA0IH,CAIJ,CArJD,CAsJA,GAAMwG,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACtG,CAAD,CAAO,CAC1B,cAAsBA,CAAC,CAACuG,MAAxB,CAAQrF,EAAR,WAAQA,EAAR,CAAYtB,KAAZ,WAAYA,KAAZ,CAEA,GAAII,CAAC,CAACuG,MAAF,CAASjK,IAAT,GAAkB,UAAtB,CAAmC,CAC/B4G,UAAU,gCAAKD,OAAL,wBAAe/B,EAAf,CAAqBlB,CAAC,CAACuG,MAAF,CAASC,OAAT,EAAkB,IAAlB,CAAuBxG,CAAC,CAACuG,MAAF,CAASC,OAAhC,CAAwC,KAA7D,GAAV,CACA,OAAQtF,EAAR,EACE,IAAK,eAAL,CAEE,IAAK,GAAIzB,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGwD,OAAO,CAACF,OAAR,CAAgB9B,MAA5C,CAAoDxB,KAAK,EAAzD,CAA6D,CAC3D,GAAMoC,CAAAA,OAAO,CAAGoB,OAAO,CAACF,OAAR,CAAgBtD,KAAhB,CAAhB,CACAoC,OAAO,CAAC2D,GAAR,CAAY,CAAZ,CACD,CAED,GAAGxF,CAAC,CAACuG,MAAF,CAASC,OAAZ,CAAoB,CAClBtD,UAAU,CAAC,SAAAuD,SAAS,wCACfA,SADe,MAElB1D,OAAO,CAAEE,OAAO,CAACF,OAFC,IAAV,CAAV,CAID,CAGD,MAEF,QACE,MAnBJ,CAuBH,CAzBD,IAyBK,CACDG,UAAU,gCAAKD,OAAL,wBAAc/B,EAAd,CAAkBtB,KAAlB,GAAV,CACH,CAIJ,CAlCD,CAmCA,GAAM8G,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAC1G,CAAD,CAAO,CACxB,eAAsBA,CAAC,CAACuG,MAAxB,CAAQrF,EAAR,YAAQA,EAAR,CAAYtB,KAAZ,YAAYA,KAAZ,CAED,GAAII,CAAC,CAACuG,MAAF,CAASjK,IAAT,GAAkB,UAAtB,CAAmC,CACjCwB,QAAQ,gCAAKD,KAAL,wBAAaqD,EAAb,CAAmBlB,CAAC,CAACuG,MAAF,CAASC,OAAT,EAAkB,IAAlB,CAAuBxG,CAAC,CAACuG,MAAF,CAASC,OAAhC,CAAwC,KAA3D,GAAR,CACD,CAFD,IAEO,CACL1I,QAAQ,gCAAKD,KAAL,wBAAaqD,EAAb,CAAkBtB,KAAlB,GAAR,CACD,CACH,CARD,CASA,gBAAgCxG,QAAQ,CAAC,EAAD,CAAxC,2CAAOuN,QAAP,gBAAiBC,WAAjB,gBACA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBxL,WAAW,CAAC,MAAD,CAAS,CAAEqF,UAAU,CAAE,SAAd,CAAyBC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAA/B,CAAT,CAAX,CACGC,IADH,CACQ,SAAUF,IAAV,CAAgB,CAEpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB;AACA,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CAEA4F,WAAW,gCAAMD,QAAN,MAAgBhG,IAAI,CAAEiB,MAAtB,GAAX,CACD,CALD,IAKO,CACL;AACD,CAEF,CAZH,EAaGR,KAbH,CAaS,SAAUC,KAAV,CAAiB,CACtBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CAfH,EAmBD,CApBD,CAqBCzG,SAAS,CAAC,UAAI,CACXkG,gBAAgB,GAChBkB,WAAW,GACXqG,kBAAkB,GAClBC,UAAU,GACVpF,WAAW,GACXqF,WAAW,GACX7G,SAAS,GACT8G,cAAc,GACdC,UAAU,GACVC,WAAW,GACXC,iBAAiB,GACjBP,OAAO,GACT,CAbQ,CAaP,EAbO,CAAT,CAgBAxN,SAAS,CAAC,UAAI,CACb;AACGgO,KAAK,GACP;AACD,CAJQ,CAIP,CAAC5F,gBAAD,CAJO,CAAT,CAKApI,SAAS,CAAC,UAAI,CAEb,GAAG4J,OAAO,GAAGnG,SAAV,EAAuBmG,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA2B,CAArD,CAAuD,CACnD,GAAIwB,CAAAA,GAAG,CAACQ,OAAO,CAACD,WAAR,CAAoBoB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAA5B,EAAgDjE,MAAxD,CACA/B,sBAAsB,CAACwG,UAAU,CAACjD,GAAD,CAAX,CAAtB,CACC4E,KAAK,GACT,CAED,CARQ,CAQP,CAACpE,OAAD,CARO,CAAT,CASA,GAAMoE,CAAAA,KAAK,CAAC,QAANA,CAAAA,KAAM,EAAI,CACd;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAYA;AACC;AAEA,GAAGpE,OAAO,CAACD,WAAR,GAAsBlG,SAAtB,EAAmCmG,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA2B,CAAjE,CAAmE,CACjE;AACA,GAAIqG,CAAAA,eAAe,CAACX,QAAQ,CAAChG,IAAT,CAAcyD,MAAd,CAAqB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACpB,EAAF,EAAM,CAAR,EAAtB,CAApB,CACA,GAAIqG,CAAAA,YAAY,CAACZ,QAAQ,CAAChG,IAAT,CAAcyD,MAAd,CAAqB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACpB,EAAF,EAAM,CAAR,EAAtB,CAAjB,CACA,GAAIsG,CAAAA,iBAAiB,CAACb,QAAQ,CAAChG,IAAT,CAAcyD,MAAd,CAAqB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACpB,EAAF,EAAM,CAAR,EAAtB,CAAtB,CACA;AACA,GAAMuG,CAAAA,WAAW,CAAGC,IAAI,CAACC,GAAL,CAASxE,WAAW,CAACX,MAAZ,CAAqBW,WAAW,CAACZ,QAA1C,CAApB,CACA,GAAIqF,CAAAA,WAAW,CAAGF,IAAI,CAACG,IAAL,CAAUJ,WAAW,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAArB,CAAlB,CACA,GAAGG,WAAW,EAAE,CAAb,EAAkBA,WAAW,EAAE,CAAlC,CAAoC,CAClCA,WAAW,CAAC,CAAZ,CACD,CAED;AACA,GAAIE,CAAAA,cAAc,CAAC3E,WAAW,CAACH,WAAZ,CAAwBoB,MAAxB,CAA+B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAAhC,CAAnB,CACA,GAAI6C,CAAAA,iBAAiB,CAACD,cAAc,CAAC1D,MAAf,CAAsB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACsC,eAAF,EAAmB,IAArB,EAAvB,CAAtB,CACA,GAAIoD,CAAAA,oBAAoB,CAACF,cAAc,CAAC1D,MAAf,CAAsB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACsC,eAAF,EAAmB,KAArB,EAAvB,CAAzB,CACA,GAAIqD,CAAAA,sBAAsB,CAACH,cAAc,CAAC1D,MAAf,CAAsB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC0C,aAAF,EAAiB,IAAnB,EAAvB,EAAgD/D,MAA3E,CACA;AACA,GAAIiH,CAAAA,qBAAqB,CAACF,oBAAoB,CAAC5D,MAArB,CAA4B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACwC,cAAF,EAAkB,IAApB,EAA7B,EAAuD7D,MAAjF,CACA,GAAIkH,CAAAA,oBAAoB,CAACH,oBAAoB,CAAC5D,MAArB,CAA4B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACwC,cAAF,EAAkB,KAApB,EAA7B,EAAwD7D,MAAjF,CAEA,GAAImH,CAAAA,aAAa,CAAC,CAACF,qBAAqB,CAAC,CAAtB,CACExC,UAAU,CAACwC,qBAAD,CAAV,CAAoCxC,UAAU,CAAC6B,YAAY,CAACtG,MAAb,CAAoB,CAApB,CAAsBsG,YAAY,CAAC,CAAD,CAAZ,CAAgBc,SAAtC,CAAgD,CAAjD,CADhD,CACqG,CADtG,GAEIF,oBAAoB,CAAC,CAArB,CACAA,oBAAD,EAA0BZ,YAAY,CAACtG,MAAb,CAAoB,CAApB,CAAsBsG,YAAY,CAAC,CAAD,CAAZ,CAAgBvF,KAAtC,CAA4C,CAAtE,CADC,CACyE,CAH7E,CAAlB,CAKA;AACA,GAAIsG,CAAAA,UAAU,CAAGN,oBAAoB,CAAC/G,MAArB,CAA4B,CAA5B,CACJyE,UAAU,CAACsC,oBAAoB,CAAC/G,MAAtB,CAAV,CAA0CyE,UAAU,CAAC4B,eAAe,CAACrG,MAAhB,CAAuB,CAAvB,CAAyByE,UAAU,CAAC4B,eAAe,CAAC,CAAD,CAAf,CAAmBtF,KAApB,CAAnC,CAA8D,CAA/D,CADhD,CACmH,CADpI,CAGA;AACA,GAAIuG,CAAAA,mBAAmB,CAAEN,sBAAsB,CAAC,CAAvB,CACZvC,UAAU,CAACuC,sBAAD,CAAV,EAAsCT,iBAAiB,CAACvG,MAAlB,CAAyB,CAAzB,CAA2BuG,iBAAiB,CAAC,CAAD,CAAjB,CAAqBxF,KAAhD,CAAsD,CAA5F,CADY,CACoF,CAD7G,CAGA;AAEA,GAAIwG,CAAAA,UAAU,CAAC,CAAf,CACA,GAAG,CAACrF,WAAW,CAACL,kBAAhB,CAAmC,4BACvB2F,EADuB,EAE9B,GAAIC,CAAAA,OAAO,CAAGvF,WAAW,CAACP,MAAZ,CAAmB6F,EAAnB,CAAd,CACA,GAAIE,CAAAA,UAAU,CAACpH,QAAQ,CAAC6C,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAAS8I,OAAO,CAAC/M,IAAnB,EAAjB,CAAf,CACA,GAAGgN,UAAU,CAAC1H,MAAX,CAAkB,CAArB,CAAuB,CACtBuH,UAAU,EAAG9C,UAAU,CAACiD,UAAU,CAAC,CAAD,CAAV,CAAc3G,KAAf,CAAvB,CACA,CAN6B,EAChC,IAAK,GAAIyG,CAAAA,EAAE,CAAG,CAAd,CAAiBA,EAAE,CAAGtF,WAAW,CAACP,MAAZ,CAAmB3B,MAAzC,CAAiDwH,EAAE,EAAnD,CAAuD,QAA9CA,EAA8C,EAOtD,CAEH,CACA;AAED,GAAIG,CAAAA,UAAU,CAAC,CAAf,CACA,GAAG,CAACzF,WAAW,CAAC4C,aAAhB,CAA8B,CAC5B,IAAK,GAAIX,CAAAA,EAAE,CAAG,CAAd,CAAiBA,EAAE,CAAGjC,WAAW,CAACJ,OAAZ,CAAoB9B,MAA1C,CAAkDmE,EAAE,EAApD,CAAwD,CACtDwD,UAAU,EAAIlD,UAAU,CAACvC,WAAW,CAACJ,OAAZ,CAAoBqC,EAApB,EAAwBI,GAAzB,CAAV,CAAyCE,UAAU,CAACvC,WAAW,CAACJ,OAAZ,CAAoBqC,EAApB,EAAwByD,MAAzB,CAApD,CAAyFjB,WAAtG,CACA,CACF,CACF;AACA,GAAIkB,CAAAA,eAAe,CAAC,CAApB,CACA;AACA,GAAIC,CAAAA,cAAc,CAAC,CAAnB,CAEA,GAAIC,CAAAA,WAAW,CAAEV,UAAU,CAACF,aAAX,CAAyBI,UAAzB,CAAoCI,UAApC,CAA+CL,mBAAhD,EAAsEO,eAAe,CAACC,cAAtF,CAAhB,CACA;AAEA;AACE;AACA,GAAME,CAAAA,QAAQ,CAAGvB,IAAI,CAACC,GAAL,CAAS1E,OAAO,CAACT,MAAR,CAAiBS,OAAO,CAACV,QAAlC,CAAjB,CACA,GAAI2G,CAAAA,QAAQ,CAAGxB,IAAI,CAACG,IAAL,CAAUoB,QAAQ,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAlB,CAAf,CACA,GAAGC,QAAQ,EAAE,CAAV,EAAeA,QAAQ,EAAE,CAA5B,CAA8B,CAC5BA,QAAQ,CAAC,CAAT,CACD,CAGD;AACA,GAAIC,CAAAA,WAAW,CAAClG,OAAO,CAACD,WAAR,CAAoBoB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAA5B,CAAhB,CACA,GAAIkE,CAAAA,cAAc,CAACD,WAAW,CAAC/E,MAAZ,CAAmB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACsC,eAAF,EAAmB,IAArB,EAApB,CAAnB,CACA,GAAIyE,CAAAA,iBAAiB,CAACF,WAAW,CAAC/E,MAAZ,CAAmB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACsC,eAAF,EAAmB,KAArB,EAApB,CAAtB,CACA,GAAI0E,CAAAA,mBAAmB,CAACH,WAAW,CAAC/E,MAAZ,CAAmB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC0C,aAAF,EAAiB,IAAnB,EAApB,EAA6C/D,MAArE,CACE,CACF;AACA,GAAIsI,CAAAA,kBAAkB,CAACF,iBAAiB,CAACjF,MAAlB,CAAyB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACwC,cAAF,EAAkB,IAApB,EAA1B,EAAoD7D,MAA3E,CACA,GAAIuI,CAAAA,iBAAiB,CAACH,iBAAiB,CAACjF,MAAlB,CAAyB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACwC,cAAF,EAAkB,KAApB,EAA1B,EAAqD7D,MAA3E,CAEA,GAAIwI,CAAAA,UAAU,CAAC,CAACF,kBAAkB,CAAC,CAAnB,CACK7D,UAAU,CAAC6D,kBAAD,CAAV,CAAiC7D,UAAU,CAAC6B,YAAY,CAACtG,MAAb,CAAoB,CAApB,CAAsBsG,YAAY,CAAC,CAAD,CAAZ,CAAgBc,SAAtC,CAAgD,CAAjD,CADhD,CACqG,CADtG,GAEOmB,iBAAiB,CAAC,CAAlB,CACAA,iBAAD,EAAuBjC,YAAY,CAACtG,MAAb,CAAoB,CAApB,CAAsBsG,YAAY,CAAC,CAAD,CAAZ,CAAgBvF,KAAtC,CAA4C,CAAnE,CADC,CACsE,CAH7E,CAAf,CAKA;AACA,GAAI0H,CAAAA,OAAO,CAAGL,iBAAiB,CAACpI,MAAlB,CAAyB,CAAzB,CACDyE,UAAU,CAAC2D,iBAAiB,CAACpI,MAAnB,CAAV,CAAuCyE,UAAU,CAAC4B,eAAe,CAACrG,MAAhB,CAAuB,CAAvB,CAAyByE,UAAU,CAAC4B,eAAe,CAAC,CAAD,CAAf,CAAmBtF,KAApB,CAAnC,CAA8D,CAA/D,CADhD,CACmH,CADjI,CAGA;AACA,GAAI2H,CAAAA,gBAAgB,CAAEL,mBAAmB,CAAC,CAApB,CACT5D,UAAU,CAAC4D,mBAAD,CAAV,EAAmC9B,iBAAiB,CAACvG,MAAlB,CAAyB,CAAzB,CAA2BuG,iBAAiB,CAAC,CAAD,CAAjB,CAAqBxF,KAAhD,CAAsD,CAAzF,CADS,CACoF,CAD1G,CAGA;AACA,GAAI4H,CAAAA,OAAO,CAAC,CAAZ,CACA,GAAG,CAAC3G,OAAO,CAACH,kBAAZ,CAA+B,CAC7B,GAAGrB,gBAAgB,CAACR,MAAjB,CAAwB,CAA3B,CAA6B,4BACnBwH,GADmB,EAE1B,GAAIC,CAAAA,OAAO,CAAGjH,gBAAgB,CAACgH,GAAD,CAA9B,CACA,GAAIE,CAAAA,UAAU,CAACpH,QAAQ,CAAC6C,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAAS8I,OAAX,EAAjB,CAAf,CACA,GAAGC,UAAU,CAAC1H,MAAX,CAAkB,CAArB,CAAuB,CACrB2I,OAAO,EAAGlE,UAAU,CAACiD,UAAU,CAAC,CAAD,CAAV,CAAc3G,KAAf,CAApB,CACD,CANyB,EAC5B,IAAK,GAAIyG,CAAAA,GAAE,CAAG,CAAd,CAAiBA,GAAE,CAAGhH,gBAAgB,CAACR,MAAvC,CAA+CwH,GAAE,EAAjD,CAAqD,QAA5CA,GAA4C,EAOpD,CACD,CACF,CACA;AACD,GAAIoB,CAAAA,OAAO,CAAC,CAAZ,CACA,GAAG,CAAC5G,OAAO,CAAC8C,aAAZ,CAA0B,CACxB,IAAK,GAAIX,CAAAA,GAAE,CAAG,CAAd,CAAiBA,GAAE,CAAGnC,OAAO,CAACF,OAAR,CAAgB9B,MAAtC,CAA8CmE,GAAE,EAAhD,CAAoD,CAClDyE,OAAO,EAAInE,UAAU,CAACzC,OAAO,CAACF,OAAR,CAAgBqC,GAAhB,EAAoBI,GAArB,CAAV,CAAqCE,UAAU,CAACzC,OAAO,CAACF,OAAR,CAAgBqC,GAAhB,EAAoByD,MAArB,CAAhD,CAAiFK,QAA3F,CACA,CACF,CACF;AACA,GAAIY,CAAAA,YAAY,CAAC,CAAjB,CACA;AACA,GAAIC,CAAAA,WAAW,CAAC,CAAhB,CACA,GAAIC,CAAAA,QAAQ,CAAEN,OAAO,CAACD,UAAR,CAAmBG,OAAnB,CAA2BC,OAA3B,CAAmCF,gBAApC,EAAuDG,YAAY,CAACC,WAApE,CAAb,CACF;AAEAE,mBAAmB,CAAC,CAACC,gBAAgB,CAAC,CACrCC,IAAI,CAAC7B,UADgC,CAErC8B,QAAQ,CAAChC,aAF4B,CAGrCiC,IAAI,CAAC7B,UAHgC,CAIrC8B,OAAO,CAAC1B,UAJ6B,CAKrC2B,aAAa,CAAChC,mBALuB,CAMrCiC,OAAO,CAAC5B,UAN6B,CAOrC6B,QAAQ,CAAE1B,cAP2B,CAQrC2B,SAAS,CAAC5B,eAR2B,CASrC6B,KAAK,CAAC3B,WAT+B,CAUrC4B,cAAc,CAAC,CAVsB,CAWrCC,WAAW,CAAC,CAXyB,CAAlB,CAarBC,oBAAoB,CAAC,CACrBX,IAAI,CAACT,OADgB,CAErBU,QAAQ,CAACX,UAFY,CAGrBY,IAAI,CAACT,OAHgB,CAIrBU,OAAO,CAACT,OAJa,CAKrBU,aAAa,CAACZ,gBALO,CAMrBa,OAAO,CAACX,OANa,CAOrBY,QAAQ,CAAEV,WAPW,CAQrBW,SAAS,CAACZ,YARW,CASrBa,KAAK,CAACX,QATe,CAUrBY,cAAc,CAAGZ,QAAQ,CAAChB,WAAV,CAAuB,CAAvB,CAA2BgB,QAAQ,CAAChB,WAApC,CAAkD,CAV7C,CAWrB6B,WAAW,CAAGb,QAAQ,CAAChB,WAAV,EAAwB,CAAxB,CAA2B,CAACgB,QAAQ,CAAChB,WAAV,EAA0B,CAAC,CAAtD,CAA0D,CAXlD,CAbA,CAAD,CAAnB,CA6BF,CAIF,CAtOA,CAwOA,GAAM+B,CAAAA,eAAe,CAAC,QAAhBA,CAAAA,eAAgB,CAAA/K,CAAC,CAAE,CACtB,GAAGA,CAAC,CAACuG,MAAF,CAASC,OAAZ,CAAoB,CAChB;AACAtD,UAAU,gCAAKD,OAAL,wBAAe,oBAAf,CAAsC,IAAtC,GAAV,CACAvB,mBAAmB,CAAC,EAAD,CAAnB,CACD,CAJH,IAIO,CACJ;AACCwB,UAAU,gCAAKD,OAAL,wBAAe,oBAAf,CAAsC,KAAtC,GAAV,CAED,CACJ,CAVF,CAYD,GAAM+H,CAAAA,cAAc,CAAC,QAAfA,CAAAA,cAAe,CAACpJ,MAAD,CAAU,CAC3B,GAAIpC,CAAAA,SAAS,CAAG,EAAhB,CACA;AACA,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGmC,MAAM,CAACX,MAAnC,CAA2CxB,KAAK,EAAhD,CAAoD,CAClD,GAAIwL,CAAAA,IAAI,CAAGrJ,MAAM,CAACnC,KAAD,CAAjB,CACAD,SAAS,CAACG,IAAV,CAAe,CAAEC,KAAK,CAAEqL,IAAI,CAAC/J,EAAd,CAAkBrB,KAAK,CAAEoL,IAAI,CAAC9J,WAA9B,CAAf,EAED,CACD,MAAO3B,CAAAA,SAAP,CACD,CATH,CAUF;AAEA;AACM,gBAA8CpG,QAAQ,CAAC,EAAD,CAAtD,2CAAO8R,eAAP,gBAAwBC,kBAAxB,gBACA,gBAA8D/R,QAAQ,CAAC,EAAD,CAAtE,2CAAOgS,uBAAP,gBAAgC/E,0BAAhC,gBACA,gBAA8CjN,QAAQ,CAAC,EAAD,CAAtD,2CAAO0M,eAAP,gBAAwBuF,kBAAxB,gBAEA,GAAMC,CAAAA,oBAAoB,CAAC,QAArBA,CAAAA,oBAAqB,CAAAtL,CAAC,CAAE,CAC5B,GAAIuL,CAAAA,EAAE,CAAGL,eAAe,CAAC9G,MAAhB,CAAuB,SAAAoH,GAAG,QAAIA,CAAAA,GAAG,CAAC5L,KAAJ,GAAcI,CAAC,CAACJ,KAApB,EAA1B,CAAT,CACAyG,0BAA0B,CAACkF,EAAD,CAA1B,CACF;AACC,CAJD,CAMN,GAAMzE,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAE/BzL,WAAW,CAAC,OAAD,CAAU,CAAEqF,UAAU,CAAE,UAAd,CAA0BC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAAhC,CAAV,CAAX,CACGC,IADH,CACQ,SAAUF,IAAV,CAAgB,CACpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CACA,GAAIxB,CAAAA,SAAS,CAAG,EAAhB,CACA;AACA,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGmC,MAAM,CAACX,MAAnC,CAA2CxB,KAAK,EAAhD,CAAoD,CAClD;AACA,GAAIwL,CAAAA,IAAI,CAAGrJ,MAAM,CAACnC,KAAD,CAAjB,CACAD,SAAS,CAACG,IAAV,CAAe,CAAEC,KAAK,CAAEqL,IAAI,CAAC/J,EAAd,CAAkBrB,KAAK,CAAEoL,IAAI,CAAC9J,WAA9B,CAAf,EACA,GAAI3B,SAAS,CAACyB,MAAV,GAAqB,CAAzB,CAA4B,CAC1B;AACD,CACF,CACDkK,kBAAkB,CAAC3L,SAAD,CAAlB,CACD,CAbD,IAaO,CACL;AACD,CACF,CAlBH,EAmBG4B,KAnBH,CAmBS,SAAUC,KAAV,CAAiB,CACtBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CArBH,EAuBD,CAzBD,CA0BA;AAEA;AACA,gBAAsC1G,QAAQ,CAAC,EAAD,CAA9C,2CAAOqS,WAAP,gBAAoBC,cAApB,gBACA,gBAAoCtS,QAAQ,CAAC,EAAD,CAA5C,2CAAOuS,UAAP,gBAAmBC,aAAnB,gBACA,gBAA8CxS,QAAQ,CAAC,EAAD,CAAtD,2CAAOyS,eAAP,gBAAwBzF,kBAAxB,gBAEA,GAAMW,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB1L,WAAW,CAAC,SAAD,CAAY,CAAEqF,UAAU,CAAE,YAAd,CAA4BC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAAlC,CAAZ,CAAX,CACGC,IADH,CACQ,SAAUF,IAAV,CAAgB,CACpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CACA,GAAIxB,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAIsM,CAAAA,MAAM,CAAG,EAAb,CACA,IAAK,GAAIrM,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGmC,MAAM,CAACX,MAAnC,CAA2CxB,KAAK,EAAhD,CAAoD,CAClD;AACA,GAAIsM,CAAAA,CAAC,CAAGnK,MAAM,CAACnC,KAAD,CAAd,CACAqM,MAAM,CAACnM,IAAP,CAAY,CACVC,KAAK,CAAEmM,CAAC,CAAC7K,EADC,CAEVrB,KAAK,CAAEkM,CAAC,CAAC5K,WAFC,CAAZ,EAIA,GAAI4K,CAAC,CAACC,QAAF,EAAc,GAAlB,CAAuB,CACrB,GAAGD,CAAC,CAAC7K,EAAF,EAAM,CAAT,CAAW,CAET,GAAI+K,CAAAA,UAAU,CAAGF,CAAC,CAAC5K,WAAnB,CACA3B,SAAS,CAACG,IAAV,CAAe,CACbuB,EAAE,CAAE6K,CAAC,CAAC7K,EADO,CAEbrB,KAAK,CAAEoM,UAFM,CAGbzF,OAAO,CAAE,IAHI,CAIbxE,KAAK,CAAE+J,CAAC,CAAC/J,KAJI,CAAf,EAMD,CATD,IASK,CACH,GAAIiK,CAAAA,UAAU,CAAGF,CAAC,CAAC5K,WAAnB,CACA3B,SAAS,CAACG,IAAV,CAAe,CACbuB,EAAE,CAAE6K,CAAC,CAAC7K,EADO,CAEbrB,KAAK,CAAEoM,UAFM,CAGbzF,OAAO,CAAE,KAHI,CAIbxE,KAAK,CAAE+J,CAAC,CAAC/J,KAJI,CAAf,EAMD,CAEF,CAEF,CACD0J,cAAc,CAAClM,SAAD,CAAd,CAEAoM,aAAa,CAACE,MAAD,CAAb,CAED,CAtCD,IAsCO,CAEN,CAEF,CA5CH,EA6CG1K,KA7CH,CA6CS,SAAUC,KAAV,CAAiB,CACtBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CA/CH,EAiDD,CAlDD,CAmDA;AAEA;AACA,gBAAsC1G,QAAQ,CAAC,EAAD,CAA9C,2CAAOiM,WAAP,gBAAoB6G,cAApB,gBACA,GAAMC,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAAA1M,KAAK,QAAI,UAAAO,CAAC,CAAI,CACtC0D,OAAO,CAACC,GAAR,CAAY,UAAYlE,KAAxB,EACAiE,OAAO,CAACC,GAAR,CAAY,kBAAmB3D,CAAC,CAACuG,MAAF,CAAS3G,KAAxC,EACA,GAAIwM,CAAAA,MAAM,oBAAOnJ,OAAO,CAACF,OAAf,CAAV,CAAmC;AACnCqJ,MAAM,CAAC3M,KAAD,CAAN,CAAc+F,GAAd,CAAoB6G,KAAK,CAAC3G,UAAU,CAAC1F,CAAC,CAACuG,MAAF,CAAS3G,KAAV,CAAX,CAAL,EAAmC,KAAnC,CAA0C8F,UAAU,CAAC1F,CAAC,CAACuG,MAAF,CAAS3G,KAAV,CAApD,CAAqE,CAAzF,CAA4F;AAC3F;AAEAsD,UAAU,CAAC,SAAAuD,SAAS,wCACfA,SADe,MAElB1D,OAAO,CAAEqJ,MAFS,IAAV,CAAV,CAMA;AACJ;AACH,CAfmC,EAApC,CAoBA,GAAMpF,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB;AACA3L,WAAW,CAAC,SAAD,CAAY,CAAEqF,UAAU,CAAE,YAAd,CAA4BC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAAlC,CAAZ,CAAX,CACGC,IADH,CACQ,SAAUF,IAAV,CAAgB,CACpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CACA,IAAK,GAAIvB,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGmC,MAAM,CAACX,MAAnC,CAA2CxB,KAAK,EAAhD,CAAoD,CAChD,GAAIoC,CAAAA,OAAO,CAAGD,MAAM,CAACnC,KAAD,CAApB,CACAoC,OAAO,CAAC2D,GAAR,CAAY,CAAZ,CACH,CACD0G,cAAc,CAACtK,MAAD,CAAd,CACD,CAPD,IAOO,CACL;AACD,CACF,CAZH,EAaGR,KAbH,CAaS,SAAUC,KAAV,CAAiB,CACtBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CAfH,EAmBD,CArBH,CAsBA;AACA,GAAMwM,CAAAA,IAAI,CAAC,QAALA,CAAAA,IAAK,EAAI,CAEd,CAFD,CAGA;AACC,gBAAgDlT,QAAQ,CAAC,EAAD,CAAxD,2CAAOmT,gBAAP,gBAAyBC,mBAAzB,gBACA,gBAAsCpT,QAAQ,CAAC,EAAD,CAA9C,2CAAOqT,WAAP,gBAAoBC,cAApB,gBACA,gBAA4CtT,QAAQ,CAAC,EAAD,CAApD,2CAAOuT,cAAP,gBAAuBC,iBAAvB,gBACA,gBAAoDxT,QAAQ,CAAC,GAAI2E,CAAAA,IAAJ,EAAD,CAA5D,2CAAO8O,kBAAP,gBAA2BC,qBAA3B,gBACA,gBAA0D1T,QAAQ,EAAlE,2CAAO2T,qBAAP,gBAA8BC,wBAA9B,gBACA,gBAAoD5T,QAAQ,CAAC,KAAD,CAA5D,2CAAO6T,kBAAP,gBAA2BC,qBAA3B,gBAEA,gBAAgD9T,QAAQ,CAAC,KAAD,CAAxD,2CAAO+T,gBAAP,gBAAyBC,mBAAzB,gBACA,gBAA8ChU,QAAQ,CAAC,KAAD,CAAtD,2CAAOiU,eAAP,gBAAwB/J,kBAAxB,gBAEA,GAAMgK,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACtN,CAAD,CAAO,CAC7B,eAAsBA,CAAC,CAACuG,MAAxB,CAAQrF,EAAR,YAAQA,EAAR,CAAYtB,KAAZ,YAAYA,KAAZ,CAEA,GAAII,CAAC,CAACuG,MAAF,CAASjK,IAAT,GAAkB,UAAtB,CAAmC,CACjCoQ,cAAc,gCAAKD,WAAL,wBAAmBvL,EAAnB,CAAyBlB,CAAC,CAACuG,MAAF,CAASC,OAAT,EAAkB,IAAlB,CAAuBxG,CAAC,CAACuG,MAAF,CAASC,OAAhC,CAAwC,KAAjE,GAAd,CACA,GAAGxG,CAAC,CAACuG,MAAF,CAASC,OAAZ,CAAoB,CACnB,OAAQtF,EAAR,EACE,IAAK,kBAAL,CAEEuL,WAAW,CAACxH,wBAAZ,CAAqC,KAArC,CACAwH,WAAW,CAAC7O,OAAZ,CAAoB,EAApB,CACA6O,WAAW,CAACc,OAAZ,CAAoB,EAApB,CACAd,WAAW,CAACe,YAAZ,CAAyB,EAAzB,CACAZ,iBAAiB,CAAC,wBAAD,CAAjB,CACA,MAEF,QACE,MAXJ,CAaA,CAdD,IAcK,CACJ,OAAQ1L,EAAR,EACE,IAAK,kBAAL,CAEEuL,WAAW,CAACxH,wBAAZ,CAAqC,KAArC,CACAwH,WAAW,CAAC7O,OAAZ,CAAoB,EAApB,CACA6O,WAAW,CAACc,OAAZ,CAAoB,EAApB,CACAd,WAAW,CAACe,YAAZ,CAAyB,EAAzB,CACAZ,iBAAiB,CAAC,EAAD,CAAjB,CACA,MAEF,QACE,MAXJ,CAaA,CAEF,CAhCD,IAgCK,CACHF,cAAc,gCAAKD,WAAL,wBAAkBvL,EAAlB,CAAsBtB,KAAtB,GAAd,CACD,CAIH,CAzCA,CA2CD,GAAM6N,CAAAA,qBAAqB,CAAC,QAAtBA,CAAAA,qBAAsB,CAAAzN,CAAC,CAAE,CAC7ByM,WAAW,CAACiB,MAAZ,CAAmB1N,CAAC,CAACJ,KAArB,CAEAoN,wBAAwB,CAAChN,CAAC,CAACJ,KAAH,CAAxB,CACD,CAJD,CAMA,GAAM+N,CAAAA,QAAQ,CAAC,QAATA,CAAAA,QAAS,CAACC,GAAD,CAAM5N,CAAN,CAAW,CAGxB,GAAIuC,CAAAA,QAAQ,CAAC,GAAIxE,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,aAA1C,CAAT,CAAb,CACA,GAAIC,CAAAA,OAAO,CAAC,GAAI/P,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACwC,WAAjB,CAAD,CAAN,CAAsCoI,MAAtC,CAA6C,aAA7C,CAAT,CAAZ,CACA,GAAGC,OAAO,CAACvL,QAAX,CAAoB,CAClBlG,MAAM,CAAC,CAAD,CAAI,2CAAJ,CAAN,CACA,OACD,CAGD,GAAGuR,GAAG,EAAE,CAAC,CAAT,CAAW,CACT5N,CAAC,CAAC,CACA+N,eAAe,CAAE,EADjB,CAEAC,QAAQ,CAAE,EAFV,CAGAC,SAAS,CAAE,GAHX,CAIA/I,OAAO,CAAE,KAJT,CAKAgJ,GAAG,CAAExS,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,EAAD,CAAN,CAAmB8P,MAAnB,CAA0B,YAA1B,CALL,CAMAjQ,OAAO,CAAE,EANT,CAOAuQ,SAAS,CAAE,EAPX,CAQAT,MAAM,CAAE,EARR,CASA/K,OAAO,CAAE,EATT,CAUA8B,UAAU,CAAE,KAVZ,CAWAC,mBAAmB,CAAE,KAXrB,CAYAC,kBAAkB,CAAE,KAZpB,CAaAC,eAAe,CAAE,KAbjB,CAcAC,SAAS,CAAE,KAdX,CAeAC,cAAc,CAAE,KAfhB,CAgBAC,gBAAgB,CAAE,KAhBlB,CAiBAE,wBAAwB,CAAE,KAjB1B,CAkBAmJ,+BAA+B,CAAC,KAlBhC,CAmBAC,QAAQ,CAAE,EAnBV,CAoBAC,YAAY,CAAE,EApBd,CAqBAC,cAAc,CAAE,MArBhB,CAsBAC,aAAa,CAAE,GAtBf,CAuBAC,UAAU,CAAE,IAvBZ,CAwBAC,MAAM,CAAE,IAxBR,CAyBAC,IAAI,CAAE,IAzBN,CA0BAC,SAAS,CAAE,EA1BX,CA2BAC,WAAW,CAAE,EA3Bb,CA4BAlT,IAAI,CAACA,IAAI,EA5BT,CAAF,CA+BD,CAID6Q,mBAAmB,CAAC,CAACD,gBAAF,CAAnB,CACAG,cAAc,CAAC1M,CAAD,CAAd,CACA8M,qBAAqB,CAAC,GAAI/O,CAAAA,IAAJ,CAASiC,CAAC,CAACkO,GAAX,CAAD,CAArB,CACAlB,wBAAwB,CAACtH,UAAU,CAAC1F,CAAC,CAAC0N,MAAH,CAAX,CAAxB,CACAoB,oBAAoB,CAAC9O,CAAC,CAACiO,SAAH,CAApB,CACAc,iBAAiB,CAAC/O,CAAC,CAACwO,aAAH,CAAjB,CACA,GAAIQ,CAAAA,gBAAgB,CAAGC,eAAe,CAAC7K,MAAhB,CAAuB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACmM,UAAF,EAAczO,CAAC,CAACyO,UAAlB,EAAxB,CAAvB,CACA,GAAIS,CAAAA,oBAAoB,CAAClE,cAAc,CAACgE,gBAAD,CAAvC,CACAG,eAAe,CAACD,oBAAD,CAAf,CACAE,sBAAsB,CAACpP,CAAC,CAACyO,UAAH,CAAtB,CACAY,uBAAuB,CAACrP,CAAC,CAACuO,cAAH,CAAvB,CACD,CA1DD,CA4DA,GAAMe,CAAAA,sBAAsB,CAAE,QAAxBA,CAAAA,sBAAwB,CAAC1B,GAAD,CAAM5N,CAAN,CAAW,CACvC,GAAIuC,CAAAA,QAAQ,CAAC,GAAIxE,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,aAA1C,CAAT,CAAb,CACA,GAAIC,CAAAA,OAAO,CAAC,GAAI/P,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACwC,WAAjB,CAAD,CAAN,CAAsCoI,MAAtC,CAA6C,aAA7C,CAAT,CAAZ,CACA,GAAGC,OAAO,CAACvL,QAAX,CAAoB,CAClBlG,MAAM,CAAC,CAAD,CAAI,2CAAJ,CAAN,CACA,OACD,CACDqQ,cAAc,CAAC1M,CAAD,CAAd,CACAkN,qBAAqB,CAAC,CAACD,kBAAF,CAArB,CACD,CATD,CAUA,GAAMsC,CAAAA,aAAa,CAAE,QAAfA,CAAAA,aAAe,EAAI,CAEvB,GAAMC,CAAAA,OAAO,CAAGvM,OAAO,CAAC,aAAD,CAAP,CAAuBZ,GAAvB,CAA2B,SAAC4I,IAAD,CAAU,CACnD,GAAIA,IAAI,CAACtP,IAAL,GAAa8Q,WAAW,CAAC9Q,IAA7B,CAAmC,CACjC,GAAM8T,CAAAA,WAAW,gCACZxE,IADY,MAEf8C,eAAe,CAAEtB,WAAW,CAACsB,eAFd,CAGfC,QAAQ,CAAEvB,WAAW,CAACuB,QAHP,CAIfC,SAAS,CAAGxB,WAAW,CAACwB,SAJT,CAKfC,GAAG,CAAEzB,WAAW,CAACyB,GALF,CAMftQ,OAAO,CAAE6O,WAAW,CAAC7O,OANN,CAOfuQ,SAAS,CAAE1B,WAAW,CAAC0B,SAPR,CAQfT,MAAM,CAAEjB,WAAW,CAACiB,MARL,CASf/K,OAAO,CAAE8J,WAAW,CAAC9J,OATN,CAUf8B,UAAU,CAAEgI,WAAW,CAAChI,UAVT,CAWfC,mBAAmB,CAAE+H,WAAW,CAAC/H,mBAXlB,CAYfC,kBAAkB,CAAE8H,WAAW,CAAC9H,kBAZjB,CAafC,eAAe,CAAG6H,WAAW,CAAC7H,eAbf,CAcfC,SAAS,CAAE4H,WAAW,CAAC5H,SAdR,CAefC,cAAc,CAAG2H,WAAW,CAAC3H,cAfd,CAgBfC,gBAAgB,CAAG0H,WAAW,CAAC1H,gBAhBhB,CAiBfE,wBAAwB,CAAEwH,WAAW,CAACxH,wBAjBvB,CAkBfoJ,QAAQ,CAAE5B,WAAW,CAAC4B,QAlBP,CAmBfC,YAAY,CAAE7B,WAAW,CAAC6B,YAnBX,CAoBfC,cAAc,CAAE9B,WAAW,CAAC8B,cApBb,CAqBfC,aAAa,CAAE/B,WAAW,CAAC+B,aArBZ,CAsBfC,UAAU,CAAEhC,WAAW,CAACgC,UAtBT,CAuBfC,MAAM,CAAEjC,WAAW,CAACiC,MAvBL,CAwBfC,IAAI,CAAElC,WAAW,CAACkC,IAxBH,CAyBfC,SAAS,CAAEnC,WAAW,CAACmC,SAzBR,CA0BfC,WAAW,CAACpC,WAAW,CAACoC,WA1BT,CA2Bf3J,OAAO,CAAC,IA3BO,EAAjB,CA8BA,MAAOuK,CAAAA,WAAP,CACD,CAED,MAAOxE,CAAAA,IAAP,CACD,CApCe,CAAhB,CAsCA/H,UAAU,gCAAKD,OAAL,wBAAe,aAAf,CAA+BuM,OAA/B,GAAV,CACAtC,qBAAqB,CAAC,CAACD,kBAAF,CAArB,CACD,CA1CD,CA2CC;AAED;AACA,gBAAsC7T,QAAQ,CAAC,EAAD,CAA9C,2CAAOsW,WAAP,gBAAoBC,cAApB,gBACA,gBAAiDvW,QAAQ,CAAC,EAAD,CAAzD,2CAAOwW,iBAAP,gBAAyBd,oBAAzB,gBACA,GAAM7H,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3B5L,WAAW,CAAC,aAAD,CAAgB,CAAEqF,UAAU,CAAE,gBAAd,CAAgCC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAAtC,CAAhB,CAAX,CACGC,IADH,CACQ,SAAUF,IAAV,CAAgB,CACpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CACA,GAAIxB,CAAAA,SAAS,CAAG,EAAhB,CACA;AAEA,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGmC,MAAM,CAACX,MAAnC,CAA2CxB,KAAK,EAAhD,CAAoD,CAClD;AACA,GAAIwL,CAAAA,IAAI,CAAGrJ,MAAM,CAACnC,KAAD,CAAjB,CACAD,SAAS,CAACG,IAAV,CAAe,CAAEC,KAAK,CAAEqL,IAAI,CAAC/J,EAAd,CAAkBrB,KAAK,CAAEoL,IAAI,CAAC9J,WAA9B,CAAf,EAED,CAEDwO,cAAc,CAACnQ,SAAD,CAAd,CACD,CAbD,IAaO,CACL;AACD,CACF,CAlBH,EAmBG4B,KAnBH,CAmBS,SAAUC,KAAV,CAAiB,CACtBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CArBH,EAuBD,CAxBD,CA0BA,GAAM+P,CAAAA,iBAAiB,CAAC,QAAlBA,CAAAA,iBAAkB,CAAA7P,CAAC,CAAE,CACzB8O,oBAAoB,CAAC9O,CAAC,CAACJ,KAAH,CAApB,CACD,CAFD,CAIA;AAEA;AAEA,gBAA8BxG,QAAQ,CAAC,EAAD,CAAtC,2CAAO0W,OAAP,gBAAgBC,UAAhB,gBACA,gBAA4C3W,QAAQ,CAAC,EAAD,CAApD,2CAAO4W,cAAP,gBAAuBjB,iBAAvB,gBACA,GAAM7H,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CAEvB7L,WAAW,CAAC,SAAD,CAAY,CAAEqF,UAAU,CAAE,YAAd,CAA4BC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAAlC,CAAZ,CAAX,CACGC,IADH,CACQ,SAAUF,IAAV,CAAgB,CACpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CACA,GAAIxB,CAAAA,SAAS,CAAG,EAAhB,CACA;AACD;AACC,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGmC,MAAM,CAACX,MAAnC,CAA2CxB,KAAK,EAAhD,CAAoD,CAClD;AACA,GAAIwL,CAAAA,IAAI,CAAGrJ,MAAM,CAACnC,KAAD,CAAjB,CACAD,SAAS,CAACG,IAAV,CAAe,CAAEC,KAAK,CAAEqL,IAAI,CAAC/J,EAAd,CAAkBrB,KAAK,CAAEoL,IAAI,CAAC9J,WAA9B,CAAf,EAED,CACD4O,UAAU,CAACvQ,SAAD,CAAV,CACD,CAZD,IAYO,CACL;AACD,CACF,CAjBH,EAkBG4B,KAlBH,CAkBS,SAAUC,KAAV,CAAiB,CACtBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CApBH,EAsBD,CAxBD,CAyBA,GAAMmQ,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAjQ,CAAC,CAAG,CAC7B+O,iBAAiB,CAAC/O,CAAC,CAACJ,KAAH,CAAjB,CACD,CAFD,CAIA;AAEA;AAEA,gBAAgCxG,QAAQ,CAAC,EAAD,CAAxC,2CAAO8W,QAAP,gBAAiBC,WAAjB,gBACA,gBAAsC/W,QAAQ,CAAC,EAAD,CAA9C,2CAAOgX,WAAP,gBAAoBC,cAApB,gBACA,gBAAsDjX,QAAQ,CAAC,EAAD,CAA9D,2CAAOkX,mBAAP,gBAA4BlB,sBAA5B,gBACA,GAAMjI,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB9L,WAAW,CAAC,UAAD,CAAa,CAAEqF,UAAU,CAAE,aAAd,CAA6BC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAAnC,CAAb,CAAX,CACCC,IADD,CACM,SAAUF,IAAV,CAAgB,CACpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CAEAqP,cAAc,CAACzO,MAAD,CAAd,CACA,GAAI2O,CAAAA,YAAY,CAACvF,cAAc,CAACpJ,MAAD,CAA/B,CACAuO,WAAW,CAACI,YAAD,CAAX,CACD,CAND,IAMO,CACL;AACD,CACF,CAXD,EAYCnP,KAZD,CAYO,SAAUC,KAAV,CAAiB,CACtBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CAdD,EAgBD,CAjBD,CAmBA,GAAM0Q,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAAAxQ,CAAC,CAAG,CAElCoP,sBAAsB,CAACpP,CAAC,CAACJ,KAAH,CAAtB,CACA,GAAIoP,CAAAA,gBAAgB,CAAGC,eAAe,CAAC7K,MAAhB,CAAuB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACmM,UAAF,EAAczO,CAAC,CAACJ,KAAlB,EAAxB,CAAvB,CACA,GAAIsP,CAAAA,oBAAoB,CAAClE,cAAc,CAACgE,gBAAD,CAAvC,CACAK,uBAAuB,CAACH,oBAAoB,CAAC,CAAD,CAApB,CAAwBtP,KAAzB,CAAvB,CACAuP,eAAe,CAACD,oBAAD,CAAf,CAGD,CATD,CAWA;AACA;AACA,gBAAwC9V,QAAQ,CAAC,EAAD,CAAhD,2CAAOqX,YAAP,gBAAqBtB,eAArB,gBACA,gBAA8C/V,QAAQ,CAAC,EAAD,CAAtD,2CAAO6V,eAAP,gBAAwByB,kBAAxB,gBACA,gBAAwDtX,QAAQ,CAAC,EAAD,CAAhE,2CAAOuX,oBAAP,gBAA6BtB,uBAA7B,gBACA,GAAMjI,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAE9B/L,WAAW,CAAC,cAAD,CAAiB,CAAEqF,UAAU,CAAE,iBAAd,CAAiCC,IAAI,CAAE,CAAEC,IAAI,CAAE,GAAR,CAAvC,CAAjB,CAAX,CACGC,IADH,CACQ,SAAUF,IAAV,CAAgB,CACpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CACA,GAAIxB,CAAAA,SAAS,CAAG,EAAhB,CACA;AACA,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGmC,MAAM,CAACX,MAAnC,CAA2CxB,KAAK,EAAhD,CAAoD,CAClD;AACA,GAAIwL,CAAAA,IAAI,CAAGrJ,MAAM,CAACnC,KAAD,CAAjB,CACAD,SAAS,CAACG,IAAV,CAAe,CAAEC,KAAK,CAAEqL,IAAI,CAAC/J,EAAd,CAAkBrB,KAAK,CAAEoL,IAAI,CAAC9J,WAA9B,CAAf,EACA,GAAI3B,SAAS,CAACyB,MAAV,GAAqB,CAAzB,CAA4B,CAC1BoO,uBAAuB,CAACpE,IAAI,CAAC/J,EAAN,CAAvB,CACD,CACF,CACF;AACCwP,kBAAkB,CAAC9O,MAAD,CAAlB,CACD,CAdD,IAcO,CACL;AACD,CACF,CAnBH,EAoBGR,KApBH,CAoBS,SAAUC,KAAV,CAAiB,CACtBhF,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CAtBH,EAyBC,CA3BH,CA4BE,GAAM8Q,CAAAA,2BAA2B,CAAG,QAA9BA,CAAAA,2BAA8B,CAAA5Q,CAAC,CAAG,CACtCqP,uBAAuB,CAACrP,CAAC,CAACJ,KAAH,CAAvB,CACD,CAFD,CAKF;AAMA,gBAAqCxG,QAAQ,CAAC,KAAD,CAA7C,2CAAOyX,YAAP,gBAAoBC,eAApB,gBACA,gBAAiE1X,QAAQ,CAAC,KAAD,CAAzE,2CAAO2X,0BAAP,gBAAkCC,6BAAlC,gBACA,gBAA6C5X,QAAQ,CAAC,EAAD,CAArD,2CAAO6X,gBAAP,gBAAwBhH,mBAAxB,gBACA,GAAMiH,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,EAAI,CACtBF,6BAA6B,CAAC,IAAD,CAA7B,CAEA,GAAGvE,WAAW,CAAC0B,SAAZ,EAAuB,EAA1B,CAA6B,CAC3B9R,MAAM,CAAC,CAAD,CAAG,0BAAH,CAAN,CACA,OAED,CAJD,IAIM,IAAGoQ,WAAW,CAAC4B,QAAZ,EAAsB,EAAzB,CAA4B,CAChChS,MAAM,CAAC,CAAD,CAAG,yBAAH,CAAN,CACA,OACD,CAHK,IAGD,CACHhB,WAAW,CAAC,aAAD,CAAgB,CAAEqF,UAAU,CAAE,qBAAd,CAAqCC,IAAI,CAAE,CACpEwN,SAAS,CAAC1B,WAAW,CAAC0B,SAD8C,CAEpEE,QAAQ,CAAC5B,WAAW,CAAC4B,QAF+C,CAGpEH,GAAG,CAACxS,MAAM,CAAC+Q,WAAW,CAACI,kBAAb,CAAN,CAAuCgB,MAAvC,CAA8C,YAA9C,CAHgE,CAIpEH,MAAM,CAACX,qBAJ6D,CAA3C,CAAhB,CAAX,CAMGlM,IANH,CAMQ,SAAUF,IAAV,CAAgB,CAEpBqQ,6BAA6B,CAAC,KAAD,CAA7B,CAEA,GAAIrQ,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvB,GAAIc,CAAAA,MAAM,CAACjB,IAAI,CAACK,WAAL,CAAiB,CAAjB,CAAX,CACA,GAAGY,MAAM,CAACuP,WAAP,EAAoB,CAAvB,CAAyB,CAEzB1E,WAAW,CAACxH,wBAAZ,CAAqC,IAArC,CACAwH,WAAW,CAAC7O,OAAZ,CAAoBgE,MAAM,CAAChE,OAA3B,CACA6O,WAAW,CAACuB,QAAZ,CAAqBpM,MAAM,CAACoM,QAA5B,CACAvB,WAAW,CAAC6B,YAAZ,CAAyB1M,MAAM,CAAC0M,YAAhC,CAEAQ,oBAAoB,CAAClN,MAAM,CAACqM,SAAR,CAApB,CACAc,iBAAiB,CAACnN,MAAM,CAAC4M,aAAR,CAAjB,CAEA;AAEA;AACA;AACA;AACA;AAED;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACU5B,iBAAiB,CAAC,EAAD,CAAjB,CACF;AACG,CAEF,CAhCD,IAgCO,CACN;AACAH,WAAW,CAACxH,wBAAZ,CAAqC,KAArC,CACA2H,iBAAiB,CAAC,iCAAD,CAAjB,CACA,CACF,CA/CH,EAgDGxL,KAhDH,CAgDS,SAAUC,KAAV,CAAiB,CACtB2P,6BAA6B,CAAC,KAAD,CAA7B,CACA3U,MAAM,CAAC,CAAD,CAAIgF,KAAK,CAACvB,QAAN,EAAJ,CAAsB,CAAtB,CAAN,CACD,CAnDH,EAoDD,CAEF,CAjED,CAmEA,GAAMsR,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,EAAI,CACxB,GAAIC,CAAAA,WAAW,CAACpO,OAAO,CAACD,WAAR,CAAoBoB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC3G,IAAF,EAAQ8Q,WAAW,CAAC9Q,IAAtB,EAA5B,CAAhB,CACA,GAAG0V,WAAW,CAACpQ,MAAZ,CAAmB,CAAtB,CAAwB,CACtB,GAAMuO,CAAAA,OAAO,CAAGvM,OAAO,CAAC,aAAD,CAAP,CAAuBZ,GAAvB,CAA2B,SAAC4I,IAAD,CAAU,CACnD,GAAIA,IAAI,CAAC2D,SAAL,GAAkBnC,WAAW,CAACmC,SAAlC,CAA6C,CAC3C,GAAMa,CAAAA,WAAW,gCACZxE,IADY,MAEf8C,eAAe,CAAEtB,WAAW,CAACsB,eAFd,CAGfC,QAAQ,CAAEvB,WAAW,CAACuB,QAHP,CAIfC,SAAS,CAAG2B,iBAJG,CAKf1B,GAAG,CAAEzB,WAAW,CAACyB,GALF,CAMftQ,OAAO,CAAE6O,WAAW,CAAC7O,OANN,CAOfuQ,SAAS,CAAE1B,WAAW,CAAC0B,SAPR,CAQfT,MAAM,CAAEX,qBARO,CASfpK,OAAO,CAAE8J,WAAW,CAAC9J,OATN,CAUf8B,UAAU,CAAEgI,WAAW,CAAChI,UAVT,CAWfC,mBAAmB,CAAE+H,WAAW,CAAC/H,mBAXlB,CAYfC,kBAAkB,CAAE8H,WAAW,CAAC9H,kBAZjB,CAafC,eAAe,CAAG6H,WAAW,CAAC7H,eAbf,CAcfC,SAAS,CAAE4H,WAAW,CAAC5H,SAdR,CAefC,cAAc,CAAG2H,WAAW,CAAC3H,cAfd,CAgBfC,gBAAgB,CAAG0H,WAAW,CAAC1H,gBAhBhB,CAiBfE,wBAAwB,CAAEwH,WAAW,CAACxH,wBAjBvB,CAkBfoJ,QAAQ,CAAE5B,WAAW,CAAC4B,QAlBP,CAmBfC,YAAY,CAAE7B,WAAW,CAAC6B,YAnBX,CAoBfC,cAAc,CAAEoC,oBApBD,CAqBfnC,aAAa,CAAEwB,cArBA,CAsBfvB,UAAU,CAAE6B,mBAtBG,CAuBf5B,MAAM,CAAEjC,WAAW,CAACiC,MAvBL,CAwBfC,IAAI,CAAElC,WAAW,CAACkC,IAxBH,CAyBfC,SAAS,CAAEnC,WAAW,CAACmC,SAzBR,CA0BfC,WAAW,CAACpC,WAAW,CAACoC,WA1BT,EAAjB,CA6BA,MAAOY,CAAAA,WAAP,CACD,CAED,MAAOxE,CAAAA,IAAP,CACD,CAnCe,CAAhB,CAqCA/H,UAAU,gCAAKD,OAAL,wBAAe,aAAf,CAA+BuM,OAA/B,GAAV,CACD,CAvCD,IAuCK,CACHtM,UAAU,CAAC,SAAAuD,SAAS,wCACfA,SADe,MAElBzD,WAAW,8BAAMC,OAAO,CAACD,WAAd,GAA0ByJ,WAA1B,EAFO,IAAV,CAAV,CAID,CAGCD,mBAAmB,CAAC,CAACD,gBAAF,CAAnB,CAID,CArDD,CAsDA,GAAM+E,CAAAA,QAAQ,CAAC,QAATA,CAAAA,QAAS,EAAI,CAEjB,GAAG9S,QAAQ,EAAE,CAAV,EAAeE,WAAW,EAAE,CAA/B,CAAiC,CACjC;AACA,GAAMuK,CAAAA,QAAQ,CAAGvB,IAAI,CAACC,GAAL,CAAS,GAAI5J,CAAAA,IAAJ,CAASkF,OAAO,CAACT,MAAjB,EAA2B,GAAIzE,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAApC,CAAjB,CACC;AACG,GAAI2G,CAAAA,QAAQ,CAAGxB,IAAI,CAACG,IAAL,CAAUoB,QAAQ,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAlB,CAAf,CACA,GAAGC,QAAQ,EAAE,CAAV,EAAeA,QAAQ,EAAE,CAA5B,CAA8B,CAC5BA,QAAQ,CAAC,CAAT,CACD,CACD,GAAIqI,CAAAA,QAAQ,CAAC,EAAb,CACA,GAAI3H,CAAAA,OAAO,CAAC,CAAZ,CACA,GAAG,CAAC3G,OAAO,CAACH,kBAAZ,CAA+B,CAC7B,GAAGrB,gBAAgB,CAACR,MAAjB,CAAwB,CAA3B,CAA6B,4BACnBwH,EADmB,EAE1B,GAAIC,CAAAA,OAAO,CAAGjH,gBAAgB,CAACgH,EAAD,CAA9B,CACA,GAAIE,CAAAA,UAAU,CAACpH,QAAQ,CAAC6C,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAAS8I,OAAX,EAAjB,CAAf,CACA,GAAGC,UAAU,CAAC1H,MAAX,CAAkB,CAArB,CAAuB,CACrB2I,OAAO,CAAC,CAAElE,UAAU,CAACiD,UAAU,CAAC,CAAD,CAAV,CAAc3G,KAAf,CAApB,CACAuP,QAAQ,CAAC5R,IAAT,CAAcgJ,UAAU,CAAC,CAAD,CAAxB,EACD,CAPyB,EAC5B,IAAK,GAAIF,CAAAA,EAAE,CAAG,CAAd,CAAiBA,EAAE,CAAGhH,gBAAgB,CAACR,MAAvC,CAA+CwH,EAAE,EAAjD,CAAqD,QAA5CA,EAA4C,EAQpD,CACD,CAEF,CACD,GAAI+I,CAAAA,GAAG,CAAG9J,IAAI,CAAC+J,KAAL,CAAW,KAAO/J,IAAI,CAACgK,MAAL,GAAgB,IAAlC,CAAV,CACA,GAAIC,CAAAA,UAAU,CAAG,CACfpP,QAAQ,CAAE7G,MAAM,CAACuH,OAAO,CAACV,QAAT,CAAN,CAAyBsL,MAAzB,CAAgC,YAAhC,CADK,CAEfrL,MAAM,CAAE9G,MAAM,CAACuH,OAAO,CAACT,MAAT,CAAN,CAAuBqL,MAAvB,CAA8B,YAA9B,CAFO,CAGf+D,YAAY,CAAE1I,QAHC,CAIfxG,WAAW,CAAEO,OAAO,CAACP,WAJN,CAKfD,GAAG,CAAEQ,OAAO,CAACD,WAAR,CAAoBoB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAA5B,EAAgDjE,MALtC,CAMf4Q,WAAW,CAAEN,QANE,CAOfrG,eAAe,CAACA,eAAe,CAAC9G,MAAhB,CAAuB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAASwL,uBAAuB,CAACxL,KAAnC,EAAxB,CAPD,CAQfkS,SAAS,CAAEN,GARI,CASfO,mBAAmB,CAAE,EATN,CAUfC,WAAW,CAAE/O,OAAO,CAACD,WAAR,CAAoBoB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAA5B,CAVE,CAWf+M,WAAW,CAAE,EAXE,CAYfC,eAAe,CAAEjP,OAAO,CAACF,OAAR,CAAgBqB,MAAhB,CAAuB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACkD,GAAF,CAAM,CAAR,EAAxB,EAAmCvE,MAZrC,CAafkR,eAAe,CAAClP,OAAO,CAACF,OAAR,CAAgBqB,MAAhB,CAAuB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACkD,GAAF,CAAM,CAAR,EAAxB,CAbD,CAcfiG,WAAW,CAACxI,OAAO,CAACc,OAdL,CAeflB,MAAM,CAACtC,gBAfQ,CAgBfuC,kBAAkB,CAACG,OAAO,CAACH,kBAAR,EAA4B,IAA5B,CAAiC,GAAjC,CAAqC,GAhBzC,CAiBfsP,UAAU,CAAC/R,QAAQ,CAAC+D,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAASW,gBAAX,EAAjB,CAjBI,CAkBfwF,aAAa,CAAE9C,OAAO,CAAC8C,aAAR,EAAuB,IAAvB,CAA4B,GAA5B,CAAgC,GAlBhC,CAmBfD,eAAe,CAAC7C,OAAO,CAAC4C,iBAnBT,CAoBfwM,WAAW,CAAC,EApBG,CAqBfC,WAAW,CAAC9T,QArBG,CAsBf+T,sBAAsB,CAAC,EAtBR,CAuBfC,UAAU,CAAC,EAvBI,CAwBfxM,SAAS,CAAC/C,OAAO,CAAC+C,SAxBH,CAyBfrD,OAAO,CAACuI,eAAe,CAAC9G,MAAhB,CAAuB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAASwL,uBAAuB,CAACxL,KAAnC,EAAxB,CAzBO,CA0BfgD,MAAM,CAAC2O,QA1BQ,CAAjB,CA6BF,GAAG/S,QAAQ,CAAC,CAAZ,CAAc,CAEZnD,WAAW,CAAC,SAAD,CAAY,CACrBqF,UAAU,CAAE,mBADS,CAErBC,IAAI,CAAE,CAAC,WAAYjF,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,YAA1C,CAAb,CAAqE,eAAe5K,OAAO,CAACD,WAAR,CAAoB/B,MAAxG,CAFe,CAAZ,CAAX,CAICJ,IAJD,CAIM,SAAU4R,SAAV,CAAqB,CACzB,GAAIA,SAAS,CAAC3R,SAAV,EAAuB,CAA3B,CAA8B,CAC5B,GAAG2R,SAAS,CAACzR,WAAV,CAAsB,CAAtB,EAAyB0R,cAAzB,CAAwC,CAA3C,CAA6C,CAC3CrX,WAAW,CAAC,SAAD,CAAY,CACrBqF,UAAU,CAAE,kBADS,CAErBC,IAAI,CAAEgR,UAFe,CAAZ,CAAX,CAIC9Q,IAJD,CAIM,SAAUF,IAAV,CAAgB,CAEpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CAEvB,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CACA,GAAI2R,CAAAA,WAAW,CAAE9O,IAAI,CAACC,KAAL,CAAWnD,IAAI,CAACK,WAAL,CAAiB4R,GAA5B,EAAiCC,OAAjC,CAAyClS,IAAzC,CAA8CiS,GAA/D,CACA,GAAGD,WAAW,EAAE,EAAb,EAAmBA,WAAW,GAAG7V,SAApC,CAA8C,CAC5CgW,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBL,WAArB,CACD,CAFD,IAEK,CACHtW,MAAM,CAAC,CAAD,CAAG,6CAAH,CAAN,CACAyU,eAAe,CAAC,KAAD,CAAf,CACD,CAEF,CAXD,IAWO,CACLzU,MAAM,CAAC,CAAD,CAAG,QAAH,CAAN,CACAyU,eAAe,CAAC,KAAD,CAAf,CACD,CACF,CArBD,EAsBC1P,KAtBD,CAsBO,SAAUrE,KAAV,CAAiB,CACtBV,MAAM,CAAC,CAAD,CAAG,SAASU,KAAZ,CAAN,CACA+T,eAAe,CAAC,KAAD,CAAf,CACD,CAzBD,EA0BD,CA3BD,IA2BK,CACHzU,MAAM,CAAC,CAAD,CAAG,kCAAH,CAAN,CACAyU,eAAe,CAAC,KAAD,CAAf,CACD,CAEF,CAjCD,IAiCO,CACLzU,MAAM,CAAC,CAAD,CAAG,UAAWwH,IAAI,CAACqC,SAAL,CAAeuM,SAAS,CAACzR,WAAzB,CAAd,CAAN,CACA8P,eAAe,CAAC,KAAD,CAAf,CACD,CACF,CA1CD,EA2CC1P,KA3CD,CA2CO,SAAUrE,KAAV,CAAiB,CACtBV,MAAM,CAAC,CAAD,CAAG,UAAWU,KAAd,CAAN,CACA+T,eAAe,CAAC,KAAD,CAAf,CACD;AACA,CA/CD,EAgDD,CAlDD,IAkDK,CACHzV,WAAW,CAAC,SAAD,CAAY,CACrBqF,UAAU,CAAE,mBADS,CAErBC,IAAI,CAAE,CAAC,WAAYjF,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,YAA1C,CAAb,CAAqE,eAAe5K,OAAO,CAACD,WAAR,CAAoB/B,MAAxG,CAFe,CAAZ,CAAX,CAICJ,IAJD,CAIM,SAAU4R,SAAV,CAAqB,CACzB,GAAIA,SAAS,CAAC3R,SAAV,EAAuB,CAA3B,CAA8B,CAC5B,GAAG2R,SAAS,CAACzR,WAAV,CAAsB,CAAtB,EAAyB0R,cAAzB,CAAwC,CAA3C,CAA6C,CAC3CrX,WAAW,CAAC,SAAD,CAAY,CACrBqF,UAAU,CAAE,kBADS,CAErBC,IAAI,CAAEgR,UAFe,CAAZ,CAAX,CAIC9Q,IAJD,CAIM,SAAUF,IAAV,CAAgB,CAEpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CACvBzE,MAAM,CAAC,CAAD,CAAG,+BAAH,CAAN,CAEA4W,UAAU,CAAC,UAAU,CACnBH,MAAM,CAACC,QAAP,CAAgBG,MAAhB,GAEA,CAHQ,CAGN,IAHM,CAAV,CAID,CAPD,IAOO,CACL7W,MAAM,CAAC,CAAD,CAAG,QAAH,CAAN,CACAyU,eAAe,CAAC,KAAD,CAAf,CACD,CACF,CAjBD,EAkBC1P,KAlBD,CAkBO,SAAUrE,KAAV,CAAiB,CACtBV,MAAM,CAAC,CAAD,CAAG,SAASU,KAAZ,CAAN,CACA+T,eAAe,CAAC,KAAD,CAAf,CACD,CArBD,EAsBD,CAvBD,IAuBK,CACHzU,MAAM,CAAC,CAAD,CAAG,kCAAH,CAAN,CACAyU,eAAe,CAAC,KAAD,CAAf,CACD,CAEF,CA7BD,IA6BO,CACLzU,MAAM,CAAC,CAAD,CAAG,UAAWwH,IAAI,CAACqC,SAAL,CAAeuM,SAAS,CAACzR,WAAzB,CAAd,CAAN,CACA8P,eAAe,CAAC,KAAD,CAAf,CACD,CACF,CAtCD,EAuCC1P,KAvCD,CAuCO,SAAUrE,KAAV,CAAiB,CACtBV,MAAM,CAAC,CAAD,CAAG,UAAWU,KAAd,CAAN,CACA+T,eAAe,CAAC,KAAD,CAAf,CACD;AACA,CA3CD,EA4CD,CAIF,CAzJD,IAyJK,CACP;AACE,GAAG7N,OAAO,CAACD,WAAR,GAAsBlG,SAAtB,EAAmCmG,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA2B,CAAjE,CAAmE,CACnE,GAAMgI,CAAAA,SAAQ,CAAGvB,IAAI,CAACC,GAAL,CAAS1E,OAAO,CAACT,MAAR,CAAiBS,OAAO,CAACV,QAAlC,CAAjB,CACA;AACC,GAAI2G,CAAAA,SAAQ,CAAGxB,IAAI,CAACG,IAAL,CAAUoB,SAAQ,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAlB,CAAf,CACA,GAAGC,SAAQ,EAAE,CAAV,EAAeA,SAAQ,EAAE,CAA5B,CAA8B,CAC5BA,SAAQ,CAAC,CAAT,CACD,CACD,GAAI5B,CAAAA,eAAe,CAACX,QAAQ,CAAChG,IAAT,CAAcyD,MAAd,CAAqB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACpB,EAAF,EAAM,CAAR,EAAtB,CAApB,CACA,GAAIqG,CAAAA,YAAY,CAACZ,QAAQ,CAAChG,IAAT,CAAcyD,MAAd,CAAqB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACpB,EAAF,EAAM,CAAR,EAAtB,CAAjB,CACA,GAAIwI,CAAAA,OAAO,CAAC,CAAZ,CACA,GAAID,CAAAA,UAAU,CAAC,CAAf,CACA,GAAII,CAAAA,OAAO,CAAC,CAAZ,CACA,GAAID,CAAAA,OAAO,CAAC,CAAZ,CACA,GAAI2H,CAAAA,QAAQ,CAAC,EAAb,CACA,GAAIzH,CAAAA,YAAY,CAAC,CAAjB,CACA,GAAIC,CAAAA,WAAW,CAAC,CAAhB,CACA,GAAG,CAAC9G,OAAO,CAACH,kBAAZ,CAA+B,CAC7B,GAAGrB,gBAAgB,CAACR,MAAjB,CAAwB,CAA3B,CAA6B,4BACnBwH,IADmB,EAE1B,GAAIC,CAAAA,OAAO,CAAGjH,gBAAgB,CAACgH,IAAD,CAA9B,CACA,GAAIE,CAAAA,UAAU,CAACpH,QAAQ,CAAC6C,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAAS8I,OAAX,EAAjB,CAAf,CACA,GAAGC,UAAU,CAAC1H,MAAX,CAAkB,CAArB,CAAuB,CACrB2I,OAAO,CAAC,CAAElE,UAAU,CAACiD,UAAU,CAAC,CAAD,CAAV,CAAc3G,KAAf,CAApB,CACAuP,QAAQ,CAAC5R,IAAT,CAAcgJ,UAAU,CAAC,CAAD,CAAxB,EACD,CAPyB,EAC5B,IAAK,GAAIF,CAAAA,IAAE,CAAG,CAAd,CAAiBA,IAAE,CAAGhH,gBAAgB,CAACR,MAAvC,CAA+CwH,IAAE,EAAjD,CAAqD,QAA5CA,IAA4C,EAQpD,CACD,CAEF,CAED,GAAG,CAACxF,OAAO,CAAC8C,aAAZ,CAA0B,CACzB,IAAK,GAAIX,CAAAA,EAAE,CAAG,CAAd,CAAiBA,EAAE,CAAGnC,OAAO,CAACF,OAAR,CAAgB9B,MAAtC,CAA8CmE,EAAE,EAAhD,CAAoD,CAClDyE,OAAO,EAAInE,UAAU,CAACzC,OAAO,CAACF,OAAR,CAAgBqC,EAAhB,EAAoBI,GAArB,CAAV,CAAqCE,UAAU,CAACzC,OAAO,CAACF,OAAR,CAAgBqC,EAAhB,EAAoByD,MAArB,CAAhD,CAAiFK,SAA3F,CACA,CACF,CAED,IAAK,GAAIzJ,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGwD,OAAO,CAACD,WAAR,CAAoB/B,MAAhD,CAAwDxB,KAAK,EAA7D,CAAiE,CAC/D,GAAM0T,CAAAA,UAAU,CAAGlQ,OAAO,CAACD,WAAR,CAAoBvD,KAApB,CAAnB,CACA,GAAG,CAAC0T,UAAU,CAACjO,OAAf,CACA,CACEuE,UAAU,EAAE0J,UAAU,CAACrO,cAAX,EAA2B,IAA3B,CAAiCY,UAAU,CAAC6B,YAAY,CAAC,CAAD,CAAZ,CAAgBc,SAAjB,CAA3C,CAAyE8K,UAAU,CAACzO,mBAAX,EAAgC,IAAhC,CAAqC,CAArC,CAAuCgB,UAAU,CAAC6B,YAAY,CAAC,CAAD,CAAZ,CAAgBvF,KAAjB,CAAtI,CAEF,GAAG,CAACmR,UAAU,CAACvO,eAAf,CAA+B,CAC5B8E,OAAO,EAAEhE,UAAU,CAAC4B,eAAe,CAAC,CAAD,CAAf,CAAmBtF,KAApB,CAAnB,CACF,CAFD,IAEK,CACF8H,YAAY,EAAEpE,UAAU,CAAC4B,eAAe,CAAC,CAAD,CAAf,CAAmBtF,KAApB,CAAxB,CACF,CACD,CACD,CACD,GAAIoR,CAAAA,QAAQ,CAAEvP,IAAI,CAACqC,SAAL,CAAejD,OAAf,CAAd,CACA,GAAIoQ,CAAAA,WAAW,CAACxP,IAAI,CAACC,KAAL,CAAWsP,QAAX,CAAhB,CACAC,WAAW,CAACrQ,WAAZ,CAAwBqQ,WAAW,CAACrQ,WAAZ,CAAwBoB,MAAxB,CAA+B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,IAAb,EAAhC,CAAxB,CACAmO,WAAW,CAACtQ,OAAZ,CAAoBsQ,WAAW,CAACtQ,OAAZ,CAAoBqB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACkD,GAAF,CAAM,CAAR,EAA5B,CAApB,CAEA,GAAI8N,CAAAA,YAAY,CAAC,CAChBC,SAAS,CAACC,cAAc,EAAE,CAAhB,CAAkBvQ,OAAO,CAACP,WAA1B,CAAsChE,WADhC,CAEhB+U,QAAQ,CAACD,cAAc,EAAE,CAAhB,CAAkB,CAAlB,CAAqBvQ,OAAO,CAACP,WAAR,CAAoBhE,WAFlC,CAGhByL,IAAI,CAACT,OAHW,CAIhBU,QAAQ,CAACX,UAJO,CAKhBa,OAAO,CAACrH,OAAO,CAACc,OALA,CAMhBsG,IAAI,CAACkH,QANW,CAOhBmC,GAAG,CAACzU,mBAPY,CAQhBuL,OAAO,CAACX,OARQ,CAShBY,QAAQ,CAACV,WATO,CAUhBW,SAAS,CAACZ,YAVM,CAWhB6J,WAAW,CAACN,WAXI,CAYhBO,OAAO,CAAC3Q,OAAO,CAACF,OAAR,CAAgBqB,MAAhB,CAAuB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACkD,GAAF,CAAM,CAAR,EAAxB,CAZQ,CAahBqO,SAAS,CAAC5Q,OAAO,CAACD,WAAR,CAAoBoB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAA5B,CAbM,CAAjB,CAeA,GAAIyM,CAAAA,UAAU,CAAG,CAChBmC,UAAU,CAACR,YADK,CAEhBtN,SAAS,CAAC/C,OAAO,CAAC+C,SAFF,CAGhBtD,WAAW,CAAEO,OAAO,CAACP,WAHL,CAIhBqD,aAAa,CAAE9C,OAAO,CAAC8C,aAAR,EAAuB,IAAvB,CAA4B,GAA5B,CAAgC,GAJ/B,CAKhBD,eAAe,CAAC7C,OAAO,CAAC4C,iBALR,CAMhB/C,kBAAkB,CAACG,OAAO,CAACH,kBAAR,EAA4B,IAA5B,CAAiC,GAAjC,CAAqC,GANxC,CAOhBW,cAAc,CAAC+P,cAPC,CAQhBjR,QAAQ,CAAE7G,MAAM,CAACuH,OAAO,CAACV,QAAT,CAAN,CAAyBsL,MAAzB,CAAgC,YAAhC,CARM,CAShBrL,MAAM,CAAE9G,MAAM,CAACuH,OAAO,CAACT,MAAT,CAAN,CAAuBqL,MAAvB,CAA8B,YAA9B,CATQ,CAUhBhL,MAAM,CAACtC,gBAVS,CAWhBqC,MAAM,CAAC2O,QAXS,CAYhB5O,OAAO,CAAEuI,eAAe,CAAC9G,MAAhB,CAAuB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAASwL,uBAAuB,CAACxL,KAAnC,EAAxB,CAZO,CAahBgS,YAAY,CAAE1I,SAbE,CAchBzG,GAAG,CAAEQ,OAAO,CAACD,WAAR,CAAoBoB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAA5B,EAAgDjE,MAdrC,CAehB+Q,WAAW,CAAE/O,OAAO,CAACD,WAAR,CAAoBoB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAA5B,CAfG,CAgBhBgN,eAAe,CAAEjP,OAAO,CAACF,OAAR,CAAgBqB,MAAhB,CAAuB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACkD,GAAF,CAAM,CAAR,EAAxB,EAAmCvE,MAhBpC,CAAjB,CAmBC5F,WAAW,CAAC,SAAD,CAAY,CACrBqF,UAAU,CAAE,mBADS,CAErBC,IAAI,CAAE,CAAC,WAAYjF,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,YAA1C,CAAb,CAAqE,eAAe5K,OAAO,CAACD,WAAR,CAAoB/B,MAAxG,CAFe,CAAZ,CAAX,CAICJ,IAJD,CAIM,SAAU4R,SAAV,CAAqB,CAEzB,GAAIA,SAAS,CAAC3R,SAAV,EAAuB,CAA3B,CAA8B,CAC5B,GAAG2R,SAAS,CAACzR,WAAV,CAAsB,CAAtB,EAAyB0R,cAAzB,CAAwC,CAA3C,CAA6C,CAC3CrX,WAAW,CAAC,SAAD,CAAY,CACrBqF,UAAU,CAAE,eADS,CAErBC,IAAI,CAAEgR,UAFe,CAAZ,CAAX,CAIC9Q,IAJD,CAIM,SAAUF,IAAV,CAAgB,CAEpB,GAAIA,IAAI,CAACG,SAAL,EAAkB,CAAtB,CAAyB,CAEvB,GAAIc,CAAAA,MAAM,CAAGjB,IAAI,CAACK,WAAlB,CACA3E,MAAM,CAAC,CAAD,CAAG,8EAAH,CAAN,CACAyW,MAAM,CAACC,QAAP,CAAgBG,MAAhB,GACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAED,CAdD,IAcO,CACL7W,MAAM,CAAC,CAAD,CAAG,QAAH,CAAN,CACAyU,eAAe,CAAC,KAAD,CAAf,CACD,CACF,CAxBD,EAyBC1P,KAzBD,CAyBO,SAAUrE,KAAV,CAAiB,CACtBV,MAAM,CAAC,CAAD,CAAG,SAASU,KAAZ,CAAN,CACA+T,eAAe,CAAC,KAAD,CAAf,CACD,CA5BD,EA6BD,CA9BD,IA8BK,CACHzU,MAAM,CAAC,CAAD,CAAG,kCAAH,CAAN,CACAyU,eAAe,CAAC,KAAD,CAAf,CACD,CAEF,CApCD,IAoCO,CACLzU,MAAM,CAAC,CAAD,CAAG,UAAWwH,IAAI,CAACqC,SAAL,CAAeuM,SAAS,CAACzR,WAAzB,CAAd,CAAN,CACA8P,eAAe,CAAC,KAAD,CAAf,CACD,CACF,CA9CD,EA+CC1P,KA/CD,CA+CO,SAAUrE,KAAV,CAAiB,CACtBV,MAAM,CAAC,CAAD,CAAG,UAAWU,KAAd,CAAN,CACA+T,eAAe,CAAC,KAAD,CAAf,CACD;AACA,CAnDD,EAuDD,CAMA,CAEF,CArTD,CAuTA,gBAA4C1X,QAAQ,CAAC,CAAD,CAApD,2CAAOoa,cAAP,gBAAuBO,iBAAvB,gBACA,GAAMC,CAAAA,iBAAiB,CAAC,QAAlBA,CAAAA,iBAAkB,CAACrT,IAAD,CAAQ,CAC9B,GAAGsC,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA2B,CAA9B,CAAgC,CAC9B8S,iBAAiB,CAACpT,IAAD,CAAjB,CACAyM,mBAAmB,CAAC,CAACD,gBAAF,CAAnB,CACD,CAHD,IAGK,CACH9Q,MAAM,CAAC,CAAD,CAAI,gDAAJ,CAAN,CACA,OACD,CACF,CARD,CAUA,GAAM4X,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,EAAI,CACtB,GAAMhL,CAAAA,QAAQ,CAAGvB,IAAI,CAACC,GAAL,CAAS1E,OAAO,CAACT,MAAR,CAAiBS,OAAO,CAACV,QAAlC,CAAjB,CACI;AACC,GAAI2G,CAAAA,QAAQ,CAAGxB,IAAI,CAACG,IAAL,CAAUoB,QAAQ,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAlB,CAAf,CACA,GAAGC,QAAQ,EAAE,CAAV,EAAeA,QAAQ,EAAE,CAA5B,CAA8B,CAC5BA,QAAQ,CAAC,CAAT,CACD,CACD,GAAIqI,CAAAA,QAAQ,CAAC,EAAb,CACA,IAAK,GAAI9R,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGgC,gBAAgB,CAACR,MAA7C,CAAqDxB,KAAK,EAA1D,CAA8D,CAC5D,GAAMoC,CAAAA,OAAO,CAAGJ,gBAAgB,CAAChC,KAAD,CAAhC,CACA,GAAIyU,CAAAA,WAAW,CAAC3S,QAAQ,CAAC6C,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAF,EAAjB,CAAhB,CACD,CACP,CAZD,CAcA,GAAM6R,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAACxT,IAAD,CAAQ,CAExB,GAAGJ,gBAAgB,EAAE,EAArB,CAAwB,CACtB,MAAO,EAAP,CACD,CAFD,IAEK,CACH,MAAOF,CAAAA,QAAQ,CAAC+D,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAASW,gBAAX,EAAjB,EAA8C,CAA9C,EAAiDV,KAAxD,CACD,CAEF,CARD,CAUA,GAAMuU,CAAAA,QAAQ,CAAC,QAATA,CAAAA,QAAS,EAAI,CACjB,GAAIC,CAAAA,UAAU,CAAC,EAAf,CADiB,2BAER5U,KAFQ,EAGf,GAAMoC,CAAAA,OAAO,CAAGJ,gBAAgB,CAAChC,KAAD,CAAhC,CACIkJ,UAAU,CAAEpH,QAAQ,CAAC6C,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAASiC,OAAX,EAAjB,CAJD,CAKf,GAAG8G,UAAU,CAAC1H,MAAX,CAAkB,CAArB,CAAuB,CACrBoT,UAAU,EAAE1L,UAAU,CAAC,CAAD,CAAV,CAAc9I,KAAd,CAAoB,GAAhC,CACD,CAPc,EAEjB,IAAK,GAAIJ,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGgC,gBAAgB,CAACR,MAA7C,CAAqDxB,KAAK,EAA1D,CAA8D,IAExDkJ,CAAAA,UAFwD,QAArDlJ,KAAqD,EAM7D,CACD,GAAG4U,UAAU,EAAE,EAAf,CAAkB,CAChBA,UAAU,CAACA,UAAU,CAACC,SAAX,CAAqB,CAArB,CAAuBD,UAAU,CAACpT,MAAX,CAAkB,CAAzC,CAAX,CACD,CACD,MAAOoT,CAAAA,UAAP,CACD,CAbD,CAcA,GAAME,CAAAA,iBAAiB,CAAC,QAAlBA,CAAAA,iBAAkB,EAAI,CAC1B,GAAI3S,CAAAA,MAAM,CAAC,MAAX,CACA,GAAIW,CAAAA,QAAQ,CAAC,GAAIxE,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,aAA1C,CAAT,CAAb,CACA,GAAIC,CAAAA,OAAO,CAAC,GAAI/P,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACwC,WAAjB,CAAD,CAAN,CAAsCoI,MAAtC,CAA6C,aAA7C,CAAT,CAAZ,CACA,GAAGC,OAAO,CAACvL,QAAX,CAAoB,CAClB,GAAG/D,QAAQ,CAAC,CAAZ,CAAc,CACZoD,MAAM,CAAC,EAAP,CACD,CAEF,CACD,MAAOA,CAAAA,MAAP,CACD,CAXD,CAYA,GAAM4S,CAAAA,iBAAiB,CAAC,QAAlBA,CAAAA,iBAAkB,EAAI,CAC1B,GAAI5S,CAAAA,MAAM,CAAC,MAAX,CACA,GAAIW,CAAAA,QAAQ,CAAC,GAAIxE,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,aAA1C,CAAT,CAAb,CACA,GAAIC,CAAAA,OAAO,CAAC,GAAI/P,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACwC,WAAjB,CAAD,CAAN,CAAsCoI,MAAtC,CAA6C,aAA7C,CAAT,CAAZ,CACA,GAAGC,OAAO,CAACvL,QAAX,CAAoB,CAClBX,MAAM,CAAC,EAAP,CACD,CACD,MAAOA,CAAAA,MAAP,CACD,CARD,CAUA,GAAM6S,CAAAA,SAAS,CAAC,QAAVA,CAAAA,SAAU,EAAI,CAClB3B,MAAM,CAACC,QAAP,CAAgBG,MAAhB,GACD,CAFD,CAKI,mBAAQ,sCAGP,YAAK,SAAS,CAAC,uDAAf,CAAuE,KAAK,CAAE,CAAGwB,UAAU,eAASlX,UAAT,KAAb,CAAoCmX,gBAAgB,CAAE,WAAtD,CAC/EC,kBAAkB,CAAE,YAD2D,CAE/EC,cAAc,CAAE,OAF+D,CAA9E,uBAGI,MAAC,UAAD,yBAEG,KAAC,IAAD,EAAM,KAAK,CAAE,CAACC,SAAS,CAAC,OAAX,CAAb,uBACI,KAAC,IAAD,CAAM,IAAN,wBACI,YAAK,SAAS,CAAC,KAAf,uBAEA,KAAC,IAAD,EAAM,EAAE,CAAC,IAAT,uBACI,wCAEA,KAAC,KAAD,wBAEI,MAAC,IAAD,yBAEA,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,YAAvB,uBACI,MAAC,WAAD,EAAa,SAAS,CAAC,MAAvB,wBACA,KAAC,kBAAD,wBACI,MAAC,eAAD,sCACU,YAAK,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAT,CAAZ,eADV,GADJ,EADA,cAMA,KAAC,MAAD,SAAS,IAAI,CAAC,MAAd,CAAqB,QAAQ,CAAErO,YAA/B,+BAAkD,MAAlD,gCAAgE7I,KAAK,CAACF,WAAtE,6BAAsF,aAAtF,sCAAgH,uBAAhH,SANA,GADJ,EAFA,cAYA,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uBACI,MAAC,WAAD,EAAa,SAAS,CAAC,MAAvB,wBACA,KAAC,kBAAD,wBACI,MAAC,eAAD,yCACa,YAAK,KAAK,CAAE,CAAEoX,KAAK,CAAE,KAAT,CAAZ,eADb,GADJ,EADA,cAMA,KAAC,MAAD,SAAS,IAAI,CAAC,MAAd,CAAqB,QAAQ,CAAErO,YAA/B,+BAAkD,OAAlD,gCAAiE7I,KAAK,CAACD,OAAvE,6BAAmF,SAAnF,sCAA0G,gBAA1G,SANA,GADJ,EAZA,cAsBA,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uBACI,YAAK,SAAS,CAAC,KAAf,uBACI,aAAK,SAAS,CAAC,QAAf,wBACA,KAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAA0B,OAAO,CAAE,kBAAM,CAACyF,aAAa,GAAG,CAA1D,qBADA,0BAEA,KAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAAyB,MAAM,CAAEJ,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA2B,CAA3B,CAA6B,KAA7B,CAAmC,IAApE,CAA0E,QAAQ,CAAG,GAAIlD,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACwC,WAAjB,CAAD,CAAN,CAAsCoI,MAAtC,CAA6C,aAA7C,CAAT,CAAD,CAAwE,GAAI9P,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,aAA1C,CAAT,CAA5J,CACG,OAAO,CAAE,kBAAM,CAACmG,iBAAiB,GAAG,CADvC,oBAFA,yBAKF,KAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAAyB,MAAM,CAAE/Q,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA2B,CAA3B,CAA6B,KAA7B,CAAmC,IAApE,CAA0E,OAAO,CAAE,kBAAM,CAACwT,SAAS,GAAG,CAAtG,oBALE,GADJ,EADJ,EAtBA,GAFJ,EAFA,cAkDA,YAAM,KAAK,CAAE,CAACO,OAAO,CAAC3V,cAAc,EAAE,KAAhB,CAAsB,MAAtB,CAA6B,EAAtC,CAAb,uBAEA,aAAK,EAAE,CAAC,WAAR,wBACI,MAAC,KAAD,EAAO,SAAS,CAAC,MAAjB,wBACI,MAAC,WAAD,EAAa,EAAE,CAAC,YAAhB,WACE,UAAM,CACN,GAAM4V,CAAAA,IAAI,CAAG,EAAb,CACD;AACG,GAAGhE,gBAAgB,CAACnG,oBAAjB,GAAwChO,SAA3C,CAAqD,CACjD,CACF4G,OAAO,CAACC,GAAR,CAAYsN,gBAAgB,CAACnG,oBAA7B,EAKFmK,IAAI,CAACtV,IAAL,cAAU,sCACF,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,UAAf,uBACI,qCAAiBsR,gBAAgB,CAACnG,oBAAjB,CAAsCH,KAAvD,GADJ,EADF,cAIE,YAAK,SAAS,CAAC,UAAf,uBACI,mCAAI,KAAC,KAAD,EAAO,IAAI,CAAGsG,gBAAgB,CAACnG,oBAAjB,CAAsCF,cAAtC,CAAqD,CAArD,CAAuD,eAAvD,CAAuE,EAArF,CACJ,SAAS,CAAC,OADN,CAEJ,KAAK,CAAG3H,OAAO,CAACzE,QAAR,CAAiB,CAAjB,CAAmB,CAACuW,KAAK,CAAC,OAAP,CAAnB,CAAmC,EAFvC,EAAJ,2BAEyE9D,gBAAgB,CAACnG,oBAAjB,CAAsCF,cAF/G,OADJ,EAJF,cASE,YAAK,SAAS,CAAC,UAAf,uBACI,4CAAwBqG,gBAAgB,CAACnG,oBAAjB,CAAsCD,WAA9D,OADJ,EATF,GADE,EAAV,EAgBE,MAAOoK,CAAAA,IAAP,CACD,CACJ;AAGA,CA/BA,EADD,cAmCA,KAAC,OAAD,EACI,KAAK,KADT,CAEI,KAAK,CAAC,MAFV,CAGI,SAAS,CAAC,mBAHd,CAII,OAAO,CAAE,yBAAM5W,CAAAA,YAAY,CAACD,SAAS,GAAK,CAAd,CAAkB,IAAlB,CAAyB,CAA1B,CAAlB,EAJb,uBAMI,WAAI,SAAS,CAAC,SAAd,0BANJ,EAnCA,GADJ,cA6CI,KAAC,SAAD,EAAW,IAAI,CAAEA,SAAS,GAAK,CAA/B,uBACA,MAAC,SAAD,yBACI,aAAK,SAAS,CAAC,UAAf,wBACI,aAAK,SAAS,CAAC,qBAAf,wBACI,qCADJ,cAEI,KAAC,UAAD,EAAY,UAAU,CAAC,aAAvB,CAAsC,OAAO,CAAE,GAAIL,CAAAA,IAAJ,EAA/C,CAA2D,SAAS,CAAC,cAArE,CAAqF,QAAQ,CAAE,GAAIA,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAA/F,CAA4H,QAAQ,CAAE,kBAAC2S,IAAD,CAAQ,CACzI;AACE;AACChS,UAAU,CAAC,SAAAuD,SAAS,wCACfA,SADe,MAElBlE,QAAQ,CAAE2S,IAFQ,CAGlB1S,MAAM,CAAC0S,IAHW,IAAV,CAAV,CAKAxR,OAAO,CAACC,GAAR,CAAYV,OAAZ,EACF;AACA;AACA;AAGL,CAdD,EAFJ,GADJ,cAoBI,aAAK,SAAS,CAAC,qBAAf,wBACI,mCADJ,cAEI,KAAC,UAAD,EAAY,UAAU,CAAC,aAAvB,CAAsC,OAAO,CAAE,GAAIlF,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAA/C,CAA2E,SAAS,CAAC,cAArF,CAAoG,QAAQ,CAAE,GAAIxE,CAAAA,IAAJ,CAASkF,OAAO,CAACT,MAAjB,CAA9G,CAAwI,QAAQ,CAAE,kBAAC0S,IAAD,CAAS,CAC7H;AACAhS,UAAU,gCAAKD,OAAL,wBAAe,QAAf,CAAyBiS,IAAzB,GAAV,CAE7B,CAJD,EAFJ,GApBJ,cA4BI,aAAK,SAAS,CAAC,qBAAf,wBACI,4CADJ,cAEI,KAAC,MAAD,EACA,UAAU,CAAE,IADZ,CAEA,SAAS,CAAC,UAFV,CAGA,WAAW,CAAC,QAHZ,CAIA,KAAK,CAAEnW,cAAc,CAACoW,IAAf,CAAoB,SAAA3J,GAAG,QAAIA,CAAAA,GAAG,CAAC5L,KAAJ,GAAcX,mBAAlB,EAAvB,CAA+D;AAJtE,CAKA,OAAO,CAAEF,cAAgB;AALzB,CAMA,QAAQ,CAAEgB,qBAAuB;AANjC,EAFJ,GA5BJ,cAuCI,aAAK,SAAS,CAAC,qBAAf,wBACS,oDADT,cAEQ,KAAC,MAAD,EACA,SAAS,CAAC,UADV,CAEA,WAAW,CAAC,QAFZ,CAGA,KAAK,CAAEM,QAAQ,CAAC8U,IAAT,CAAc,SAAA3J,GAAG,QAAIA,CAAAA,GAAG,CAAC5L,KAAJ,GAAcW,gBAAlB,EAAjB,CAAsD;AAH7D,CAIA,OAAO,CAAEF,QAAU;AAJnB,CAKA,QAAQ,CAAEiB,oBAAsB;AALhC,EAFR,GAvCJ,GADJ,cAoDI,aAAK,SAAS,CAAC,UAAf,wBACQ,aAAK,SAAS,CAAC,qBAAf,wBACQ,yCADR,cAEQ,KAAC,MAAD,EACI,OAAO,KADX,CAEI,UAAU,CAAE2B,OAAO,CAACH,kBAFxB,CAGI,SAAS,CAAC,UAHd,CAII,WAAW,CAAC,sBAJhB,CAKI,KAAK,CAAEvB,QAAQ,CAAC6C,MAAT,CAAgB,SAAAoH,GAAG,QAC1B/J,CAAAA,gBAAgB,CAAC2T,QAAjB,CAA0B5J,GAAG,CAAC5L,KAA9B,CAD0B,EAAnB,CAQP;AAbJ,CAcI,OAAO,CAAE2B,QAAU;AAdvB,CAeK,QAAQ,CAAEW,oBAAsB;AAfrC,EAFR,GADR,cAqBQ,aAAK,SAAS,CAAC,qBAAf,wBACQ,0CADR,cAEQ,KAAC,MAAD,EACI,SAAS,CAAC,UADd,CAEI,WAAW,CAAC,QAFhB,CAGI,UAAU,CAAE,IAHhB,CAII,KAAK,CAAEyJ,UAAU,CAACwJ,IAAX,CAAgB,SAAA3J,GAAG,QAAIA,CAAAA,GAAG,CAAC5L,KAAJ,GAAciM,eAAlB,EAAnB,CAAuD;AAJlE,CAKI,OAAO,CAAEF,UAAY;AALzB,EAFR,GArBR,GApDJ,cAuFI,aAAK,SAAS,CAAC,UAAf,wBACQ,aAAK,SAAS,CAAC,qBAAf,wBACI,sDADJ,cAEI,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAE0J,KAAK,CAAE,KAAT,CAAgBC,QAAQ,CAAC,MAAzB,CAAf,CAAoD,IAAI,CAAC,UAAzD,CAAoE,KAAK,CAAErS,OAAO,CAACH,kBAAnF,CAAuG,QAAQ,CAAEiI,eAAjH,CACA,EAAE,CAAC,iBADH,EAFJ,GADR,cAMQ,aAAK,SAAS,CAAC,qBAAf,wBACK,sDAAsB,aAAM,KAAK,CAAE,CAACgK,KAAK,CAAC,KAAP,CAAb,uBAA4B,0BAA5B,EAAtB,GADL,cAEY,KAAC,MAAD,EACJ,SAAS,CAAC,UADN,CAEJ,WAAW,CAAC,eAFR,CAGJ,KAAK,CAAE3J,uBAAyB;AAH5B,CAIJ,OAAO,CAAEF,eAAiB;AAJtB,CAKJ,QAAQ,CAAEI,oBAAsB;AAL5B,EAFZ,GANR,cAgBQ,aAAK,SAAS,CAAC,qBAAf,wBACQ,eAAO,GAAG,CAAC,QAAX,8CAAuC,aAAM,KAAK,CAAE,CAACyJ,KAAK,CAAC,KAAP,CAAb,uBAA4B,0BAA5B,EAAvC,GADR,cAEQ,KAAC,MAAD,EAAQ,QAAQ,CAAEzO,cAAlB,CAAkC,KAAK,CAAErD,OAAO,CAAC4C,iBAAjD,CAAoE,IAAI,CAAC,MAAzE,CAAgF,EAAE,CAAC,mBAAnF,CAAuG,WAAW,CAAC,2BAAnH,EAFR,GAhBR,GAvFJ,GADA,EA7CJ,GADJ,cAiKI,MAAC,KAAD,EAAO,SAAS,CAAC,MAAjB,wBACI,KAAC,WAAD,EAAa,EAAE,CAAC,YAAhB,uBACA,KAAC,OAAD,EACI,KAAK,KADT,CAEI,KAAK,CAAC,MAFV,CAGI,SAAS,CAAC,mBAHd,CAII,OAAO,CAAE,yBAAMxH,CAAAA,YAAY,CAACD,SAAS,GAAK,CAAd,CAAkB,IAAlB,CAAyB,CAA1B,CAAlB,EAJb,uBAMI,WAAI,SAAS,CAAC,SAAd,qBANJ,EADA,EADJ,cAWI,KAAC,SAAD,EAAW,IAAI,CAAEA,SAAS,GAAK,CAA/B,uBACA,MAAC,SAAD,yBAEA,aAAK,SAAS,CAAC,KAAf,wBACI,aAAK,SAAS,CAAC,yBAAf,wBACI,eAAO,GAAG,CAAC,QAAX,kCAAyC6E,OAAO,CAAC8C,aAAjD,GADJ,cAEI,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAEsP,KAAK,CAAE,KAAT,CAAeC,QAAQ,CAAC,MAAxB,CAAf,CAAkD,QAAQ,CAAEhP,cAA5D,CAA4E,IAAI,CAAC,UAAjF,CAA4F,OAAO,CAAErD,OAAO,CAAC8C,aAA7G,CAA6H,KAAK,CAAE9C,OAAO,CAAC8C,aAA5I,CAA2J,EAAE,CAAC,eAA9J,EAFJ,GADJ,cAMI,eAAO,SAAS,CAAC,OAAjB,wBACb,sCACE,+BADF,cAEE,2BAFF,cAGE,oCAHF,GADa,cAMb,uBACD,UAAM,CACN,GAAMkP,CAAAA,IAAI,CAAG,EAAb,CACA,GAAGhS,OAAO,CAACF,OAAR,GAAkBjG,SAArB,CAA+B,CAC7B,GAAImG,OAAO,CAACF,OAAR,CAAgB9B,MAAhB,CAAyB,CAA7B,CAAgC,CAC9B,IAAK,GAAIsU,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGtS,OAAO,CAACF,OAAR,CAAgB9B,MAApC,CAA4CsU,CAAC,EAA7C,CAAiD,WAC/C,GAAIC,CAAAA,IAAI,CAAGvS,OAAO,CAACF,OAAR,CAAgBwS,CAAhB,CAAX,CACA;AAEAN,IAAI,CAACtV,IAAL,cAAU,wCAER,mCACO,oBAAK6V,IAAI,CAACC,aAAV,EADP,cAEO,iCACA,KAAC,YAAD,SAAc,IAAI,CAAC,MAAnB,CAA0B,QAAQ,CAAExS,OAAO,CAAC8C,aAA5C,CAA6D,EAAE,CAAC,YAAhE,CAA6E,KAAK,CAAEyP,IAAI,CAAChQ,GAAzF,6BAAkGgQ,IAAI,CAACtU,EAAvG,mCAAqHiL,sBAAsB,CAACoJ,CAAD,CAA3I,sCAA4J,KAA5J,SADA,EAFP,cAKO,oBAAMC,IAAI,CAAChQ,GAAN,CAAYE,UAAU,CAAC8P,IAAI,CAAC3M,MAAN,CAA3B,EALP,GAFQ,OAAV,EAWD,CACD,MAAOoM,CAAAA,IAAP,CACD,CACF,CAGA,CAzBF,EADE,EANa,GANJ,GAFA,cA6Cd,YAAK,SAAS,CAAC,KAAf,EA7Cc,GADA,EAXJ,GAjKJ,cA+NI,MAAC,KAAD,EAAO,SAAS,CAAC,MAAjB,wBACI,KAAC,WAAD,EAAa,EAAE,CAAC,cAAhB,uBACA,KAAC,OAAD,EACI,KAAK,KADT,CAEI,KAAK,CAAC,MAFV,CAGI,SAAS,CAAC,mBAHd,CAII,OAAO,CAAE,yBAAM5W,CAAAA,YAAY,CAACD,SAAS,GAAK,CAAd,CAAkB,IAAlB,CAAyB,CAA1B,CAAlB,EAJb,uBAMI,WAAI,SAAS,CAAC,SAAd,wBANJ,EADA,EADJ,cAaI,KAAC,SAAD,EAAW,IAAI,CAAEA,SAAS,GAAK,CAA/B,uBACA,MAAC,SAAD,yBACA,KAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAAyB,QAAQ,CAAG,GAAIL,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACwC,WAAjB,CAAD,CAAN,CAAsCoI,MAAtC,CAA6C,aAA7C,CAAT,CAAD,CAAwE,GAAI9P,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,aAA1C,CAAT,CAA3G,CAA+K,OAAO,CAAE,iBAAA7N,CAAC,QAAI2N,CAAAA,QAAQ,CAAC,CAAC,CAAF,CAAK,EAAL,CAAZ,EAAzL,iBADA,kBAC6N,aAD7N,cAEA,eAAO,SAAS,CAAC,OAAjB,wBACT,sCACE,iCADF,cAEE,gCAFF,cAGE,8BAHF,cAIE,2BAJF,cAKE,gCALF,cAME,WAAK,KAAK,CAAE,CAAC+H,SAAS,CAAC,QAAX,CAAZ,oBANF,GADS,cAST,uBACD,UAAM,CACN,GAAMT,CAAAA,IAAI,CAAG,EAAb,CACA,GAAIhS,OAAO,CAACD,WAAR,EAAqBlG,SAArB,EAAkCmG,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA6B,CAAnE,CAAsE,4BAE3DsU,CAF2D,EAI9DI,QAAQ,CAAG1S,OAAO,CAACD,WAAR,CAAoBuS,CAApB,CAJmD,CAKlE,GAAGI,QAAQ,CAACzQ,OAAT,EAAkB,KAArB,CAA2B,CACrBwI,MAAM,CAACzN,MAAM,CAACmE,MAAP,CAAc,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAAS+V,QAAQ,CAACjI,MAApB,EAAf,EAA2C,CAA3C,EAA8C7N,KADhC,CAErBqO,GAAG,CAAC,GAAInQ,CAAAA,IAAJ,CAAS4X,QAAQ,CAACzH,GAAlB,CAFiB,CAGrB0H,UAAU,CAAC1H,GAAG,CAAC2H,OAAJ,GAAc,GAAd,CAAmBjX,QAAQ,CAACsP,GAAG,CAACtP,QAAJ,GAAe,CAAhB,CAA3B,CAA8C,GAA9C,CAAkDsP,GAAG,CAAC4H,WAAJ,EAHxC,CAIrBlR,eAAe,CAAC+Q,QAAQ,CAAC/Q,eAAT,EAA0B,IAA1B,CAA+B,KAA/B,CAAqC,IAJhC,CAKrBmR,cAAc,CAACJ,QAAQ,CAAC9Q,SALH,CAQzB;AAEAoQ,IAAI,CAACtV,IAAL,cAAU,wCAER,mCACQ,oBAAKgW,QAAQ,CAACxH,SAAd,EADR,cAEQ,oBAAKwH,QAAQ,CAACtH,QAAd,EAFR,cAGQ,oBAAKX,MAAL,EAHR,cAIQ,oBAAKkI,UAAL,EAJR,cAKQ,oBAAKhR,eAAL,EALR,cAMQ,YAAI,KAAK,CAAE,CAAC8Q,SAAS,CAAC,KAAX,CAAX,wBAA8B,KAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAAyB,QAAQ,CAAG,GAAI3X,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACwC,WAAjB,CAAD,CAAN,CAAsCoI,MAAtC,CAA6C,aAA7C,CAAT,CAAD,CAAwE,GAAI9P,CAAAA,IAAJ,CAASrC,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,aAA1C,CAAT,CAA3G,CAAgL,OAAO,CAAE,iBAAA7N,CAAC,QAAI2N,CAAAA,QAAQ,CAAC4H,CAAD,CAAItS,OAAO,CAACD,WAAR,CAAoBuS,CAApB,CAAJ,CAAZ,EAA1L,kBAA9B,0BACA,KAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAAyB,MAAM,CAAEQ,cAAjC,CAAiD,OAAO,CAAE,kBAAM,CAACzG,sBAAsB,CAACiG,CAAD,CAAItS,OAAO,CAACD,WAAR,CAAoBuS,CAApB,CAAJ,CAAtB,CAAkD,CAAnH,oBADA,GANR,GAFQ,OAAV,EAiBD,CAhCiE,EAEpE,IAAK,GAAIA,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGtS,OAAO,CAACD,WAAR,CAAoB/B,MAAxC,CAAgDsU,CAAC,EAAjD,CAAqD,IAE/CI,CAAAA,QAF+C,IAI7CjI,CAAAA,MAJ6C,IAK7CQ,CAAAA,GAL6C,IAM7C0H,CAAAA,UAN6C,IAO7ChR,CAAAA,eAP6C,IAQ7CmR,CAAAA,cAR6C,QAA5CR,CAA4C,EAgCpD,CACD,MAAON,CAAAA,IAAP,CACD,CAEA,CAxCF,EADE,EATS,GAFA,GADA,EAbJ,GA/NJ,cAwSI,MAAC,KAAD,EAAO,SAAS,CAAC,MAAjB,wBACE,KAAC,WAAD,EAAa,EAAE,CAAC,aAAhB,uBACE,KAAC,OAAD,EACI,KAAK,KADT,CAEI,KAAK,CAAC,MAFV,CAGI,SAAS,CAAC,mBAHd,CAII,OAAO,CAAE,yBAAM5W,CAAAA,YAAY,CAACD,SAAS,GAAK,CAAd,CAAkB,IAAlB,CAAyB,CAA1B,CAAlB,EAJb,uBAMI,WAAI,SAAS,CAAC,SAAd,6BANJ,EADF,EADF,cAWE,KAAC,SAAD,EAAW,IAAI,CAAEA,SAAS,GAAK,CAA/B,uBACA,KAAC,SAAD,wBACA,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,UAAf,UACE,UAAM,CACN,GAAM6W,CAAAA,IAAI,CAAG,EAAb,CACA,GAAGhS,OAAO,CAACD,WAAR,GAAsBlG,SAAzB,CAAmC,CACjC,GAAImG,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA6B,CAAjC,CAAoC,CAElC;AACA,GAAIqG,CAAAA,eAAe,CAACX,QAAQ,CAAChG,IAAT,CAAcyD,MAAd,CAAqB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACpB,EAAF,EAAM,CAAR,EAAtB,CAApB,CACA,GAAIqG,CAAAA,YAAY,CAACZ,QAAQ,CAAChG,IAAT,CAAcyD,MAAd,CAAqB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACpB,EAAF,EAAM,CAAR,EAAtB,CAAjB,CACA,GAAIsG,CAAAA,iBAAiB,CAACb,QAAQ,CAAChG,IAAT,CAAcyD,MAAd,CAAqB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACpB,EAAF,EAAM,CAAR,EAAtB,CAAtB,CACA;AACA,GAAMuG,CAAAA,WAAW,CAAGC,IAAI,CAACC,GAAL,CAASxE,WAAW,CAACX,MAAZ,CAAqBW,WAAW,CAACZ,QAA1C,CAApB,CACA,GAAIqF,CAAAA,WAAW,CAAGF,IAAI,CAACG,IAAL,CAAUJ,WAAW,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAArB,CAAlB,CACA,GAAGG,WAAW,EAAE,CAAb,EAAkBA,WAAW,EAAE,CAAlC,CAAoC,CAClCA,WAAW,CAAC,CAAZ,CACD,CAED;AACA,GAAIE,CAAAA,cAAc,CAAC3E,WAAW,CAACH,WAAZ,CAAwBoB,MAAxB,CAA+B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAAhC,CAAnB,CACA,GAAI6C,CAAAA,iBAAiB,CAACD,cAAc,CAAC1D,MAAf,CAAsB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACsC,eAAF,EAAmB,IAArB,EAAvB,CAAtB,CACA,GAAIoD,CAAAA,oBAAoB,CAACF,cAAc,CAAC1D,MAAf,CAAsB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACsC,eAAF,EAAmB,KAArB,EAAvB,CAAzB,CACA,GAAIqD,CAAAA,sBAAsB,CAACH,cAAc,CAAC1D,MAAf,CAAsB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC0C,aAAF,EAAiB,IAAnB,EAAvB,EAAgD/D,MAA3E,CACA;AACA,GAAIiH,CAAAA,qBAAqB,CAACF,oBAAoB,CAAC5D,MAArB,CAA4B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACwC,cAAF,EAAkB,IAApB,EAA7B,EAAuD7D,MAAjF,CACA,GAAIkH,CAAAA,oBAAoB,CAACH,oBAAoB,CAAC5D,MAArB,CAA4B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACwC,cAAF,EAAkB,KAApB,EAA7B,EAAwD7D,MAAjF,CAEA,GAAImH,CAAAA,aAAa,CAAC,CAACF,qBAAqB,CAAC,CAAtB,CACExC,UAAU,CAACwC,qBAAD,CAAV,CAAoCxC,UAAU,CAAC6B,YAAY,CAACtG,MAAb,CAAoB,CAApB,CAAsBsG,YAAY,CAAC,CAAD,CAAZ,CAAgBc,SAAtC,CAAgD,CAAjD,CADhD,CACqG,CADtG,GAEIF,oBAAoB,CAAC,CAArB,CACAA,oBAAD,EAA0BZ,YAAY,CAACtG,MAAb,CAAoB,CAApB,CAAsBsG,YAAY,CAAC,CAAD,CAAZ,CAAgBvF,KAAtC,CAA4C,CAAtE,CADC,CACyE,CAH7E,CAAlB,CAKA;AACA,GAAIsG,CAAAA,UAAU,CAAGN,oBAAoB,CAAC/G,MAArB,CAA4B,CAA5B,CACJyE,UAAU,CAACsC,oBAAoB,CAAC/G,MAAtB,CAAV,CAA0CyE,UAAU,CAAC4B,eAAe,CAACrG,MAAhB,CAAuB,CAAvB,CAAyByE,UAAU,CAAC4B,eAAe,CAAC,CAAD,CAAf,CAAmBtF,KAApB,CAAnC,CAA8D,CAA/D,CADhD,CACmH,CADpI,CAGA;AACA,GAAIuG,CAAAA,mBAAmB,CAAEN,sBAAsB,CAAC,CAAvB,CACZvC,UAAU,CAACuC,sBAAD,CAAV,EAAsCT,iBAAiB,CAACvG,MAAlB,CAAyB,CAAzB,CAA2BuG,iBAAiB,CAAC,CAAD,CAAjB,CAAqBxF,KAAhD,CAAsD,CAA5F,CADY,CACoF,CAD7G,CAGA;AAEA,GAAIwG,CAAAA,UAAU,CAAC,CAAf,CACA,GAAG,CAACrF,WAAW,CAACL,kBAAhB,CAAmC,4BACxB2F,EADwB,EAE/B,GAAIC,CAAAA,OAAO,CAAGvF,WAAW,CAACP,MAAZ,CAAmB6F,EAAnB,CAAd,CACA,GAAIE,CAAAA,UAAU,CAACpH,QAAQ,CAAC6C,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAAS8I,OAAO,CAAC/M,IAAnB,EAAjB,CAAf,CACA,GAAGgN,UAAU,CAAC1H,MAAX,CAAkB,CAArB,CAAuB,CACrBuH,UAAU,EAAG9C,UAAU,CAACiD,UAAU,CAAC,CAAD,CAAV,CAAc3G,KAAf,CAAvB,CACD,CAN8B,EACjC,IAAK,GAAIyG,CAAAA,EAAE,CAAG,CAAd,CAAiBA,EAAE,CAAGtF,WAAW,CAACP,MAAZ,CAAmB3B,MAAzC,CAAiDwH,EAAE,EAAnD,CAAuD,QAA9CA,EAA8C,EAOtD,CAEF,CACD;AAEA,GAAIG,CAAAA,UAAU,CAAC,CAAf,CACA,GAAG,CAACzF,WAAW,CAAC4C,aAAhB,CAA8B,CAC5B,IAAK,GAAIX,CAAAA,EAAE,CAAG,CAAd,CAAiBA,EAAE,CAAGjC,WAAW,CAACJ,OAAZ,CAAoB9B,MAA1C,CAAkDmE,EAAE,EAApD,CAAwD,CACtDwD,UAAU,EAAIlD,UAAU,CAACvC,WAAW,CAACJ,OAAZ,CAAoBqC,EAApB,EAAwBI,GAAzB,CAAV,CAAyCE,UAAU,CAACvC,WAAW,CAACJ,OAAZ,CAAoBqC,EAApB,EAAwByD,MAAzB,CAApD,CAAyFjB,WAAtG,CACD,CACF,CACD;AACA,GAAIkB,CAAAA,eAAe,CAAC,CAApB,CACA;AACA,GAAIC,CAAAA,cAAc,CAAC,CAAnB,CAEA,GAAIC,CAAAA,WAAW,CAAEV,UAAU,CAACF,aAAX,CAAyBI,UAAzB,CAAoCI,UAApC,CAA+CL,mBAAhD,EAAsEO,eAAe,CAACC,cAAtF,CAAhB,CACA;AAEA;AACE;AACA,GAAME,CAAAA,QAAQ,CAAGvB,IAAI,CAACC,GAAL,CAAS1E,OAAO,CAACT,MAAR,CAAiBS,OAAO,CAACV,QAAlC,CAAjB,CACA,GAAI2G,CAAAA,QAAQ,CAAGxB,IAAI,CAACG,IAAL,CAAUoB,QAAQ,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAlB,CAAf,CACA,GAAGC,QAAQ,EAAE,CAAV,EAAeA,QAAQ,EAAE,CAA5B,CAA8B,CAC5BA,QAAQ,CAAC,CAAT,CACD,CAGD;AACA,GAAIC,CAAAA,WAAW,CAAClG,OAAO,CAACD,WAAR,CAAoBoB,MAApB,CAA2B,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC4C,OAAF,EAAW,KAAb,EAA5B,CAAhB,CACA,GAAIkE,CAAAA,cAAc,CAACD,WAAW,CAAC/E,MAAZ,CAAmB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACsC,eAAF,EAAmB,IAArB,EAApB,CAAnB,CACA,GAAIyE,CAAAA,iBAAiB,CAACF,WAAW,CAAC/E,MAAZ,CAAmB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACsC,eAAF,EAAmB,KAArB,EAApB,CAAtB,CACA,GAAI0E,CAAAA,mBAAmB,CAACH,WAAW,CAAC/E,MAAZ,CAAmB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC0C,aAAF,EAAiB,IAAnB,EAApB,EAA6C/D,MAArE,CACE,CACF;AACA,GAAIsI,CAAAA,kBAAkB,CAACF,iBAAiB,CAACjF,MAAlB,CAAyB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACwC,cAAF,EAAkB,IAApB,EAA1B,EAAoD7D,MAA3E,CACA,GAAIuI,CAAAA,iBAAiB,CAACH,iBAAiB,CAACjF,MAAlB,CAAyB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAACwC,cAAF,EAAkB,KAApB,EAA1B,EAAqD7D,MAA3E,CAEA,GAAIwI,CAAAA,UAAU,CAAC,CAACF,kBAAkB,CAAC,CAAnB,CACK7D,UAAU,CAAC6D,kBAAD,CAAV,CAAiC7D,UAAU,CAAC6B,YAAY,CAACtG,MAAb,CAAoB,CAApB,CAAsBsG,YAAY,CAAC,CAAD,CAAZ,CAAgBc,SAAtC,CAAgD,CAAjD,CADhD,CACqG,CADtG,GAEOmB,iBAAiB,CAAC,CAAlB,CACAA,iBAAD,EAAuBjC,YAAY,CAACtG,MAAb,CAAoB,CAApB,CAAsBsG,YAAY,CAAC,CAAD,CAAZ,CAAgBvF,KAAtC,CAA4C,CAAnE,CADC,CACsE,CAH7E,CAAf,CAKA;AACA,GAAI0H,CAAAA,OAAO,CAAGL,iBAAiB,CAACpI,MAAlB,CAAyB,CAAzB,CACDyE,UAAU,CAAC2D,iBAAiB,CAACpI,MAAnB,CAAV,CAAuCyE,UAAU,CAAC4B,eAAe,CAACrG,MAAhB,CAAuB,CAAvB,CAAyByE,UAAU,CAAC4B,eAAe,CAAC,CAAD,CAAf,CAAmBtF,KAApB,CAAnC,CAA8D,CAA/D,CADhD,CACmH,CADjI,CAGA;AACA,GAAI2H,CAAAA,gBAAgB,CAAEL,mBAAmB,CAAC,CAApB,CACT5D,UAAU,CAAC4D,mBAAD,CAAV,EAAmC9B,iBAAiB,CAACvG,MAAlB,CAAyB,CAAzB,CAA2BuG,iBAAiB,CAAC,CAAD,CAAjB,CAAqBxF,KAAhD,CAAsD,CAAzF,CADS,CACoF,CAD1G,CAGA;AACA,GAAI4H,CAAAA,OAAO,CAAC,CAAZ,CACA,GAAG,CAAC3G,OAAO,CAACH,kBAAZ,CAA+B,CAC7B,GAAGrB,gBAAgB,CAACR,MAAjB,CAAwB,CAA3B,CAA6B,8BACpBwH,IADoB,EAE3B,GAAIC,CAAAA,OAAO,CAAGjH,gBAAgB,CAACgH,IAAD,CAA9B,CACA,GAAIE,CAAAA,UAAU,CAACpH,QAAQ,CAAC6C,MAAT,CAAgB,SAAA9B,CAAC,QAAEA,CAAAA,CAAC,CAAC1C,KAAF,EAAS8I,OAAX,EAAjB,CAAf,CACA,GAAGC,UAAU,CAAC1H,MAAX,CAAkB,CAArB,CAAuB,CACrB2I,OAAO,EAAGlE,UAAU,CAACiD,UAAU,CAAC,CAAD,CAAV,CAAc3G,KAAf,CAApB,CACD,CAN0B,EAC7B,IAAK,GAAIyG,CAAAA,IAAE,CAAG,CAAd,CAAiBA,IAAE,CAAGhH,gBAAgB,CAACR,MAAvC,CAA+CwH,IAAE,EAAjD,CAAqD,SAA5CA,IAA4C,EAOpD,CACA,CACF,CACD;AACA,GAAIoB,CAAAA,OAAO,CAAC,CAAZ,CACA,GAAG,CAAC5G,OAAO,CAAC8C,aAAZ,CAA0B,CACxB,IAAK,GAAIX,CAAAA,IAAE,CAAG,CAAd,CAAiBA,IAAE,CAAGnC,OAAO,CAACF,OAAR,CAAgB9B,MAAtC,CAA8CmE,IAAE,EAAhD,CAAoD,CAClDyE,OAAO,EAAInE,UAAU,CAACzC,OAAO,CAACF,OAAR,CAAgBqC,IAAhB,EAAoBI,GAArB,CAAV,CAAqCE,UAAU,CAACzC,OAAO,CAACF,OAAR,CAAgBqC,IAAhB,EAAoByD,MAArB,CAAhD,CAAiFK,QAA3F,CACD,CACF,CACD;AACA,GAAIY,CAAAA,YAAY,CAAC,CAAjB,CACA;AACA,GAAIC,CAAAA,WAAW,CAAC,CAAhB,CACA,GAAIC,CAAAA,QAAQ,CAAEN,OAAO,CAACD,UAAR,CAAmBG,OAAnB,CAA2BC,OAA3B,CAAmCF,gBAApC,EAAuDG,YAAY,CAACC,WAApE,CAAb,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOJkL,IAAI,CAACtV,IAAL,cAAU,sCACA,eAAO,SAAS,CAAC,OAAjB,wBACA,oCACM,mCACE,oCADF,cAEE,wCAFF,cAGE,WAAI,SAAS,CAAC,WAAd,+BAHF,GADN,EADA,cASM,sCACA,mCACE,6BADF,cAEE,6BAAS+J,OAAO,CAACsM,OAAR,CAAgB,CAAhB,CAAT,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,kBAA+B1N,UAAU,CAAC0N,OAAX,CAAmB,CAAnB,CAA/B,OAHF,GADA,cAMA,mCACE,iCADF,cAEE,6BAASvM,UAAU,CAACuM,OAAX,CAAmB,CAAnB,CAAT,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,kBAA+B5N,aAAa,CAAC4N,OAAd,CAAsB,CAAtB,CAA/B,OAHF,GANA,cAWA,mCACE,6BADF,cAEE,6BAASpM,OAAO,CAACoM,OAAR,CAAgB,CAAhB,CAAT,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,kBAA+BxN,UAAU,CAACwN,OAAX,CAAmB,CAAnB,CAA/B,OAHF,GAXA,cAgBA,mCACE,gCADF,cAEE,iCAFF,cAGE,WAAI,SAAS,CAAC,WAAd,uBAHF,GAhBA,cAqBA,mCACE,uCADF,cAEE,6BAASrM,gBAAgB,CAACqM,OAAjB,CAAyB,CAAzB,CAAT,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,kBAA+BzN,mBAAmB,CAACyN,OAApB,CAA4B,CAA5B,CAA/B,OAHF,GArBA,cA0BA,mCACE,gCADF,cAEE,6BAASnM,OAAO,CAACmM,OAAR,CAAgB,CAAhB,CAAT,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,kBAA+BpN,UAAU,CAACoN,OAAX,CAAmB,CAAnB,CAA/B,OAHF,GA1BA,cA+BA,mCACE,iCADF,cAEE,6BAASjM,WAAW,CAACiM,OAAZ,CAAoB,CAApB,CAAT,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,kBAA+BjN,cAAc,CAACiN,OAAf,CAAuB,CAAvB,CAA/B,OAHF,GA/BA,cAoCA,mCACE,kCADF,cAEE,6BAASlM,YAAY,CAACkM,OAAb,CAAqB,CAArB,CAAT,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,kBAA+BlN,eAAe,CAACkN,OAAhB,CAAwB,CAAxB,CAA/B,OAHF,GApCA,cAyCA,mCACE,mCAAI,4BAAJ,OADF,cAEE,mCAAI,4BAAQhM,QAAQ,CAACgM,OAAT,CAAiB,CAAjB,CAAR,GAAJ,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,wBAA0B,4BAAQhN,WAAW,CAACgN,OAAZ,CAAoB,CAApB,CAAR,GAA1B,OAHF,GAzCA,cA8CA,mCACE,mCAAI,uCAAJ,OADF,cAEE,mCAAI,4BAAQ,CAAEhM,QAAQ,CAAChB,WAAV,CAAuB,CAAvB,CAA2BgB,QAAQ,CAAChB,WAApC,CAAkD,CAAnD,EAAsDgN,OAAtD,CAA8D,CAA9D,CAAR,GAAJ,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,wBAA0B,4BAAQ7S,WAAW,CAAC3E,QAAZ,CAAqBwX,OAArB,CAA6B,CAA7B,CAAR,GAA1B,OAHF,GA9CA,cAmDA,mCACE,mCAAI,mCAAJ,OADF,cAEE,mCAAI,4BAAQ,CAAEhM,QAAQ,CAAChB,WAAV,EAAwB,CAAxB,CAA2B,CAACgB,QAAQ,CAAChB,WAAV,EAA0B,CAAC,CAAtD,CAA0D,CAA3D,EAA8DgN,OAA9D,CAAsE,CAAtE,CAAR,GAAJ,OAFF,cAGE,YAAI,SAAS,CAAC,WAAd,wBAA0B,4BAAQ7S,WAAW,CAACzE,WAAZ,CAAwBsX,OAAxB,CAAgC,CAAhC,CAAR,GAA1B,OAHF,GAnDA,GATN,GADA,EAAV,EAuEE,MAAOf,CAAAA,IAAP,CACD,CACF,CAGF,CAvNA,EADD,EADF,EADA,EADA,EAXF,GAxSJ,GAFA,EAlDA,GADJ,EAFA,EADJ,EADJ,EAFH,cAumBG,MAAC,MAAD,EAAQ,IAAI,CAAE1I,gBAAd,CAAgC,eAAe,CAAE,IAAjD,CAAuD,QAAQ,CAAE,IAAjE,CAAuE,OAAO,CAAE,yBAAMC,CAAAA,mBAAmB,CAAC,CAACD,gBAAF,CAAzB,EAAhF,CAA8H,IAAI,CAAC,KAAnI,wBACI,KAAC,YAAD,wBACI,KAAC,WAAD,2BADJ,EADJ,cASI,MAAC,UAAD,yBACE,YAAK,SAAS,CAAC,KAAf,uBACA,aAAK,SAAS,CAAC,UAAf,wBACY,cAAO,GAAG,CAAC,QAAX,CAAoB,KAAK,CAAE,CAAC0J,UAAU,CAAC,MAAZ,CAA3B,8BADZ,cAEY,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAEZ,KAAK,CAAE,KAAT,CAAeC,QAAQ,CAAC,MAAxB,CAAf,CACC,QAAQ,CAAEhI,eADX,CAC4B,IAAI,CAAC,UADjC,CAEC,OAAO,CAAEb,WAAW,CAAC1H,gBAFtB,CAGC,KAAK,CAAE0H,WAAW,CAAC1H,gBAHpB,CAGsC,EAAE,CAAC,kBAHzC,EAFZ,GADA,EADF,cAUC,aAAM,KAAK,CAAE,CAACgQ,KAAK,CAAC,KAAP,CAAaC,OAAO,CAACvI,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,EAAnC,CAAsC,MAA3D,CAAb,+FAVD,cAwBE,YAAK,SAAS,CAAC,gBAAf,EAxBF,cAyBE,aAAK,SAAS,CAAC,KAAf,wBACM,aAAK,SAAS,CAAC,UAAf,wBACM,eAAO,GAAG,CAAC,QAAX,CAAoB,KAAK,CAAE,CAACkR,UAAU,CAAC,MAAZ,CAA3B,qCAA0D,aAAM,KAAK,CAAE,CAAClB,KAAK,CAAC,KAAP,CAAb,eAA1D,GADN,cAEM,KAAC,MAAD,EAAQ,QAAQ,CAAEzH,eAAlB,CAAmC,KAAK,CAAEb,WAAW,CAAC0B,SAAtD,CACE,IAAI,CAAC,MADP,CACc,EAAE,CAAC,WADjB,CAC6B,WAAW,CAAC,YADzC,EAFN,GADN,cAOM,aAAK,SAAS,CAAC,UAAf,wBACM,eAAO,GAAG,CAAC,QAAX,CAAoB,KAAK,CAAE,CAAC8H,UAAU,CAAC,MAAZ,CAA3B,oCAAyD,aAAM,KAAK,CAAE,CAAClB,KAAK,CAAC,KAAP,CAAb,eAAzD,GADN,cAEM,KAAC,MAAD,EAAQ,QAAQ,CAAEzH,eAAlB,CAAmC,IAAI,CAAC,MAAxC,CAA+C,KAAK,CAAEb,WAAW,CAAC4B,QAAlE,CACA,EAAE,CAAC,UADH,CACc,WAAW,CAAC,WAD1B,EAFN,GAPN,cAaM,aAAK,SAAS,CAAC,UAAf,wBAEI,eAAO,GAAG,CAAC,QAAX,CAAoB,KAAK,CAAE,CAAC4H,UAAU,CAAC,MAAZ,CAA3B,wCAA6D,aAAM,KAAK,CAAE,CAAClB,KAAK,CAAC,KAAP,CAAb,eAA7D,GAFJ,cAE6G,aAF7G,cAGI,KAAC,UAAD,EAAY,UAAU,CAAC,aAAvB,CAEA,SAAS,CAAC,cAFV,CAGA,QAAQ,CAAElI,kBAHV,CAG8B,QAAQ,CAAE,kBAACqI,IAAD,CAAS,CACDpI,qBAAqB,CAACoI,IAAD,CAArB,CAC/B,CALjB,EAHJ,GAbN,GAzBF,cAkDE,YAAK,SAAS,CAAC,gBAAf,EAlDF,cAmDE,aAAK,SAAS,CAAC,KAAf,wBACE,aAAK,SAAS,CAAC,UAAf,wBACI,eAAO,GAAG,CAAC,QAAX,CAAqB,KAAK,CAAE,CAACe,UAAU,CAAC,MAAZ,CAA5B,iCAAuD,aAAM,KAAK,CAAE,CAAClB,KAAK,CAAC,KAAP,CAAb,eAAvD,GADJ,cAEc,KAAC,MAAD,EACE,SAAS,CAAC,UADZ,CAEE,WAAW,CAAC,QAFd,CAGE,KAAK,CAAE9U,MAAM,CAACkV,IAAP,CAAY,SAAA3J,GAAG,QAAIA,CAAAA,GAAG,CAAC5L,KAAJ,GAAcmN,qBAAlB,EAAf,CAAyD;AAHlE,CAIE,OAAO,CAAE9M,MAAQ;AAJnB,CAKE,QAAQ,CAAEwN,qBAAuB;AALnC,EAFd,GADF,cAYE,aAAK,SAAS,CAAC,UAAf,CAA2B,KAAK,CAAE,CAACuH,OAAO,CAACvI,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,EAAnC,CAAsC,MAA/C,CAAlC,wBACE,cAAO,GAAG,CAAC,QAAX,mCADF,cACmD,aADnD,cAEE,KAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAAyB,OAAO,CAAE,yBAAKmM,CAAAA,aAAa,EAAlB,EAAlC,gBAFF,GAZF,GAnDF,cAqEE,YAAK,SAAS,CAAC,gBAAf,EArEF,cAsEE,aAAK,SAAS,CAAC,KAAf,wBACE,aAAK,SAAS,CAAC,UAAf,wBACU,eAAO,GAAG,CAAC,QAAX,CAAqB,KAAK,CAAE,CAAC+E,UAAU,CAAC,MAAZ,CAA5B,0BAA8DxJ,WAAW,CAACxH,wBAA1E,GADV,cAEU,KAAC,MAAD,EACA,SAAS,CAAC,UADV,CAEA,UAAU,CAAEwH,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,CAAC0H,WAAW,CAACxH,wBAAhD,CAAyE,KAFrF,CAGA,WAAW,CAAC,oBAHZ,CAIA,KAAK,CAAEyK,WAAW,CAACyF,IAAZ,CAAiB,SAAA3J,GAAG,QAAIA,CAAAA,GAAG,CAAC5L,KAAJ,GAAcgQ,iBAAlB,EAApB,CAA0D;AAJjE,CAKA,OAAO,CAAEF,WAAa;AALtB,CAMA,QAAQ,CAAEG,iBAAmB;AAN7B,EAFV,GADF,cAYE,aAAK,SAAS,CAAC,UAAf,wBACM,cAAO,GAAG,CAAC,QAAX,CAAqB,KAAK,CAAE,CAACoG,UAAU,CAAC,MAAZ,CAA5B,8BADN,cAEgB,KAAC,MAAD,EACA,EAAE,CAAC,iBADH,CAEA,SAAS,CAAC,UAFV,CAGA,UAAU,CAAExJ,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,CAAC0H,WAAW,CAACxH,wBAAhD,CAAyE,KAHrF,CAIA,WAAW,CAAC,QAJZ,CAKA,KAAK,CAAE6K,OAAO,CAACqF,IAAR,CAAa,SAAA3J,GAAG,QAAIA,CAAAA,GAAG,CAAC5L,KAAJ,GAAcoQ,cAAlB,EAAhB,CAAmD;AAL1D,CAMA,OAAO,CAAEF,OAAS;AANlB,CAOA,QAAQ,CAAEG,kBAAoB;AAP9B,EAFhB,GAZF,cAyBE,aAAK,SAAS,CAAC,UAAf,wBACM,cAAO,GAAG,CAAC,QAAX,CAAoB,KAAK,CAAE,CAACgG,UAAU,CAAC,MAAZ,CAA3B,sBADN,cAEc,KAAC,MAAD,EACA,SAAS,CAAC,UADV,CAEA,WAAW,CAAC,QAFZ,CAGA,UAAU,CAAExJ,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,CAAC0H,WAAW,CAACxH,wBAAhD,CAAyE,KAHrF,CAIA,KAAK,CAAEiL,QAAQ,CAACiF,IAAT,CAAc,SAAA3J,GAAG,QAAIA,CAAAA,GAAG,CAAC5L,KAAJ,GAAc0Q,mBAAlB,EAAjB,CAAyD;AAJhE,CAKA,OAAO,CAAEJ,QAAU;AALnB,CAMA,QAAQ,CAAEM,uBAAyB;AANnC,EAFd,GAzBF,GAtEF,cA2GE,YAAK,SAAS,CAAC,gBAAf,EA3GF,cA4GE,aAAK,SAAS,CAAC,KAAf,wBAEG,aAAK,SAAS,CAAC,UAAf,wBACK,cAAO,GAAG,CAAC,QAAX,0BADL,cAEe,KAAC,MAAD,EACQ,SAAS,CAAC,UADlB,CAEQ,WAAW,CAAC,QAFpB,CAGQ,UAAU,CAAE/D,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,CAAC0H,WAAW,CAACxH,wBAAhD,CAAyE,KAH7F,CAIQ,KAAK,CAAEwL,YAAY,CAAC0E,IAAb,CAAkB,SAAA3J,GAAG,QAAIA,CAAAA,GAAG,CAAC5L,KAAJ,GAAc+Q,oBAAlB,EAArB,CAA8D;AAJ7E,CAKQ,OAAO,CAAEF,YAAc;AAL/B,CAMQ,QAAQ,CAAEG,2BAA6B;AAN/C,EAFf,GAFH,cAcG,aAAK,SAAS,CAAC,UAAf,wBACA,cAAO,GAAG,CAAC,QAAX,qBADA,cAEO,KAAC,MAAD,EAAQ,QAAQ,CAAEtD,eAAlB,CAAmC,QAAQ,CAAEb,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,CAAC0H,WAAW,CAACxH,wBAAhD,CAAyE,KAAtH,CAA6H,KAAK,CAAEwH,WAAW,CAACuB,QAAhJ,CAA0J,IAAI,CAAC,MAA/J,CAAsK,EAAE,CAAC,UAAzK,CAAoL,WAAW,CAAC,SAAhM,EAFP,GAdH,cAoBG,aAAK,SAAS,CAAC,UAAf,wBACQ,cAAO,GAAG,CAAC,QAAX,2BADR,cAEQ,KAAC,MAAD,EAAQ,QAAQ,CAAEV,eAAlB,CAAmC,QAAQ,CAAEb,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,CAAC0H,WAAW,CAACxH,wBAAhD,CAAyE,KAAtH,CAA6H,KAAK,CAAEwH,WAAW,CAAC6B,YAAhJ,CAA8J,IAAI,CAAC,MAAnK,CAA0K,EAAE,CAAC,cAA7K,CAA4L,WAAW,CAAC,SAAxM,EAFR,GApBH,GA5GF,cAsIE,YAAK,SAAS,CAAC,gBAAf,EAtIF,cAuIE,YAAK,SAAS,CAAC,KAAf,uBAEE,aAAK,SAAS,CAAC,UAAf,wBACQ,cAAO,GAAG,CAAC,QAAX,4BADR,cAEU,KAAC,MAAD,EAAQ,QAAQ,CAAEhB,eAAlB,CAAmC,QAAQ,CAAEb,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,CAAC0H,WAAW,CAACxH,wBAAhD,CAAyE,KAAtH,CAA6H,KAAK,CAAEwH,WAAW,CAAC7O,OAAhJ,CAAyJ,IAAI,CAAC,MAA9J,CAAqK,EAAE,CAAC,SAAxK,CAAkL,WAAW,CAAC,OAA9L,EAFV,GAFF,EAvIF,cAgJE,YAAK,SAAS,CAAC,gBAAf,EAhJF,cAiJE,aAAK,SAAS,CAAC,KAAf,wBAEI,aAAK,SAAS,CAAC,UAAf,wBACQ,cAAO,GAAG,CAAC,QAAX,CAAoB,KAAK,CAAE,CAACqY,UAAU,CAAC,MAAZ,CAA3B,2BADR,cAEQ,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAEZ,KAAK,CAAE,KAAT,CAAeC,QAAQ,CAAC,MAAxB,CAAf,CACA,QAAQ,CAAEhI,eADV,CAC2B,IAAI,CAAC,UADhC,CAEA,QAAQ,CAAEb,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC,CAAC0H,WAAW,CAACxH,wBAAhD,CAAyE,KAFnF,CAGA,OAAO,CAAEwH,WAAW,CAAC3H,cAHrB,CAIA,KAAK,CAAE2H,WAAW,CAAC3H,cAJnB,CAImC,EAAE,CAAC,gBAJtC,EAFR,GAFJ,cAUI,aAAK,SAAS,CAAC,UAAf,CAA0B,KAAK,CAAE,CAACmR,UAAU,CAAC,MAAZ,CAAmBjB,OAAO,CAACvI,WAAW,CAACxH,wBAAZ,EAAsC,IAAtC,CAA2C,EAA3C,CAA8C,MAAzE,CAAjC,wBACQ,cAAO,GAAG,CAAC,QAAX,CAAoB,KAAK,CAAE,CAACqQ,QAAQ,CAAC,MAAV,CAA3B,kCADR,cAEQ,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAED,KAAK,CAAE,KAAT,CAAeC,QAAQ,CAAC,MAAxB,CAAf,CACA,QAAQ,CAAEhI,eADV,CAC2B,IAAI,CAAC,UADhC,CAEA,QAAQ,CAAEb,WAAW,CAAC1H,gBAAZ,EAA8B,IAA9B,CAAmC0H,WAAW,CAACxH,wBAA/C,CAAwE,KAFlF,CAGA,OAAO,CAAEwH,WAAW,CAACyJ,iBAHrB,CAIA,KAAK,CAAEzJ,WAAW,CAACyJ,iBAJnB,CAIsC,EAAE,CAAC,mBAJzC,EAFR,GAVJ,GAjJF,GATJ,cAkLI,MAAC,YAAD,yBACE,KAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAA2B,OAAO,CAAE,yBAAM9E,CAAAA,aAAa,EAAnB,EAApC,kBADF,CAC4E,GAD5E,cAEE,KAAC,OAAD,EAAS,KAAK,CAAC,WAAf,CAA2B,OAAO,CAAE,yBAAM5E,CAAAA,mBAAmB,CAAC,CAACD,gBAAF,CAAzB,EAApC,oBAFF,GAlLJ,GAvmBH,cA8xBG,MAAC,MAAD,EAAQ,IAAI,CAAEU,kBAAd,CAAkC,eAAe,CAAE,IAAnD,CAAyD,QAAQ,CAAE,IAAnE,CAAyE,OAAO,CAAE,yBAAMC,CAAAA,qBAAqB,CAAC,CAACD,kBAAF,CAA3B,EAAlF,CAAoI,IAAI,CAAC,IAAzI,wBACI,KAAC,YAAD,kCADJ,cAEI,MAAC,UAAD,8CACiCR,WAAW,CAAC0B,SAD7C,KACyD1B,WAAW,CAAC4B,QADrE,kBAFJ,cAKI,MAAC,YAAD,yBACE,KAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAA2B,OAAO,CAAE,yBAAMkB,CAAAA,aAAa,EAAnB,EAApC,oBADF,CAC8E,GAD9E,cAEE,KAAC,OAAD,EAAS,KAAK,CAAC,WAAf,CAA2B,OAAO,CAAE,yBAAMrC,CAAAA,qBAAqB,CAAC,CAACD,kBAAF,CAA3B,EAApC,oBAFF,GALJ,GA9xBH,cAyyBG,MAAC,MAAD,EAAQ,IAAI,CAAEE,gBAAd,CAAgC,OAAO,CAAE,yBAAMC,CAAAA,mBAAmB,CAAC,CAACD,gBAAF,CAAzB,EAAzC,CAAyF,IAAI,CAAC,IAA9F,wBACE,KAAC,YAAD,EAAc,WAAW,KAAzB,uBACA,MAAC,WAAD,uCAAwB,cAAO,SAAS,CAAC,YAAjB,qBAAxB,OADA,EADF,cAIE,KAAC,UAAD,wBACA,KAAC,IAAD,EAAM,EAAE,CAAC,IAAT,uBACI,MAAC,KAAD,yBACE,MAAC,IAAD,yBACE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,wBADF,cAC6B,aAD7B,cAEE,KAAC,MAAD,wBAAS,mBAAIzR,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACV,QAAjB,CAAD,CAAN,CAAmCsL,MAAnC,CAA0C,aAA1C,CAAJ,EAAT,EAFF,GADF,cAKE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,sBADF,cAC2B,aAD3B,cAEE,KAAC,MAAD,wBAAS,mBAAInS,MAAM,CAAC,GAAIqC,CAAAA,IAAJ,CAASkF,OAAO,CAACT,MAAjB,CAAD,CAAN,CAAiCqL,MAAjC,CAAwC,aAAxC,CAAJ,EAAT,EAFF,GALF,cASE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,mBADF,cACwB,aADxB,cAEE,KAAC,MAAD,wBAAS,mBAAI5K,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA2B,CAA3B,CAA8BkT,WAAW,EAAzC,CAA4C,CAAhD,EAAT,EAFF,GATF,cAaE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,4BADF,cACiC,aADjC,cAEE,KAAC,MAAD,wBAAS,mBAAIlR,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA2B,CAA3B,CAA8BmT,QAAQ,EAAtC,CAAyC,CAA7C,EAAT,EAFF,GAbF,GADF,cAoBE,aApBF,cAqBE,MAAC,IAAD,yBACE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,sBADF,cAC2B,aAD3B,cAEE,KAAC,MAAD,wBAAS,mBAAInR,OAAO,CAACD,WAAR,CAAoB/B,MAApB,CAA2B,CAA3B,CAA8BgC,OAAO,CAACc,OAAR,CAAgB,CAAhB,EAAmBlE,KAAjD,CAAuD,CAA3D,EAAT,EAFF,GADF,cAKE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,sCADF,cAC2C,aAD3C,cAEE,KAAC,MAAD,wBAAS,mBAAIoD,OAAO,CAACH,kBAAR,EAA4B,IAA5B,CAAiC,KAAjC,CAAuC,IAA3C,EAAT,EAFF,GALF,cAUE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,4BADF,cACiC,aADjC,cAEE,KAAC,MAAD,wBAAS,mBAAIG,OAAO,CAACN,OAAR,CAAgB1B,MAAhB,CAAuB,CAAvB,CAA0BgC,OAAO,CAACN,OAAR,CAAgB,CAAhB,EAAmB9C,KAA7C,CAAmD,CAAvD,EAAT,EAFF,GAVF,cAeE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,8BADF,cACmC,aADnC,cAEE,KAAC,MAAD,wBAAS,mBAAIZ,mBAAJ,EAAT,EAFF,GAfF,GArBF,cA0CE,aA1CF,cA2CE,MAAC,IAAD,yBAIE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,8BADF,cACmC,aADnC,cAEE,KAAC,MAAD,wBAAS,4BAAQyG,UAAU,CAAEzC,OAAO,CAACP,WAAV,CAAV,CAAiCsT,OAAjC,CAAyC,CAAzC,CAAR,GAAT,EAFF,GAJF,cASE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,yBADF,cAC8B,aAD9B,cAEE,KAAC,MAAD,wBAAS,4BAAQtQ,UAAU,CAAElH,QAAQ,CAAC,CAAT,CAAayE,OAAO,CAACP,WAAR,CAAoBlE,QAAjC,CAA2C,CAA7C,CAAV,CAA0DwX,OAA1D,CAAkE,CAAlE,CAAR,GAAT,EAFF,GATF,cAcE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,wBACE,KAAC,MAAD,WAAUxC,cAAc,EAAE,CAAhB,CAAkB,gBAAlB,CAAqChV,QAAQ,CAAC,CAAT,CAAW,kBAAX,CAAgCE,WAAW,CAAC,CAAb,CAAgB,cAAhB,CAA+B,kBAA7G,EADF,cAC6I,aAD7I,cAEE,KAAC,MAAD,wBAAS,4BAAQ8U,cAAc,EAAE,CAAhB,CAAkB9N,UAAU,CAACzC,OAAO,CAACP,WAAT,CAA5B,CAAmDgD,UAAU,CAAElH,QAAQ,CAAC,CAAT,CAAWA,QAAX,CAAsBE,WAAW,CAAC,CAAb,CAAgBA,WAAhB,CAA4B,CAAnD,CAAV,CAAiEsX,OAAjE,CAAyE,CAAzE,CAA3D,GAAT,EAFF,GAdF,GA3CF,GADJ,EADA,EAJF,cA4EE,MAAC,YAAD,yBACA,KAAC,IAAD,EACM,GAAG,CAAE9Y,UADX,CAEM,MAAM,CAAC,IAFb,CAGM,KAAK,CAAC,IAHZ,CAIM,KAAK,CAAE,CAAC8X,OAAO,CAACnE,YAAY,EAAE,IAAd,CAAmB,EAAnB,CAAsB,MAA/B,CAJb,CAKM,GAAG,CAAC,QALV,EADA,cAQI,KAAC,OAAD,EAAS,KAAK,CAAC,UAAf,CAA0B,KAAK,CAAE,CAACsF,KAAK,CAAE,OAAR,CAAiBnB,OAAO,CAACnE,YAAY,EAAE,IAAd,CAAmB,MAAnB,CAA0B,EAAnD,CAAjC,CAAyF,OAAO,CAAE,yBAAMS,CAAAA,QAAQ,EAAd,EAAlG,UAAsH9S,QAAQ,CAAC,CAAT,CAAW,gBAAX,CAA4B,kBAAlJ,EARJ,cAUI,KAAC,OAAD,EAAS,KAAK,CAAC,UAAf,CAA0B,KAAK,CAAE,CAAC2X,KAAK,CAAE,OAAR,CAAjC,CAAoD,OAAO,CAAE,yBAAK/I,CAAAA,mBAAmB,CAAC,CAACD,gBAAF,CAAxB,EAA7D,0BAVJ,GA5EF,GAzyBH,GAHJ,EAHO,EAAR,CAg5BH,CA1kFD,CA2kFA,cAAe7P,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CButton,\r\n  CModal,\r\n  CModalTitle,\r\n  CModalHeader,\r\n  CModalBody,\r\n  CForm,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n  CInputGroup,\r\n  CInput,\r\n  CFormGroup,\r\n  CInputCheckbox,\r\n  CLabel,\r\n  CModalFooter,\r\n  CBadge,\r\n  CContainer,\r\n  CCollapse,\r\n  CSelect,\r\n  CCardFooter,\r\n  CImg\r\n} from '@coreui/react'\r\n\r\nimport DataTable from \"react-data-table-component\";\r\nimport DataTableExtensions from \"react-data-table-component-extensions\";\r\nimport Select from 'react-select';\r\nimport CIcon from '@coreui/icons-react';\r\nimport dataservice from '../../service/dataservice';\r\nimport { toast } from 'react-toastify';\r\nimport { InputDecimal } from \"../../commoncomponents/inputdecimal\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport { discounticon } from 'src/assets/icons/discounticon';\r\nimport moment from 'moment';\r\nimport uuid from 'react-uuid';\r\nimport FeesComputation from '../register/FeesComputation'\r\nimport TravelInfo from '../register/TravelInfo'\r\nimport GuestInfo from '../register/GuestInfo'\r\nimport Jumbotron from 'react-bootstrap/Jumbotron';\r\nimport Toast from 'react-bootstrap/Toast';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { userContext } from '../../../views/userContext'\r\nimport '../../../scss/bootstrap.css';\r\nconst notify = (type, message, systemerror) => {\r\n    switch (type) {\r\n      case 1:\r\n        toast.success(message, {\r\n          position: toast.POSITION.TOP_CENTER\r\n        });\r\n        break;\r\n      case 2:\r\n        var dtlmsg;\r\n        if (systemerror !== undefined) {\r\n          dtlmsg = <div>Please contact to administrator!<br></br>{message}</div>;\r\n        } else {\r\n          dtlmsg = <div>{message}</div>;\r\n        }\r\n  \r\n        toast.error(<div>\r\n          <CIcon name=\"cil-warning\" /> Error\r\n  \r\n          {dtlmsg}\r\n  \r\n        </div>, {\r\n          position: toast.POSITION.TOP_CENTER\r\n        });\r\n        break;\r\n        case 3:\r\n          \r\n          toast.info(message, {\r\n            position: toast.POSITION.TOP_CENTER,\r\n            autoClose: 5000,\r\n          });\r\n        break;\r\n  \r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  var processing=process.env.PUBLIC_URL+\"/processing.gif\";\r\nconst EditBooking = () => {\r\n  const history=useHistory();\r\n    var Background=process.env.PUBLIC_URL+\"/bgnew.jpg\";\r\n    const [contextdata, setcontextdata] = useState();\r\n    const [state, setState] = useState({refenecenum:\"\",emailid:\"\"});\r\n    const [fromDate, setFromDate] = useState(new Date());\r\n    const [toDate, setToDate] = useState(new Date());\r\n    const [accordion, setAccordion] = useState(0);\r\n    const [ispricerise, setIsPriceRise] = useState(\"\");\r\n    const [totaldue, setTotalDue] = useState(0);\r\n    const [totalrefund, setTotalRefund] = useState(0);\r\n    \r\n   \r\n    const getMonth=(month)=>{\r\n        var returnmonth=\"\";\r\n        switch (month) {\r\n            case 1:\r\n                returnmonth= \"Jan\";\r\n                break;\r\n            case 2:\r\n                returnmonth= \"Feb\";\r\n                break;\r\n            case 3:\r\n                returnmonth= \"Mar\";\r\n                break;\r\n            case 4:\r\n                returnmonth= \"Apr\";\r\n                break;\r\n            case 5:\r\n                returnmonth= \"May\";\r\n                break;\r\n            case 6:\r\n                returnmonth= \"Jun\";\r\n                break;\r\n                case 7:\r\n                returnmonth= \"Jul\";\r\n                break;\r\n                case 8:\r\n                returnmonth= \"Aug\";\r\n                break;\r\n                case 9:\r\n                returnmonth= \"Sep\";\r\n                break;\r\n                case 10:\r\n                returnmonth= \"Oct\";\r\n                break;\r\n                case 11:\r\n                returnmonth= \"Nov\";\r\n                break;\r\n                case 12:\r\n                returnmonth= \"Dec\";\r\n                break;\r\n\r\n\r\n\r\n\r\n\r\n        \r\n            default:\r\n                break;\r\n        }\r\n        return returnmonth;\r\n    }\r\n\r\n//#region Number of Guest  */\r\n    const [numberofguests, setNumberOfGuestData] = useState([]);\r\n    const [selectednumberguest, setSelectedNumberGuest] = useState(\"\");\r\n    const [isboatselectionopen, setIsBoatSeletionOpen] = useState(true);\r\n    const [isbookingfetch, setIsBookingFetch] = useState(false);\r\n    const getnumberofguest = () => {\r\n        let countdata = [];\r\n        for (let index = 1; index <= parseInt(25); index++) {\r\n          countdata.push({\r\n            value: index,\r\n            label: index.toString()\r\n          })\r\n      \r\n        }\r\n        setNumberOfGuestData(countdata);\r\n      }\r\n\r\n    const handleChangeOptionNOG = e => {\r\n        setSelectedNumberGuest(e.value);\r\n        \r\n      };\r\n      \r\n     //#endregion Number of Guest */ \r\n\r\n//#region Gender  */\r\n      const [Gender, setGender] = useState([]);\r\n      const getGender = () => {\r\n        let countdata = [];\r\n        let genderval = [\"Male\", \"Female\", \"Other\"]\r\n        for (let index = 0; index < 3; index++) {\r\n          countdata.push({\r\n            value: index,\r\n            label: genderval[index]\r\n          })\r\n      \r\n        }\r\n        setGender(countdata);\r\n      }\r\n       //#endregion Gender */ \r\n\r\n//#region Slot  */\r\n    const [timeslot, setTimeSlot] = useState([]);\r\n    const [selectedtimeslot, setSelectedTimeSlot] = useState(\"\");\r\n    \r\n    const getslotdata = () => {\r\n    \r\n    dataservice(\"slots\", { requestfor: 'getslots', data: { flag: 'a' } })\r\n        .then(function (data) {\r\n        if (data.resultkey == 1) {\r\n            var tempdata=data.resultvalue;\r\n            \r\n        var countdata=[];\r\n            for (let index = 0; index < tempdata.length; index++) {\r\n            \r\n            countdata.push({\r\n                value: tempdata[index].id,\r\n                label: tempdata[index].description\r\n            })\r\n            \r\n            \r\n            \r\n            }\r\n        \r\n            setTimeSlot(countdata);\r\n\r\n            \r\n            //document.write( dt );\r\n    \r\n        // setSelectedBoatData(countdata);\r\n\r\n        } else {\r\n            //  notify(2,\"No data found\");\r\n        }\r\n\r\n        })\r\n        .catch(function (edata) {\r\n        notify(2, edata.toString(), 1);\r\n        });\r\n\r\n\r\n\r\n    }\r\n    \r\n    const handleChangeOptionTS = e => {\r\n    \r\n        setSelectedTimeSlot(e.value);\r\n        \r\n    };\r\n    //#endregion Slot */ \r\n\r\n//#region Boat  */\r\n    const [boatdata, setBoatdata] = useState([]);\r\n    const [selectedboatdata, setSelectedBoatData] = useState([]);\r\n    \r\n    const getboatdata = () => {\r\n        dataservice(\"boat\", { requestfor: 'getboatcapacity', data: { flag: 'a' } })\r\n          .then(function (data) {\r\n            if (data.resultkey == 1) {\r\n              var tempdata=data.resultvalue;\r\n             \r\n      \r\n              var result = [];\r\n               \r\n              var countdata = [];\r\n              for (let index = 0; index < tempdata.length; index++) {\r\n                 let element = tempdata[index];\r\n                 element.uuid=uuid();\r\n                   var obj1={};\r\n                   obj1={ value: element.uuid,\r\n                    capacity:element.capacity,\r\n                     label:`  (capacity-` + element.capacity + `)`,price:element.twowayprice};\r\n                   countdata.push(obj1)\r\n               }\r\n              // setBoatdataarr(tempdata);\r\n            //    if(countdata.length>0){\r\n            //     setIsBoatSeletionOpen(false);\r\n                \r\n            //   }else{\r\n               \r\n            //     setIsBoatSeletionOpen(true);\r\n            //   }\r\n              setBoatdata(countdata);\r\n              \r\n              \r\n            } else {\r\n                notify(2,\"No data found\");\r\n            }\r\n      \r\n          })\r\n          .catch(function (edata) {\r\n            notify(2, edata.toString(), 1);\r\n          });\r\n      \r\n      \r\n      \r\n      }\r\n    const handleChangeOptionBC=e=>{\r\n       \r\n        setSelectedBoatData(Array.isArray(e) ? e.map(x => x.value) : []);\r\n      \r\n        \r\n      }\r\n    //#endregion Boat  */\r\n\r\n//#region common\r\n     const [booking, setBooking] = useState({\r\n      fromdate:new Date(),\r\n      todate:new Date(),\r\n      pax:0,\r\n      totalcharge:0,\r\n      hotelid:[],\r\n      boatid:[],\r\n      slotid:null,\r\n      ishotelprovideboat:0,\r\n      vehicle:[],\r\n      touristdata:[]\r\n\r\n  });\r\n\r\n  const [prevBooking, setPrevBooking] = useState({\r\n    fromdate:new Date(),\r\n    todate:new Date(),\r\n    pax:0,\r\n    totalcharge:0,\r\n    hotelid:[],\r\n    boatid:[],\r\n    slotid:null,\r\n    ishotelprovideboat:0,\r\n    vehicle:[],\r\n    touristdata:[],\r\n    totaldue:0,\r\n    totalrefund:0,\r\n\r\n});\r\n \r\n  \r\n  const searchbooking=()=>{\r\n      setIsShowActionBtn(false);\r\n      if(state.refenecenum==\"\"){\r\n        notify(2,\"Enter booking refenece number\");\r\n      }else if(state.emailid==\"\"){\r\n        notify(2,\"Enter email id\");\r\n      }else{\r\n          dataservice(\"booking\",{ requestfor: 'getbookingforedit' ,data:{refrencenumber:state.refenecenum,emailid:state.emailid}})\r\n          .then(function(data) {\r\n          if(data.resultkey==1){\r\n            \r\n              var result=data.resultvalue;\r\n              if(result.length>0){\r\n                setIsShowActionBtn(true);\r\n                 \r\n                  var _bookinginfo=result[0];\r\n                  if(_bookinginfo.isnoshowrefund==\"1\"){\r\n                    notify(3,\"Refund under process please wait patiently !\");\r\n                    return;\r\n                  }else{\r\n                     console.log(result[0]);\r\n                  setIsBookingFetch(true);    \r\n                  setIsBoatSeletionOpen(_bookinginfo.ishotelprovideboat==\"0\"?false:true);\r\n                  var pck=JSON.parse(_bookinginfo.package);\r\n                  var boat=_bookinginfo.boatid!=\"\"?JSON.parse(_bookinginfo.boatid):[];\r\n                  var hotel=_bookinginfo.hotelid!=\"\"?JSON.parse(_bookinginfo.hotelid):[];\r\n                  var boatids=[];\r\n                  if(boat.length>0){\r\n                      for (let index = 0; index < boat.length; index++) {\r\n                          const element = boat[index];\r\n                          var isboat=boatdata.filter(x=>x.capacity==element.capacity);\r\n                          if(isboat.length>0){\r\n                              isboat[0].value= element.uuid;\r\n                              boatids.push(element.uuid);\r\n                          }\r\n                      }\r\n                  }\r\n                  setBoatdata(boatdata);\r\n                  \r\n                 \r\n                  var _toursitdata=_bookinginfo.tourist;\r\n                  for (let td = 0; td < _toursitdata.length; td++) {\r\n                    let eletd = _toursitdata[td];\r\n                    eletd.isassigned=eletd.isassigned==\"0\"?false:true;\r\n                    eletd.isbraceletavailable=eletd.isbraceletavailable==\"0\"?false:true;\r\n                    eletd.isbraceletreturned=eletd.isbraceletreturned==\"0\"?false:true; \r\n                    eletd.ismaubancitizen=eletd.ismaubancitizen==\"0\"?false:true; \r\n                    eletd.isprimary=eletd.isprimary==\"0\"?false:true;\r\n                    eletd.isrentbracelet=eletd.isrentbracelet==\"0\"?false:true; \r\n                    eletd.isreturningguest=eletd.isreturningguest==\"0\"?false:true;\r\n                    eletd.islandhopping=eletd.islandhopping==\"0\"?false:true; \r\n                    eletd.isreturningguestvaildate=eletd.isreturningguest==\"0\"?false:true;;\r\n                    eletd.deleted=false;\r\n                    eletd.uuid=uuid();\r\n                    eletd.hotelid=JSON.parse(eletd.hotelid);\r\n                  } \r\n                  \r\n                  var _vehicledata=[];\r\n                  for (let vh = 0; vh < vehicledata.length; vh++) {\r\n                    const element = vehicledata[vh];\r\n                    var vehdata= (_bookinginfo.vehicle==\"\" || _bookinginfo.vehicle==undefined || _bookinginfo.vehicle==null)?[]:JSON.parse(_bookinginfo.vehicle);\r\n                    if(vehdata.length>0){\r\n                      var vehfilter= vehdata.filter(x=>x.id==element.id);\r\n                      if(vehfilter.length>0){\r\n                        element.qty=vehfilter[0].qty;\r\n                      }\r\n                    }\r\n                    _vehicledata.push(element);\r\n                    \r\n                  }\r\n                  \r\n                  setBooking({\r\n                      currentdate:new Date(_bookinginfo.currentdate),\r\n                      fromdate:new Date(_bookinginfo.fromdate),\r\n                      todate:new Date(_bookinginfo.todate),\r\n                      pax:_bookinginfo.pax,\r\n                      totalcharge:((parseFloat(_bookinginfo.totalcharge)-parseFloat(_bookinginfo.refundamt))+parseFloat(_bookinginfo.partialpayment))  ,\r\n                      hotelid:(_bookinginfo.hotelid!=\"\"?JSON.parse(_bookinginfo.hotelid):[]),\r\n                      boatid:(_bookinginfo.boatid!=\"\"?JSON.parse(_bookinginfo.boatid):[]),\r\n                      slotid:_bookinginfo.slotid,\r\n                      ishotelprovideboat:_bookinginfo.ishotelprovideboat==\"0\"?false:true,\r\n                      vehicle:_vehicledata,\r\n                      bookingrefencenum:_bookinginfo.hotelbookingref,\r\n                      parkingnotreq:_bookinginfo.parkingnotreq==\"0\"?false:true,\r\n                      touristdata:_toursitdata,\r\n                      totaldue:0,\r\n                      totalrefund:0,\r\n                      package:(_bookinginfo.package!=\"\"?JSON.parse(_bookinginfo.package):[]),\r\n                      bookingid:_bookinginfo.id\r\n                  });\r\n                  var _prevehicledata=JSON.parse(JSON.stringify(_vehicledata));\r\n                  var _pretoursitdata =JSON.parse(JSON.stringify(_toursitdata));\r\n                  setPrevBooking({\r\n                    currentdate:new Date(_bookinginfo.currentdate),\r\n                    fromdate:new Date(_bookinginfo.fromdate),\r\n                    todate:new Date(_bookinginfo.todate),\r\n                    pax:_bookinginfo.pax,\r\n                    totalcharge:((parseFloat(_bookinginfo.totalcharge)-parseFloat(_bookinginfo.refundamt))+parseFloat(_bookinginfo.partialpayment))  ,\r\n                    hotelid:(_bookinginfo.hotelid!=\"\"?JSON.parse(_bookinginfo.hotelid):[]),\r\n                    boatid:(_bookinginfo.boatid!=\"\"?JSON.parse(_bookinginfo.boatid):[]),\r\n                    slotid:_bookinginfo.slotid,\r\n                    ishotelprovideboat:_bookinginfo.ishotelprovideboat==\"0\"?false:true,\r\n                    vehicle:_prevehicledata,\r\n                    bookingrefencenum:_bookinginfo.hotelbookingref,\r\n                    parkingnotreq:_bookinginfo.parkingnotreq==\"0\"?false:true,\r\n                    touristdata:_pretoursitdata,\r\n                    totaldue:0,\r\n                    totalrefund:0,\r\n                    package:(_bookinginfo.package!=\"\"?JSON.parse(_bookinginfo.package):[]),\r\n                    bookingid:_bookinginfo.id\r\n                  });\r\n                  // SetBookingCalValues({currentBookingvalues:{},preBookingvalues:{}});\r\n                  setFromDate(new Date(_bookinginfo.fromdate));\r\n                  setToDate(new Date(_bookinginfo.todate));\r\n                  setSelectedNumberGuest(parseFloat(_bookinginfo.pax));\r\n                  setSelectedTimeSlot(_bookinginfo.slotid);\r\n                  setSelectedPackage(pck[0].id);\r\n                  setSelectedBoatData(boatids);\r\n                  setSelectedPreferredHotels(hotel[0]);\r\n                  }\r\n                 \r\n                  \r\n                  \r\n                  \r\n                  \r\n\r\n\r\n\r\n                 //(booking.todate);\r\n              \r\n              }else{\r\n                notify(2,\"booking number does not exist\");\r\n              }\r\n                \r\n              // setSeteditorval({ ...editorvalue, result });\r\n              // setSetedit({ ...edit, [\"value\"]: result});\r\n              //setFeesdata({ ...feedata, [\"data\"]: result });\r\n          }else{\r\n            notify(2,\"booking number does not exist\");\r\n          }\r\n              \r\n          })\r\n          .catch(function(edata){\r\n              notify(2,edata.toString(),1);\r\n          });\r\n      }\r\n\r\n\r\n      \r\n  }\r\n  const handleEBChange = (e) => {\r\n      const { id, value } = e.target\r\n\r\n      if (e.target.type === 'checkbox' ) {\r\n          setBooking({...booking, [id]: (e.target.checked==true?e.target.checked:false)});\r\n          switch (id) {\r\n            case \"parkingnotreq\":\r\n              \r\n              for (let index = 0; index < booking.vehicle.length; index++) {\r\n                const element = booking.vehicle[index];\r\n                element.qty=0;\r\n              } \r\n\r\n              if(e.target.checked){\r\n                setBooking(prevState => ({\r\n                  ...prevState,\r\n                  vehicle: booking.vehicle\r\n                }));\r\n              }\r\n              \r\n\r\n              break;\r\n          \r\n            default:\r\n              break;\r\n          }\r\n\r\n\r\n      }else{\r\n          setBooking({...booking,[id]:value});\r\n      }\r\n\r\n\r\n      \r\n  }\r\n  const handleChange = (e) => {\r\n      const { id, value } = e.target\r\n    \r\n     if (e.target.type === 'checkbox' ) {\r\n       setState({...state, [id]: (e.target.checked==true?e.target.checked:false)});\r\n     } else {\r\n       setState({...state, [id]: value });\r\n     }\r\n  }\r\n  const [feesdata, setFeesData] = useState([]);  \r\n  const getfees = () => {\r\n    dataservice(\"fees\", { requestfor: 'getfees', data: { flag: 'a' } })\r\n      .then(function (data) {\r\n       \r\n        if (data.resultkey == 1) {\r\n          //   \r\n          var result = data.resultvalue\r\n           \r\n          setFeesData({ ...feesdata, data: result });\r\n        } else {\r\n          //  notify(2,\"No data found\");\r\n        }\r\n\r\n      })\r\n      .catch(function (edata) {\r\n        notify(2, edata.toString(), 1);\r\n      });\r\n\r\n\r\n\r\n  }\r\n   useEffect(()=>{\r\n      getnumberofguest();\r\n      getslotdata();\r\n      getpreferredhotels();\r\n      getPackage();\r\n      getboatdata();\r\n      getvehicles();\r\n      getGender();\r\n      getCitizenship();\r\n      getCountry();\r\n      getProvince();\r\n      getMunicipalities();\r\n      getfees();\r\n   },[]);\r\n\r\n   \r\n   useEffect(()=>{\r\n    // if(selectedboatdata.length>0){\r\n       ReCal();\r\n     //}\r\n   },[selectedboatdata]);   \r\n   useEffect(()=>{\r\n    \r\n    if(booking!==undefined && booking.touristdata.length>0){\r\n        var pax=booking.touristdata.filter(x=>x.deleted==false).length;\r\n        setSelectedNumberGuest(parseFloat(pax));\r\n         ReCal();\r\n    }\r\n\r\n   },[booking]);\r\n   const ReCal=()=>{\r\n     //#region old cal\r\n    //   if(booking.touristdata!==undefined && booking.touristdata.length>0){\r\n    //   const diffTime = Math.abs(booking.todate - booking.fromdate);\r\n    //   // const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))+1;\r\n    //    let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    //    if(diffDays==0 || diffDays==1){\r\n    //      diffDays=1;\r\n    //    } \r\n    //    var environmentdata=feesdata.data.filter(x=>x.id==1);\r\n    //    var braceletdata=feesdata.data.filter(x=>x.id==4);\r\n    //    var islandhoppingdata=feesdata.data.filter(x=>x.id==9);\r\n    //    var ETAFamt=0;\r\n    //    var Braceletmt=0;\r\n    //    var IslandHoppingAmt=0;\r\n    //    var parking=0;\r\n    //    var Boatamt=0;\r\n    //    var exemptionamt=0;\r\n    //    var discountamt=0;\r\n    //    if(!booking.ishotelprovideboat){\r\n    //      if(selectedboatdata.length>0){\r\n    //       for (let bt = 0; bt < selectedboatdata.length; bt++) {\r\n    //         let eleboat = selectedboatdata[bt];\r\n    //         let filterboat=boatdata.filter(x=>x.value==eleboat);\r\n    //         if(filterboat.length>0){\r\n    //           Boatamt=+ parseFloat(filterboat[0].price);\r\n    //         }\r\n            \r\n    //       }\r\n    //      }\r\n        \r\n    //    }\r\n       \r\n    //    if(!booking.parkingnotreq){\r\n    //     for (let vh = 0; vh < booking.vehicle.length; vh++) {\r\n    //       parking+=((parseFloat(booking.vehicle[vh].qty)*(parseFloat(booking.vehicle[vh].amount) ))*(diffDays)); \r\n    //      }\r\n    //    }\r\n       \r\n    //    for (let index = 0; index < booking.touristdata.length; index++) {\r\n    //      const eletourist = booking.touristdata[index];\r\n    //      if(!eletourist.deleted)\r\n    //      {\r\n          \r\n    //       Braceletmt+=eletourist.isrentbracelet==true?(parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0)):(eletourist.isbraceletavailable==true?0:parseFloat(braceletdata[0].price));\r\n    //       IslandHoppingAmt+=eletourist.islandhopping==true?(parseFloat(islandhoppingdata.length>0?islandhoppingdata[0].price:0)):0;\r\n    //      if(!eletourist.ismaubancitizen){\r\n    //         ETAFamt+=parseFloat(environmentdata[0].price);\r\n    //      }else{\r\n    //         exemptionamt+=parseFloat(environmentdata[0].price);\r\n    //      }\r\n    //     }\r\n    //    }\r\n    //    var totalchr=(ETAFamt+Braceletmt+Boatamt+parking+IslandHoppingAmt)-(exemptionamt+discountamt);\r\n    //    var _diffval=(totalchr-booking.totalcharge);\r\n    //   var totaldue=(_diffval>0)==true?(_diffval):0;\r\n    //   var totalrefund=(_diffval<0)==true?(_diffval * (-1)):0;\r\n    //   setTotalDue(totaldue);\r\n    //   setTotalRefund(totalrefund);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      \r\n    //  }\r\n     //#endregion\r\n   \r\n     if(booking.touristdata!==undefined && booking.touristdata.length>0){\r\n       //pricing fees\r\n       var environmentdata=feesdata.data.filter(x=>x.id==1);\r\n       var braceletdata=feesdata.data.filter(x=>x.id==4);\r\n       var islandhoppingdata=feesdata.data.filter(x=>x.id==9);\r\n       //#region previous Charges \r\n       const prediffTime = Math.abs(prevBooking.todate - prevBooking.fromdate);\r\n       let prediffDays = Math.ceil(prediffTime / (1000 * 60 * 60 * 24));\r\n       if(prediffDays==0 || prediffDays==1){\r\n         prediffDays=1;\r\n       }\r\n      \r\n       //guest filter \r\n       var _prevaildguest=prevBooking.touristdata.filter(x=>x.deleted==false);\r\n       var _premaubaninguest=_prevaildguest.filter(x=>x.ismaubancitizen==true);\r\n       var _prenonmaubaninguest=_prevaildguest.filter(x=>x.ismaubancitizen==false);\r\n       var _preislandhoppingguest=_prevaildguest.filter(x=>x.islandhopping==true).length;\r\n       //bracelet filter\r\n       var _prerentbraceletcount=_prenonmaubaninguest.filter(x=>x.isrentbracelet==true).length;\r\n       var _preownbraceletcount=_prenonmaubaninguest.filter(x=>x.isrentbracelet==false).length;\r\n\r\n       var preBraceletmt=(_prerentbraceletcount>0?\r\n                           (parseFloat(_prerentbraceletcount) * parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0)):0)\r\n                           +(_preownbraceletcount>0?\r\n                           ((_preownbraceletcount) * (braceletdata.length>0?braceletdata[0].price:0)):0);\r\n\r\n       //environment charges\r\n       var preETAFamt=( _prenonmaubaninguest.length>0?\r\n                   (parseFloat(_prenonmaubaninguest.length) * parseFloat(environmentdata.length>0?parseFloat(environmentdata[0].price):0)):0);\r\n       \r\n       //island hopping charges\r\n       var preIslandHoppingAmt=(_preislandhoppingguest>0?\r\n                   (parseFloat(_preislandhoppingguest) * (islandhoppingdata.length>0?islandhoppingdata[0].price:0)):0);\r\n      \r\n       //boat charges\r\n       \r\n       var preBoatamt=0;\r\n       if(!prevBooking.ishotelprovideboat){\r\n          for (let bt = 0; bt < prevBooking.boatid.length; bt++) {\r\n            let eleboat = prevBooking.boatid[bt];\r\n            let filterboat=boatdata.filter(x=>x.value==eleboat.uuid);\r\n            if(filterboat.length>0){\r\n             preBoatamt+= parseFloat(filterboat[0].price);\r\n            }\r\n            \r\n          }\r\n         \r\n       }\r\n        //parking charges\r\n       \r\n       var preparking=0;\r\n       if(!prevBooking.parkingnotreq){\r\n         for (let vh = 0; vh < prevBooking.vehicle.length; vh++) {\r\n           preparking+=((parseFloat(prevBooking.vehicle[vh].qty)*(parseFloat(prevBooking.vehicle[vh].amount) ))*(prediffDays)); \r\n          }\r\n        }\r\n       //exemptiona charges for Maubanin\r\n       var preexemptionamt=0;\r\n       //senior citizen discount for Maubanin\r\n       var prediscountamt=0;\r\n\r\n       var preTotalAmt=(preETAFamt+preBraceletmt+preBoatamt+preparking+preIslandHoppingAmt)-(preexemptionamt+prediscountamt);\r\n       //#endregion previous Charges\r\n       \r\n       //#region Current Charges\r\n         // number of day guest stay\r\n         const diffTime = Math.abs(booking.todate - booking.fromdate);\r\n         let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n         if(diffDays==0 || diffDays==1){\r\n           diffDays=1;\r\n         } \r\n\r\n        \r\n         //guest filter \r\n         var _vaildguest=booking.touristdata.filter(x=>x.deleted==false);\r\n         var _maubaninguest=_vaildguest.filter(x=>x.ismaubancitizen==true);\r\n         var _nonmaubaninguest=_vaildguest.filter(x=>x.ismaubancitizen==false);\r\n         var _islandhoppingguest=_vaildguest.filter(x=>x.islandhopping==true).length;\r\n           ;\r\n         //bracelet filter\r\n         var _rentbraceletcount=_nonmaubaninguest.filter(x=>x.isrentbracelet==true).length;\r\n         var _ownbraceletcount=_nonmaubaninguest.filter(x=>x.isrentbracelet==false).length;\r\n\r\n         var Braceletmt=(_rentbraceletcount>0?\r\n                             (parseFloat(_rentbraceletcount) * parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0)):0)\r\n                             +(_ownbraceletcount>0?\r\n                             ((_ownbraceletcount) * (braceletdata.length>0?braceletdata[0].price:0)):0);\r\n\r\n         //environment charges\r\n         var ETAFamt=( _nonmaubaninguest.length>0?\r\n                     (parseFloat(_nonmaubaninguest.length) * parseFloat(environmentdata.length>0?parseFloat(environmentdata[0].price):0)):0);\r\n         \r\n         //island hopping charges\r\n         var IslandHoppingAmt=(_islandhoppingguest>0?\r\n                     (parseFloat(_islandhoppingguest) * (islandhoppingdata.length>0?islandhoppingdata[0].price:0)):0);\r\n        \r\n         //boat charges\r\n         var Boatamt=0;\r\n         if(!booking.ishotelprovideboat){\r\n           if(selectedboatdata.length>0){\r\n            for (let bt = 0; bt < selectedboatdata.length; bt++) {\r\n              let eleboat = selectedboatdata[bt];\r\n              let filterboat=boatdata.filter(x=>x.value==eleboat);\r\n              if(filterboat.length>0){\r\n                Boatamt+= parseFloat(filterboat[0].price);\r\n              }\r\n              \r\n            }\r\n           }\r\n         }\r\n          //parking charges\r\n         var parking=0;\r\n         if(!booking.parkingnotreq){\r\n           for (let vh = 0; vh < booking.vehicle.length; vh++) {\r\n             parking+=((parseFloat(booking.vehicle[vh].qty)*(parseFloat(booking.vehicle[vh].amount) ))*(diffDays)); \r\n            }\r\n          }\r\n         //exemptiona charges for Maubanin\r\n         var exemptionamt=0;\r\n         //senior citizen discount for Maubanin\r\n         var discountamt=0;\r\n         var TotalAmt=(ETAFamt+Braceletmt+Boatamt+parking+IslandHoppingAmt)-(exemptionamt+discountamt);\r\n       //#endregion Current Charges\r\n        \r\n       SetBookingCalValues({preBookingvalues:{\r\n        ETAF:preETAFamt,\r\n        Bracelet:preBraceletmt,\r\n        Boat:preBoatamt,\r\n        Package:preparking,\r\n        IslandHopping:preIslandHoppingAmt,\r\n        Parking:preparking,\r\n        Discount: prediscountamt,\r\n        Exemption:preexemptionamt,\r\n        Total:preTotalAmt,\r\n        TotalAmountDue:0,\r\n        TotalRefund:0,\r\n  \r\n    },currentBookingvalues:{\r\n      ETAF:ETAFamt,\r\n      Bracelet:Braceletmt,\r\n      Boat:Boatamt,\r\n      Package:parking,\r\n      IslandHopping:IslandHoppingAmt,\r\n      Parking:parking,\r\n      Discount: discountamt,\r\n      Exemption:exemptionamt,\r\n      Total:TotalAmt,\r\n      TotalAmountDue:((TotalAmt-preTotalAmt)>0?((TotalAmt-preTotalAmt)):0),\r\n      TotalRefund:((TotalAmt-preTotalAmt)<=0?((TotalAmt-preTotalAmt) * (-1)):0),\r\n  }});\r\n      \r\n\r\n\r\n    }\r\n\r\n\r\n   \r\n  }\r\n\r\n   const handleChangeHPB=e=>{\r\n      if(e.target.checked){\r\n          //booking.ishotelprovideboat=true;\r\n          setBooking({...booking, [\"ishotelprovideboat\"]: true});\r\n          setSelectedBoatData([]);\r\n        }else{\r\n         // booking.ishotelprovideboat=false;\r\n          setBooking({...booking, [\"ishotelprovideboat\"]: false});\r\n\r\n        }\r\n    }\r\n\r\n  const getdropdownarr=(result)=>{\r\n      let countdata = [];\r\n      //let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\r\n      for (let index = 0; index < result.length; index++) {\r\n        let item = result[index];\r\n        countdata.push({ value: item.id, label: item.description })\r\n      \r\n      }\r\n      return countdata;\r\n    }\r\n//#endregion \r\n    \r\n//#region hotel */\r\n      const [preferredhotels, setPreferredHotels] = useState([]);\r\n      const [selectedpreferredhotels, setSelectedPreferredHotels] = useState([]);\r\n      const [hotelbookingref, setHotelBookingRef] = useState([]);\r\n\r\n      const handleChangeOptionPH=e=>{\r\n        var Ph = preferredhotels.filter(obj => obj.value === e.value);\r\n        setSelectedPreferredHotels(Ph);\r\n      // setLocalTravelInfoData({...localtravelinfodata, [\"hotel\"]:Ph});\r\n      }\r\n\r\nconst getpreferredhotels = () => {\r\n \r\n  dataservice(\"hotel\", { requestfor: 'gethotel', data: { flag: 'a' } })\r\n    .then(function (data) {\r\n      if (data.resultkey == 1) {\r\n        var result = data.resultvalue;\r\n        let countdata = [];\r\n        //let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\r\n        for (let index = 0; index < result.length; index++) {\r\n          //   \r\n          let item = result[index];\r\n          countdata.push({ value: item.id, label: item.description })\r\n          if (countdata.length === 1) {\r\n            // setSelectedvehicle(item.id);\r\n          }\r\n        }\r\n        setPreferredHotels(countdata);\r\n      } else {\r\n        //  notify(2,\"No data found\");\r\n      }\r\n    })\r\n    .catch(function (edata) {\r\n      notify(2, edata.toString(), 1);\r\n    });\r\n\r\n}\r\n//#endregion hotel  */\r\n\r\n//#region Package  */\r\nconst [packagedata, setPackagedata] = useState([]);\r\nconst [packageddl, setPackageddl] = useState([]);\r\nconst [selectedPackage, setSelectedPackage] = useState(\"\");\r\n\r\nconst getPackage = () => {\r\n  dataservice(\"package\", { requestfor: 'getpackage', data: { flag: 'a' } })\r\n    .then(function (data) {\r\n      if (data.resultkey == 1) {\r\n        var result = data.resultvalue;\r\n        var countdata = [];\r\n        var pckddl = [];\r\n        for (let index = 0; index < result.length; index++) {\r\n          // \r\n          var d = result[index];\r\n          pckddl.push({\r\n            value: d.id,\r\n            label: d.description\r\n          })\r\n          if (d.isactive == \"1\") {\r\n            if(d.id==1){\r\n               \r\n              var packdetail = d.description \r\n              countdata.push({\r\n                id: d.id,\r\n                label: packdetail,\r\n                checked: true,\r\n                price: d.price\r\n              });\r\n            }else{\r\n              var packdetail = d.description \r\n              countdata.push({\r\n                id: d.id,\r\n                label: packdetail,\r\n                checked: false,\r\n                price: d.price\r\n              });\r\n            }\r\n            \r\n          }\r\n\r\n        }\r\n        setPackagedata(countdata);\r\n        \r\n        setPackageddl(pckddl);\r\n        \r\n      } else {\r\n      \r\n      }\r\n\r\n    })\r\n    .catch(function (edata) {\r\n      notify(2, edata.toString(), 1);\r\n    });\r\n\r\n}\r\n//#endregion Package  */\r\n\r\n//#region vehicle */\r\nconst [vehicledata, setVehicledata] = useState([]);\r\nconst handleChangevehicleqty = index => e => {\r\n       console.log('index: ' + index);\r\n       console.log('property name: '+ e.target.value);\r\n       let newArr = [...booking.vehicle]; // copying the old datas array\r\n       newArr[index].qty = isNaN(parseFloat(e.target.value))==false? parseFloat(e.target.value):0; // replace e.target.value with whatever you want to change it to\r\n        //setBooking(...booking,[\"vehicle\"],newArr);\r\n\r\n        setBooking(prevState => ({\r\n          ...prevState,\r\n          vehicle: newArr\r\n        }));\r\n\r\n\r\n        // ??\r\n    //   recaltotal();\r\n}\r\n\r\n\r\n\r\n\r\nconst getvehicles = () => {\r\n    // \r\n    dataservice(\"vehicle\", { requestfor: 'getvehicle', data: { flag: 'a' } })\r\n      .then(function (data) {\r\n        if (data.resultkey == 1) {\r\n          var result = data.resultvalue;\r\n          for (let index = 0; index < result.length; index++) {\r\n              let element = result[index];\r\n              element.qty=0;\r\n          }\r\n          setVehicledata(result);\r\n        } else {\r\n          //  notify(2,\"No data found\");\r\n        }\r\n      })\r\n      .catch(function (edata) {\r\n        notify(2, edata.toString(), 1);\r\n      });\r\n  \r\n  \r\n  \r\n  }\r\n//#endregion vehicle     \r\nconst test=()=>{\r\n    \r\n}\r\n//#region editbooking tourist  */\r\n const [edittouristpopup, setEditTouristpopup] = useState(\"\");\r\n const [edittourist, setEditTourist] = useState([]);\r\n const [returnguestmsg, setReturnGuestMsg] = useState(\"\");\r\n const [selectedtouristdob, setSelectedTouristDOB] = useState(new Date);\r\n const [selectedtouristgender, setSelectedTouristGender] = useState();\r\n const [deletetouristpopup, setDeletetouristpopup] = useState(false);\r\n \r\n const [isconfirmbooking, setIsConfirmBooking] = useState(false);\r\n const [isShowActionBtn, setIsShowActionBtn] = useState(false);\r\n \r\n const handleEBTChange = (e) => {\r\n   const { id, value } = e.target\r\n\r\n   if (e.target.type === 'checkbox' ) {\r\n     setEditTourist({...edittourist, [id]: (e.target.checked==true?e.target.checked:false)});\r\n     if(e.target.checked){\r\n      switch (id) {\r\n        case \"isreturningguest\":\r\n           \r\n          edittourist.isreturningguestvaildate=false;\r\n          edittourist.emailid=\"\";\r\n          edittourist.Address=\"\";\r\n          edittourist.Mobilenumber=\"\";\r\n          setReturnGuestMsg(\"Please vaildate guest!\");\r\n          break;\r\n      \r\n        default:\r\n          break;\r\n      }\r\n     }else{\r\n      switch (id) {\r\n        case \"isreturningguest\":\r\n           \r\n          edittourist.isreturningguestvaildate=false;\r\n          edittourist.emailid=\"\";\r\n          edittourist.Address=\"\";\r\n          edittourist.Mobilenumber=\"\";\r\n          setReturnGuestMsg(\"\");\r\n          break;\r\n      \r\n        default:\r\n          break;\r\n      }\r\n     }\r\n     \r\n   }else{\r\n     setEditTourist({...edittourist,[id]:value});\r\n   }\r\n\r\n\r\n   \r\n}\r\n\r\nconst handleChangeEBTGender=e=>{\r\n  edittourist.gender=e.value;\r\n \r\n  setSelectedTouristGender(e.value);\r\n}\r\n\r\nconst editdata=(row, e) =>{\r\n  \r\n\r\n  var fromdate=new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"));\r\n  var curdate=new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"));\r\n  if(curdate>fromdate){\r\n    notify(2, \"Can't edit past date travel itinerary !. \");\r\n    return;\r\n  }\r\n\r\n  \r\n  if(row==-1){\r\n    e={\r\n      actualimagename: \"\",\r\n      address1: \"\",\r\n      citizenid: \"1\",\r\n      deleted: false,\r\n      dob: moment(new Date()).format(\"YYYY-MM-DD\"),\r\n      emailid: \"\",\r\n      firstname: \"\",\r\n      gender: \"\",\r\n      hotelid: [],\r\n      isassigned: false,\r\n      isbraceletavailable: false,\r\n      isbraceletreturned: false,\r\n      ismaubancitizen: false,\r\n      isprimary: false,\r\n      isrentbracelet: false,\r\n      isreturningguest: false,\r\n      isreturningguestvaildate: false,\r\n      isalreadyvaildatereturningguest:false,\r\n      lastname: \"\",\r\n      mobilenumber: \"\",\r\n      municipalityid: \"1968\",\r\n      nationalityid: \"2\",\r\n      provinceid: \"81\",\r\n      qrcode: null,\r\n      rfid: null,\r\n      touristid: \"\",\r\n      uploadimage: \"\",\r\n      uuid:uuid(),\r\n    }\r\n\r\n  }\r\n  \r\n\r\n  \r\n  setEditTouristpopup(!edittouristpopup);\r\n  setEditTourist(e);\r\n  setSelectedTouristDOB(new Date(e.dob));\r\n  setSelectedTouristGender(parseFloat(e.gender));\r\n  setSelectedTouristCS(e.citizenid);\r\n  setSelectedEBTCOO(e.nationalityid);\r\n  var municipalitydata=  RawMunicipality.filter(x=>x.provinceid==e.provinceid);\r\n  var _ddpmunicipalitydata=getdropdownarr(municipalitydata);\r\n  setMunicipality(_ddpmunicipalitydata);\r\n  setSelectedEBTProvince(e.provinceid);\r\n  setSelectedMunicipality(e.municipalityid);\r\n}\r\n\r\nconst opendeletetouristpopup =(row, e) =>{\r\n  var fromdate=new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"));\r\n  var curdate=new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"));\r\n  if(curdate>fromdate){\r\n    notify(2, \"Can't edit past date travel itinerary !. \");\r\n    return;\r\n  }\r\n  setEditTourist(e);\r\n  setDeletetouristpopup(!deletetouristpopup);\r\n}\r\nconst deletetourist= ()=>{\r\n   \r\n  const newdata = booking[\"touristdata\"].map((item) => {\r\n    if (item.uuid ===edittourist.uuid) {\r\n      const updatedItem = {\r\n        ...item,\r\n        actualimagename: edittourist.actualimagename,\r\n        address1: edittourist.address1,\r\n        citizenid:  edittourist.citizenid,\r\n        dob: edittourist.dob,\r\n        emailid: edittourist.emailid,\r\n        firstname: edittourist.firstname,\r\n        gender: edittourist.gender,\r\n        hotelid: edittourist.hotelid,\r\n        isassigned: edittourist.isassigned,\r\n        isbraceletavailable: edittourist.isbraceletavailable,\r\n        isbraceletreturned: edittourist.isbraceletreturned,\r\n        ismaubancitizen:  edittourist.ismaubancitizen,\r\n        isprimary: edittourist.isprimary,\r\n        isrentbracelet:  edittourist.isrentbracelet,\r\n        isreturningguest:  edittourist.isreturningguest,\r\n        isreturningguestvaildate: edittourist.isreturningguestvaildate,\r\n        lastname: edittourist.lastname,\r\n        mobilenumber: edittourist.mobilenumber,\r\n        municipalityid: edittourist.municipalityid,\r\n        nationalityid: edittourist.nationalityid,\r\n        provinceid: edittourist.provinceid,\r\n        qrcode: edittourist.qrcode,\r\n        rfid: edittourist.rfid,\r\n        touristid: edittourist.touristid,\r\n        uploadimage:edittourist.uploadimage,\r\n        deleted:true\r\n      };\r\n\r\n      return updatedItem;\r\n    }\r\n\r\n    return item;\r\n  });\r\n   \r\n  setBooking({...booking, [\"touristdata\"]: newdata});\r\n  setDeletetouristpopup(!deletetouristpopup);\r\n}\r\n //#endregion editbooking tourist  */\r\n\r\n//#region Citizen\r\nconst [citizenship, setCitizenship] = useState([]);\r\nconst [selectedTouristCS,setSelectedTouristCS] = useState([]);\r\nconst getCitizenship = () => {\r\n  dataservice(\"citizenship\", { requestfor: 'getcitizenship', data: { flag: 'a' } })\r\n    .then(function (data) {\r\n      if (data.resultkey == 1) {\r\n        var result = data.resultvalue;\r\n        let countdata = [];\r\n        //let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\r\n      \r\n        for (let index = 0; index < result.length; index++) {\r\n          //   \r\n          let item = result[index];\r\n          countdata.push({ value: item.id, label: item.description })\r\n          \r\n        }\r\n      \r\n        setCitizenship(countdata);\r\n      } else {\r\n        //  notify(2,\"No data found\");\r\n      }\r\n    })\r\n    .catch(function (edata) {\r\n      notify(2, edata.toString(), 1);\r\n    });\r\n\r\n}\r\n \r\nconst handleChangeEBTCS=e=>{\r\n  setSelectedTouristCS(e.value);\r\n}\r\n\r\n//#endregion Citizen\r\n\r\n//#region Country Of orgin\r\n\r\nconst [country, setCountry] = useState([]);\r\nconst [selectedEBTCOO, setSelectedEBTCOO] = useState([]);\r\nconst getCountry = () => {\r\n \r\n  dataservice(\"country\", { requestfor: 'getcountry', data: { flag: 'a' } })\r\n    .then(function (data) {\r\n      if (data.resultkey == 1) {\r\n        var result = data.resultvalue;\r\n        let countdata = [];\r\n        //let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\r\n       // countdata.push({ value: \"-1\", label: \"Select Country\" })\r\n        for (let index = 0; index < result.length; index++) {\r\n          //   \r\n          let item = result[index];\r\n          countdata.push({ value: item.id, label: item.description })\r\n         \r\n        }\r\n        setCountry(countdata);\r\n      } else {\r\n        //  notify(2,\"No data found\");\r\n      }\r\n    })\r\n    .catch(function (edata) {\r\n      notify(2, edata.toString(), 1);\r\n    });\r\n\r\n}\r\nconst handleChangeEBTCOO = e=> {\r\n  setSelectedEBTCOO(e.value);\r\n}\r\n\r\n//#endregion\r\n\r\n//#region Province\r\n\r\nconst [Province, setProvince] = useState([]);\r\nconst [RawProvince, setRawProvince] = useState([]);\r\nconst [selectedEBTProvince, setSelectedEBTProvince] = useState([]);\r\nconst getProvince = () => {\r\n  dataservice(\"province\", { requestfor: 'getprovince', data: { flag: 'a' } })\r\n  .then(function (data) {\r\n    if (data.resultkey == 1) {\r\n      var result = data.resultvalue;\r\n     \r\n      setRawProvince(result);\r\n      var provincedata=getdropdownarr(result);\r\n      setProvince(provincedata);\r\n    } else {\r\n      //  notify(2,\"No data found\");\r\n    }\r\n  })\r\n  .catch(function (edata) {\r\n    notify(2, edata.toString(), 1);\r\n  });\r\n\r\n}\r\n\r\nconst handleChangeEBTProvince = e=> {\r\n  \r\n  setSelectedEBTProvince(e.value);\r\n  var municipalitydata=  RawMunicipality.filter(x=>x.provinceid==e.value);\r\n  var _ddpmunicipalitydata=getdropdownarr(municipalitydata);\r\n  setSelectedMunicipality(_ddpmunicipalitydata[0].value);\r\n  setMunicipality(_ddpmunicipalitydata);\r\n\r\n  \r\n}\r\n\r\n//#endregion\r\n//#region Municipality\r\nconst [Municipality, setMunicipality] = useState([]);\r\nconst [RawMunicipality, setRawMunicipality] = useState([]);\r\nconst [selectedMunicipality, setSelectedMunicipality] = useState([]);\r\nconst getMunicipalities = () => {\r\n\r\n  dataservice(\"municipality\", { requestfor: 'getmunicipality', data: { flag: 'a' } })\r\n    .then(function (data) {\r\n      if (data.resultkey == 1) {\r\n        var result = data.resultvalue;\r\n        let countdata = [];\r\n        //let country = [\"Caloocan\", \"Malabon\", \"Makati\", \"Manila\", \"Mandaluyong\"]\r\n        for (let index = 0; index < result.length; index++) {\r\n          //   \r\n          let item = result[index];\r\n          countdata.push({ value: item.id, label: item.description })\r\n          if (countdata.length === 1) {\r\n            setSelectedMunicipality(item.id);\r\n          }\r\n        }\r\n       // setMunicipality(countdata);\r\n        setRawMunicipality(result);\r\n      } else {\r\n        //  notify(2,\"No data found\");\r\n      }\r\n    })\r\n    .catch(function (edata) {\r\n      notify(2, edata.toString(), 1);\r\n    });\r\n  \r\n  \r\n  }\r\n  const handleChangeEBTMunicipality = e=> {\r\n    setSelectedMunicipality(e.value);\r\n  }\r\n  \r\n  \r\n//#endregion\r\n\r\n\r\n\r\n\r\n\r\nconst [isprocessing,setIsProcessing]=useState(false);\r\nconst [isvaildatereturnprocessing,setIsVaildatereturnProcessing]=useState(false);\r\nconst [bookingcalvalues,SetBookingCalValues]=useState([]);\r\nconst vaildateguest=()=>{\r\n  setIsVaildatereturnProcessing(true);\r\n \r\n  if(edittourist.firstname==\"\"){\r\n    notify(2,\"Please enter first name!\");\r\n    return;\r\n\r\n  }else if(edittourist.lastname==\"\"){\r\n    notify(2,\"Please enter last name!\");\r\n    return;\r\n  }else{\r\n    dataservice(\"returnguest\", { requestfor: 'vaildatereturnguest', data: { \r\n      firstname:edittourist.firstname,\r\n      lastname:edittourist.lastname,\r\n      dob:moment(edittourist.selectedtouristdob).format(\"YYYY-MM-DD\"),\r\n      gender:selectedtouristgender,\r\n    } })\r\n      .then(function (data) {\r\n       \r\n        setIsVaildatereturnProcessing(false);\r\n         \r\n        if (data.resultkey == 1) {\r\n          var result=data.resultvalue[0];\r\n          if(result.lastvisited==0){\r\n             \r\n          edittourist.isreturningguestvaildate=true;\r\n          edittourist.emailid=result.emailid;\r\n          edittourist.address1=result.address1;\r\n          edittourist.mobilenumber=result.mobilenumber;\r\n           \r\n          setSelectedTouristCS(result.citizenid);\r\n          setSelectedEBTCOO(result.nationalityid);\r\n        \r\n          //localtravelinfodata[\"guestinfo\"][guestactivepostion].Municipality=result.ismaubancitizen;\r\n          \r\n          // guestarr.isguestvaildated=true;\r\n          // guestarr.emailid=result.emailid;\r\n          // guestarr.Address=result.address1;\r\n          // guestarr.Mobilenumber=result.mobilenumber;\r\n          \r\n         // guestarr.Municipality=result.municipalityid;\r\n//           address1: \"asdasd\"\r\n// citizenid: \"1\"\r\n// emailid: \"anant@gmail.com\"\r\n// ismaubancitizen: \"0\"\r\n// mobilenumber: \"99999999\"\r\n// municipalityid: \"1\"\r\n// nationalityid: \"2\"\r\n// provinceid: \"10\"\r\n          setReturnGuestMsg(\"\");\r\n        //  recaltotal();\r\n          }\r\n          \r\n        } else {\r\n         // localtravelinfodata[\"guestinfo\"][guestactivepostion].isguestvaildated=false;\r\n         edittourist.isreturningguestvaildate=false; \r\n         setReturnGuestMsg(\"Sorry guest info doesn't exist.\");\r\n        }\r\n      })\r\n      .catch(function (edata) {\r\n        setIsVaildatereturnProcessing(false);\r\n        notify(2, edata.toString(), 1);\r\n      });\r\n  }\r\n  \r\n}\r\n\r\nconst updatetourist=()=>{\r\nvar _guestexist=booking.touristdata.filter(x=>x.uuid==edittourist.uuid);\r\nif(_guestexist.length>0){\r\n  const newdata = booking[\"touristdata\"].map((item) => {\r\n    if (item.touristid ===edittourist.touristid) {\r\n      const updatedItem = {\r\n        ...item,\r\n        actualimagename: edittourist.actualimagename,\r\n        address1: edittourist.address1,\r\n        citizenid:  selectedTouristCS,\r\n        dob: edittourist.dob,\r\n        emailid: edittourist.emailid,\r\n        firstname: edittourist.firstname,\r\n        gender: selectedtouristgender,\r\n        hotelid: edittourist.hotelid,\r\n        isassigned: edittourist.isassigned,\r\n        isbraceletavailable: edittourist.isbraceletavailable,\r\n        isbraceletreturned: edittourist.isbraceletreturned,\r\n        ismaubancitizen:  edittourist.ismaubancitizen,\r\n        isprimary: edittourist.isprimary,\r\n        isrentbracelet:  edittourist.isrentbracelet,\r\n        isreturningguest:  edittourist.isreturningguest,\r\n        isreturningguestvaildate: edittourist.isreturningguestvaildate,\r\n        lastname: edittourist.lastname,\r\n        mobilenumber: edittourist.mobilenumber,\r\n        municipalityid: selectedMunicipality,\r\n        nationalityid: selectedEBTCOO,\r\n        provinceid: selectedEBTProvince,\r\n        qrcode: edittourist.qrcode,\r\n        rfid: edittourist.rfid,\r\n        touristid: edittourist.touristid,\r\n        uploadimage:edittourist.uploadimage\r\n      };\r\n\r\n      return updatedItem;\r\n    }\r\n\r\n    return item;\r\n  });\r\n  \r\n  setBooking({...booking, [\"touristdata\"]: newdata});\r\n}else{\r\n  setBooking(prevState => ({\r\n    ...prevState,\r\n    touristdata: [...booking.touristdata,edittourist]\r\n  }));\r\n}\r\n\r\n  \r\n  setEditTouristpopup(!edittouristpopup);\r\n\r\n\r\n\r\n}\r\nconst Savedata=()=>{\r\n\r\n  if(totaldue>=0 && totalrefund==0){\r\n  //payment\r\n  const diffTime = Math.abs(new Date(booking.todate) - new Date(booking.fromdate));\r\n   // const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))+1;\r\n      let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n      if(diffDays==0 || diffDays==1){\r\n        diffDays=1;\r\n      }\r\n      var boatinfo=[];\r\n      var Boatamt=0;\r\n      if(!booking.ishotelprovideboat){\r\n        if(selectedboatdata.length>0){\r\n         for (let bt = 0; bt < selectedboatdata.length; bt++) {\r\n           let eleboat = selectedboatdata[bt];\r\n           let filterboat=boatdata.filter(x=>x.value==eleboat);\r\n           if(filterboat.length>0){\r\n             Boatamt=+ parseFloat(filterboat[0].price);\r\n             boatinfo.push(filterboat[0]);\r\n           }\r\n           \r\n         }\r\n        }\r\n       \r\n      }\r\n      let val = Math.floor(1000 + Math.random() * 9000);\r\n      var submitdata = {\r\n        fromdate: moment(booking.fromdate).format(\"YYYY-MM-DD\"),\r\n        todate: moment(booking.todate).format(\"YYYY-MM-DD\"),\r\n        numberofdays: diffDays,\r\n        totalcharge: booking.totalcharge,\r\n        pax: booking.touristdata.filter(x=>x.deleted==false).length,\r\n        boatcapcity: boatinfo,\r\n        preferredhotels:preferredhotels.filter(x=>x.value==selectedpreferredhotels.value ) ,\r\n        paymentid: val,\r\n        selectedvehicleinfo: [],\r\n        touristinfo: booking.touristdata.filter(x=>x.deleted==false),\r\n        chargesinfo: [],\r\n        numberofvehicle: booking.vehicle.filter(x=>x.qty>0).length,\r\n        touristvehicles:booking.vehicle.filter(x=>x.qty>0) ,\r\n        packagedata:booking.package,\r\n        slotid:selectedtimeslot,\r\n        ishotelprovideboat:booking.ishotelprovideboat==true?\"1\":\"0\",\r\n        slotdetail:timeslot.filter(x=>x.value==selectedtimeslot),\r\n        parkingnotreq: booking.parkingnotreq==true?\"1\":\"0\",\r\n        hotelbookingref:booking.bookingrefencenum,\r\n        packageinfo:{},\r\n        totalpaydue:totaldue,\r\n        paymentreferencenumber:\"\",\r\n        editrefnum:\"\",\r\n        bookingid:booking.bookingid,\r\n        hotelid:preferredhotels.filter(x=>x.value==selectedpreferredhotels.value ),\r\n        boatid:boatinfo\r\n        \r\n      }\r\n    if(totaldue>0){\r\n      \r\n      dataservice(\"booking\", {\r\n        requestfor: 'checkavailability',\r\n        data: {\"fromdate\": moment(new Date(booking.fromdate)).format(\"YYYY-MM-DD\"),\"touristcount\":booking.touristdata.length}\r\n      })\r\n      .then(function (checkdata) {\r\n        if (checkdata.resultkey == 1) {\r\n          if(checkdata.resultvalue[0].isSlotAvialble>0){\r\n            dataservice(\"booking\", {\r\n              requestfor: 'updatenewbooking',\r\n              data: submitdata\r\n            })\r\n            .then(function (data) {\r\n              \r\n              if (data.resultkey == 1) {\r\n             \r\n                var result = data.resultvalue;\r\n                var responseurl= JSON.parse(data.resultvalue.url).results.data.url;\r\n                if(responseurl!=\"\" && responseurl!==undefined){\r\n                  window.location.href=responseurl;\r\n                }else{\r\n                  notify(2,\"No response from payment gateway try again!\");\r\n                  setIsProcessing(false);\r\n                }\r\n                \r\n              } else {\r\n                notify(2,\"error!\");\r\n                setIsProcessing(false);\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              notify(2,\"error!\"+error);\r\n              setIsProcessing(false);\r\n            });\r\n          }else{\r\n            notify(2,\"no slot available for this date!\");\r\n            setIsProcessing(false);\r\n          }\r\n          \r\n        } else {\r\n          notify(2,\"error !\"+ JSON.stringify(checkdata.resultvalue));\r\n          setIsProcessing(false);\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        notify(2,\"error !\"+ error);\r\n        setIsProcessing(false);\r\n       // console.log(error);\r\n      });\r\n    }else{\r\n      dataservice(\"booking\", {\r\n        requestfor: 'checkavailability',\r\n        data: {\"fromdate\": moment(new Date(booking.fromdate)).format(\"YYYY-MM-DD\"),\"touristcount\":booking.touristdata.length}\r\n      })\r\n      .then(function (checkdata) {\r\n        if (checkdata.resultkey == 1) {\r\n          if(checkdata.resultvalue[0].isSlotAvialble>0){\r\n            dataservice(\"booking\", {\r\n              requestfor: 'updatenewbooking',\r\n              data: submitdata\r\n            })\r\n            .then(function (data) {\r\n              \r\n              if (data.resultkey == 1) {\r\n                notify(1,\"Booking updated successfully!\");\r\n                \r\n                setTimeout(function(){ \r\n                  window.location.reload()\r\n                  \r\n                 }, 3000);\r\n              } else {\r\n                notify(2,\"error!\");\r\n                setIsProcessing(false);\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              notify(2,\"error!\"+error);\r\n              setIsProcessing(false);\r\n            });\r\n          }else{\r\n            notify(2,\"no slot available for this date!\");\r\n            setIsProcessing(false);\r\n          }\r\n          \r\n        } else {\r\n          notify(2,\"error !\"+ JSON.stringify(checkdata.resultvalue));\r\n          setIsProcessing(false);\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        notify(2,\"error !\"+ error);\r\n        setIsProcessing(false);\r\n       // console.log(error);\r\n      });\r\n    }\r\n\r\n\r\n\r\n  }else{\r\n//refund or cancel\r\n  if(booking.touristdata!==undefined && booking.touristdata.length>0){\r\n  const diffTime = Math.abs(booking.todate - booking.fromdate);\r\n  // const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))+1;\r\n   let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n   if(diffDays==0 || diffDays==1){\r\n     diffDays=1;\r\n   } \r\n   var environmentdata=feesdata.data.filter(x=>x.id==1);\r\n   var braceletdata=feesdata.data.filter(x=>x.id==4);\r\n   var ETAFamt=0;\r\n   var Braceletmt=0;\r\n   var parking=0;\r\n   var Boatamt=0;\r\n   var boatinfo=[];\r\n   var exemptionamt=0;\r\n   var discountamt=0;\r\n   if(!booking.ishotelprovideboat){\r\n     if(selectedboatdata.length>0){\r\n      for (let bt = 0; bt < selectedboatdata.length; bt++) {\r\n        let eleboat = selectedboatdata[bt];\r\n        let filterboat=boatdata.filter(x=>x.value==eleboat);\r\n        if(filterboat.length>0){\r\n          Boatamt=+ parseFloat(filterboat[0].price);\r\n          boatinfo.push(filterboat[0]);\r\n        }\r\n        \r\n      }\r\n     }\r\n    \r\n   }\r\n   \r\n   if(!booking.parkingnotreq){\r\n    for (let vh = 0; vh < booking.vehicle.length; vh++) {\r\n      parking+=((parseFloat(booking.vehicle[vh].qty)*(parseFloat(booking.vehicle[vh].amount) ))*(diffDays)); \r\n     }\r\n   }\r\n   \r\n   for (let index = 0; index < booking.touristdata.length; index++) {\r\n     const eletourist = booking.touristdata[index];\r\n     if(!eletourist.deleted)\r\n     {\r\n       Braceletmt+=eletourist.isrentbracelet==true?(parseFloat(braceletdata[0].rentprice)):(eletourist.isbraceletavailable==true?0:parseFloat(braceletdata[0].price));\r\n     \r\n     if(!eletourist.ismaubancitizen){\r\n        ETAFamt+=parseFloat(environmentdata[0].price);\r\n     }else{\r\n        exemptionamt+=parseFloat(environmentdata[0].price);\r\n     }\r\n    }\r\n   }\r\n   var _booking =JSON.stringify(booking);\r\n   var _bookingobj=JSON.parse(_booking);\r\n   _bookingobj.touristdata=_bookingobj.touristdata.filter(x=>x.deleted==true);\r\n   _bookingobj.vehicle=_bookingobj.vehicle.filter(x=>x.qty>0);\r\n   \r\n   var refundvalues={\r\n    Refundamt:isRefundNoShow==1?booking.totalcharge:totalrefund,\r\n    Totalamt:isRefundNoShow==1?0:(booking.totalcharge-totalrefund),\r\n    ETAF:ETAFamt,\r\n    Bracelet:Braceletmt,\r\n    Package:booking.package,\r\n    Boat:boatinfo,\r\n    NOG:selectednumberguest,\r\n    Parking:parking,\r\n    Discount:discountamt,\r\n    Exemption:exemptionamt,\r\n    Bookinginfo:_bookingobj,\r\n    Vehicle:booking.vehicle.filter(x=>x.qty>0),\r\n    Guestinfo:booking.touristdata.filter(x=>x.deleted==false)\r\n   }\r\n   var submitdata = {\r\n    refunddata:refundvalues,\r\n    bookingid:booking.bookingid,\r\n    totalcharge: booking.totalcharge,\r\n    parkingnotreq: booking.parkingnotreq==true?\"1\":\"0\",\r\n    hotelbookingref:booking.bookingrefencenum,\r\n    ishotelprovideboat:booking.ishotelprovideboat==true?\"1\":\"0\",\r\n    isnoshowrefund:isRefundNoShow,\r\n    fromdate: moment(booking.fromdate).format(\"YYYY-MM-DD\"),\r\n    todate: moment(booking.todate).format(\"YYYY-MM-DD\"),\r\n    slotid:selectedtimeslot,\r\n    boatid:boatinfo,\r\n    hotelid: preferredhotels.filter(x=>x.value==selectedpreferredhotels.value ) ,\r\n    numberofdays: diffDays,\r\n    pax: booking.touristdata.filter(x=>x.deleted==false).length,\r\n    touristinfo: booking.touristdata.filter(x=>x.deleted==false),\r\n    numberofvehicle: booking.vehicle.filter(x=>x.qty>0).length,\r\n    \r\n    }\r\n    dataservice(\"booking\", {\r\n      requestfor: 'checkavailability',\r\n      data: {\"fromdate\": moment(new Date(booking.fromdate)).format(\"YYYY-MM-DD\"),\"touristcount\":booking.touristdata.length}\r\n    })\r\n    .then(function (checkdata) {\r\n      \r\n      if (checkdata.resultkey == 1) {\r\n        if(checkdata.resultvalue[0].isSlotAvialble>0){\r\n          dataservice(\"booking\", {\r\n            requestfor: 'refundpayment',\r\n            data: submitdata\r\n          })\r\n          .then(function (data) {\r\n            \r\n            if (data.resultkey == 1) {\r\n               \r\n              var result = data.resultvalue;\r\n              notify(1,\"Application for refund is submited successsfully.  We will connect you soon.\");\r\n              window.location.reload();\r\n              // you have PHP 370 for refund ,please wait for a call from one of our representative. \r\n              // var responseurl= JSON.parse(data.resultvalue.url).results.data.url;\r\n              // if(responseurl!=\"\" && responseurl!==undefined){\r\n              //   window.location.href=responseurl;\r\n              // }else{\r\n              //   notify(2,\"No response from payment gateway try again!\");\r\n              //   setIsProcessing(false);\r\n              // }\r\n              \r\n            } else {\r\n              notify(2,\"error!\");\r\n              setIsProcessing(false);\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            notify(2,\"error!\"+error);\r\n            setIsProcessing(false);\r\n          });\r\n        }else{\r\n          notify(2,\"no slot available for this date!\");\r\n          setIsProcessing(false);\r\n        }\r\n        \r\n      } else {\r\n        notify(2,\"error !\"+ JSON.stringify(checkdata.resultvalue));\r\n        setIsProcessing(false);\r\n      }\r\n    })\r\n    .catch(function (error) {\r\n      notify(2,\"error !\"+ error);\r\n      setIsProcessing(false);\r\n     // console.log(error);\r\n    });\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n  \r\n}\r\n\r\nconst [isRefundNoShow, setIsRefundNoShow] = useState(0);\r\nconst refundpaymentinfo=(data)=>{\r\n  if(booking.touristdata.length>0){\r\n    setIsRefundNoShow(data);\r\n    setIsConfirmBooking(!isconfirmbooking);\r\n  }else{\r\n    notify(2, \"No booking data to update,Please search again!\");\r\n    return;\r\n  }\r\n}\r\n\r\nconst refundpayment=()=>{\r\n  const diffTime = Math.abs(booking.todate - booking.fromdate);\r\n      // const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))+1;\r\n       let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n       if(diffDays==0 || diffDays==1){\r\n         diffDays=1;\r\n       } \r\n       var boatinfo=[];\r\n       for (let index = 0; index < selectedboatdata.length; index++) {\r\n         const element = selectedboatdata[index];\r\n         var _filterboat=boatdata.filter(x=>x)\r\n       }\r\n}\r\n\r\nconst getTimeSlot=(data)=>{\r\n  \r\n  if(selectedtimeslot==\"\"){\r\n    return \"\"\r\n  }else{\r\n    return timeslot.filter(x=>x.value==selectedtimeslot)[0].label; \r\n  }\r\n  \r\n}\r\n\r\nconst getBoats=()=>{\r\n  var boatlables=\"\";\r\n  for (let index = 0; index < selectedboatdata.length; index++) {\r\n    const element = selectedboatdata[index];\r\n    var filterboat =boatdata.filter(x=>x.value==element);\r\n    if(filterboat.length>0){\r\n      boatlables+=filterboat[0].label+\",\";\r\n    }\r\n  }\r\n  if(boatlables!=\"\"){\r\n    boatlables=boatlables.substring(0,boatlables.length-1);\r\n  }\r\n  return boatlables;\r\n}\r\nconst getHideShowUpdate=()=>{\r\n  var result=\"none\";\r\n  var fromdate=new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"));\r\n  var curdate=new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"));\r\n  if(curdate<fromdate){\r\n    if(totaldue>0){\r\n      result=\"\";\r\n    }\r\n    \r\n  }\r\n  return result;\r\n}\r\nconst getHideShowNoShow=()=>{\r\n  var result=\"none\";\r\n  var fromdate=new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"));\r\n  var curdate=new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\"));\r\n  if(curdate>fromdate){\r\n    result=\"\";\r\n  }\r\n  return result;\r\n}\r\n\r\nconst cleardata=()=>{\r\n  window.location.reload();\r\n}\r\n\r\n\r\n    return (<>\r\n     \r\n\r\n     <div className=\"c-app c-default-layout flex-row align-items-center bg\" style={{  background: `url(${Background})`,backgroundRepeat: 'no-repeat',\r\n    backgroundPosition: 'top center',\r\n    backgroundSize: 'cover'}}  >\r\n         <CContainer  >\r\n          \r\n            <Card style={{minHeight:\"300px\"}} >\r\n                <Card.Body>\r\n                    <div className=\"row\">\r\n                     \r\n                    <CCol md=\"12\">\r\n                        <>\r\n                       \r\n                        <CForm>\r\n                           {/* <div>{new Date(booking.currentdate).toLocaleDateString()} {new Date(booking.fromdate).toLocaleDateString()}</div> */}\r\n                            <CRow >\r\n                             \r\n                            <CCol xs=\"3\" className=\"text-right\">\r\n                                <CInputGroup className=\"mb-3\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    Refrence #<sup style={{ color: \"red\" }}>*</sup>\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CInput  type=\"text\" onChange={handleChange} type=\"text\" value={state.refenecenum} id=\"refenecenum\" placeholder=\"Enter Refrence Number\" />\r\n                                </CInputGroup>\r\n                            </CCol>\r\n                            <CCol xs=\"4\">\r\n                                <CInputGroup className=\"mb-3\">\r\n                                <CInputGroupPrepend>\r\n                                    <CInputGroupText>\r\n                                    Primary Email<sup style={{ color: \"red\" }}>*</sup>\r\n                                    </CInputGroupText>\r\n                                </CInputGroupPrepend>\r\n                                <CInput  type=\"text\" onChange={handleChange} type=\"email\" value={state.emailid} id=\"emailid\"  placeholder=\"Enter Email ID\" />\r\n                                </CInputGroup>\r\n                            </CCol>\r\n                            <CCol xs=\"5\">\r\n                                <div className=\"row\">\r\n                                    <div className=\"col-12\">\r\n                                    <CButton color=\"primary\"  onClick={() => {searchbooking()}}>Search </CButton> &nbsp;&nbsp;\r\n                                    <CButton color=\"primary\" hidden={booking.touristdata.length>0?false:true} disabled={(new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\")))>new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"))}\r\n                                       onClick={() => {refundpaymentinfo()}}>Update</CButton>&nbsp;&nbsp;\r\n                                  \r\n                                  <CButton color=\"primary\" hidden={booking.touristdata.length>0?false:true} onClick={() => {cleardata()}}>Cancel</CButton> \r\n                                  \r\n                                    </div>\r\n                                    \r\n                                  {/*  <div className=\"col-8\" >\r\n                                    \r\n                                 <CButton color=\"primary\" style={{display:(totalrefund>0)==true?\"\":\"none\"}}  onClick={() => {refundpaymentinfo(0)}}>Refund</CButton>&nbsp;&nbsp; \r\n                                 <CButton color=\"primary\"  style={{display:getHideShowNoShow()}}   onClick={() => {refundpaymentinfo(1)}}>No Show</CButton> &nbsp;&nbsp;\r\n                                    </div>*/}\r\n                                </div>\r\n                                \r\n                                \r\n                            </CCol>\r\n                            \r\n                            </CRow>\r\n                   \r\n                        </CForm>\r\n                        <div  style={{display:isbookingfetch==false?\"none\":\"\"}}>\r\n                       \r\n                        <div id=\"accordion\"> \r\n                            <CCard className=\"mb-0\">\r\n                                <CCardHeader id=\"headingOne\">\r\n                                {(() => {\r\n                                  const rows = [];\r\n                                 // if(bookingcalvalues.currentBookingvalues.Boat!==undefined){\r\n                                    if(bookingcalvalues.currentBookingvalues!==undefined){\r\n                                        ;\r\n                                      console.log(bookingcalvalues.currentBookingvalues);\r\n                                   \r\n\r\n\r\n\r\n                                    rows.push(<> \r\n                                            <div className=\"row\">\r\n                                              <div className=\"col-sm-3\"> \r\n                                                  <h4>Total : PHP {bookingcalvalues.currentBookingvalues.Total}</h4>\r\n                                              </div>\r\n                                              <div className=\"col-sm-5\">\r\n                                                  <h4><CIcon name={(bookingcalvalues.currentBookingvalues.TotalAmountDue>0?\"cil-arrow-top\":\"\")} \r\n                                                  className=\"mfe-2\" \r\n                                                  style={ booking.totaldue>0?{color:\"green\"}:{}} />Total Amount Due : PHP {bookingcalvalues.currentBookingvalues.TotalAmountDue} </h4>\r\n                                              </div>\r\n                                              <div className=\"col-sm-4\">\r\n                                                  <h4>Total Refund : PHP {bookingcalvalues.currentBookingvalues.TotalRefund} </h4>\r\n                                              </div>\r\n                                          </div> \r\n                                        </>);\r\n                                      \r\n                                      return rows;\r\n                                    }\r\n                                 // }\r\n                     \r\n\r\n                                })()}\r\n                                    \r\n                                {/* */}\r\n                                <CButton \r\n                                    block \r\n                                    color=\"link\" \r\n                                    className=\"text-left m-0 p-0\" \r\n                                    onClick={() => setAccordion(accordion === 0 ? null : 0)}\r\n                                >\r\n                                    <h5 className=\"m-0 p-0\">Booking Info</h5>\r\n                                </CButton>\r\n                                </CCardHeader>\r\n                                <CCollapse show={accordion === 0}>\r\n                                <CCardBody>\r\n                                    <div className=\"form-row\">\r\n                                        <div className=\"form-group col-md-3\">\r\n                                            <label >From Date </label>\r\n                                            <DatePicker dateFormat=\"dd-MMM-yyyy\"  minDate={new Date()} className=\"form-control\"  selected={new Date(booking.fromdate)}  onChange={(date)=>{\r\n                                                 // if(date>booking.todate){\r\n                                                   // setBooking({...booking, [\"fromDate\"]:date,[\"todate\"]:date });\r\n                                                    setBooking(prevState => ({\r\n                                                      ...prevState,\r\n                                                      fromdate: date,\r\n                                                      todate:date\r\n                                                    }));\r\n                                                    console.log(booking);\r\n                                                  // }else{\r\n                                                  //   setBooking({...booking, [\"fromDate\"]:date });\r\n                                                  // }\r\n                                                  \r\n                                                   \r\n                                            }} />\r\n                                    \r\n                                        </div>\r\n                                        <div className=\"form-group col-md-3\">\r\n                                            <label >TO Date </label>\r\n                                            <DatePicker dateFormat=\"dd-MMM-yyyy\"  minDate={new Date(booking.fromdate)} className=\"form-control\" selected={new Date(booking.todate)} onChange={(date) =>{\r\n                                                                          //  setToDate(date);\r\n                                                                          setBooking({...booking, [\"todate\"]:date });\r\n                                                                            \r\n                                            } } />\r\n                                        </div>\r\n                                        <div className=\"form-group col-md-3\">\r\n                                            <label >Number Of Guests </label>\r\n                                            <Select\r\n                                            isDisabled={true}\r\n                                            className=\"dropdown\"\r\n                                            placeholder=\"Select\"\r\n                                            value={numberofguests.find(obj => obj.value === selectednumberguest)} // set selected values\r\n                                            options={numberofguests} // set list of the data\r\n                                            onChange={handleChangeOptionNOG} // assign onChange function\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"form-group col-md-3\">\r\n                                                 <label >Time of Arrival in Mauban</label>\r\n                                                <Select\r\n                                                className=\"dropdown\"\r\n                                                placeholder=\"Select\"\r\n                                                value={timeslot.find(obj => obj.value === selectedtimeslot)} // set selected values\r\n                                                options={timeslot} // set list of the data\r\n                                                onChange={handleChangeOptionTS} // assign onChange function\r\n                                                />\r\n                                        </div>\r\n                                        \r\n                                    </div>\r\n                                    <div className=\"form-row\">\r\n                                            <div className=\"form-group col-md-3\">\r\n                                                    <label >Boat Capacity </label>\r\n                                                    <Select\r\n                                                        isMulti\r\n                                                        isDisabled={booking.ishotelprovideboat}\r\n                                                        className=\"dropdown\"\r\n                                                        placeholder=\"Select Boat Capacity\"\r\n                                                        value={boatdata.filter(obj => \r\n                                                        selectedboatdata.includes(obj.value)\r\n                                                        \r\n                                                        \r\n\r\n                                                        )\r\n\r\n                                                        } \r\n                                                        // set selected values\r\n                                                        options={boatdata} // set list of the data\r\n                                                         onChange={handleChangeOptionBC} // assign onChange function\r\n                                                        />\r\n                                            </div>\r\n                                            <div className=\"form-group col-md-3\">\r\n                                                    <label >Select Package*</label>\r\n                                                    <Select\r\n                                                        className=\"dropdown\"\r\n                                                        placeholder=\"Select\"\r\n                                                        isDisabled={true}\r\n                                                        value={packageddl.find(obj => obj.value === selectedPackage)} // set selected values\r\n                                                        options={packageddl} // set list of the data\r\n                                                        />\r\n                                            </div>\r\n                                         \r\n                                            \r\n                                    </div>\r\n                            \r\n                                    <div className=\"form-row\">\r\n                                            <div className=\"form-group col-md-3\">\r\n                                                <label  >Is Boat Provided by Resort?</label>\r\n                                                <CInput style={{ width: \"20%\" ,fontSize:\"0rem\" }}   type=\"checkbox\" value={booking.ishotelprovideboat} onChange={handleChangeHPB}\r\n                                                id=\"ismaubancitizen\" />\r\n                                            </div>\r\n                                            <div className=\"form-group col-md-3\">\r\n                                                 <label  >Accommodation<span style={{color:\"red\"}}><sup>*</sup></span></label>\r\n                                                        <Select\r\n                                                    className=\"dropdown\"\r\n                                                    placeholder=\"Select Resort\"\r\n                                                    value={selectedpreferredhotels} // set selected values\r\n                                                    options={preferredhotels} // set list of the data\r\n                                                    onChange={handleChangeOptionPH} // assign onChange function\r\n                                                    />\r\n                                            </div>\r\n                                            <div className=\"form-group col-md-3\">\r\n                                                    <label for=\"guests\"> Booking Reference#<span style={{color:\"red\"}}><sup>*</sup></span></label>\r\n                                                    <CInput onChange={handleEBChange} value={booking.bookingrefencenum} type=\"text\" id=\"bookingrefencenum\" placeholder=\" Booking Reference Number\" />\r\n\r\n                                            </div>\r\n                                    </div>\r\n                                  \r\n                            \r\n                            </CCardBody>\r\n                                </CCollapse>\r\n                            </CCard>\r\n                            <CCard className=\"mb-0\">\r\n                                <CCardHeader id=\"headingTwo\">\r\n                                <CButton \r\n                                    block \r\n                                    color=\"link\" \r\n                                    className=\"text-left m-0 p-0\" \r\n                                    onClick={() => setAccordion(accordion === 1 ? null : 1)}\r\n                                >\r\n                                    <h5 className=\"m-0 p-0\">Vehicle</h5>\r\n                                </CButton>\r\n                                </CCardHeader>\r\n                                <CCollapse show={accordion === 1}>\r\n                                <CCardBody>\r\n                                \r\n                                <div className=\"row\">\r\n                                    <div className=\"col-lg-6 col-md-12 mb-4\">\r\n                                        <label for=\"guests\">Parking not Required{booking.parkingnotreq}</label>\r\n                                        <CInput style={{ width: \"20%\",fontSize:\"0rem\" }}  onChange={handleEBChange} type=\"checkbox\" checked={booking.parkingnotreq } value={booking.parkingnotreq} id=\"parkingnotreq\" />\r\n                                                \r\n                                    </div>\r\n                                    <table className=\"table\">\r\n                       <thead>\r\n                         <th>vehicle</th>\r\n                         <th>Qty</th>\r\n                         <th>Total Charge</th>\r\n                       </thead>\r\n                       <tbody>\r\n                    {(() => {\r\n                      const rows = [];\r\n                      if(booking.vehicle!==undefined){\r\n                        if (booking.vehicle.length > 0) {\r\n                          for (let i = 0; i < booking.vehicle.length; i++) {\r\n                            var _veh = booking.vehicle[i];\r\n                            //_veh.checked = false;\r\n                            \r\n                            rows.push(<> \r\n                              \r\n                              <tr>\r\n                                     <td>{_veh.typeofvehicle}</td>\r\n                                     <td>\r\n                                     <InputDecimal type=\"text\" readOnly={booking.parkingnotreq}   id=\"vehicleqty\" value={_veh.qty} id={_veh.id} onChange={handleChangevehicleqty(i)} placeholder=\"Qty\" />\r\n                                     </td>\r\n                                     <td>{(_veh.qty)*(parseFloat(_veh.amount))}</td>\r\n                                \r\n  \r\n                                     </tr> </>);\r\n                          }\r\n                          return rows;\r\n                        }\r\n                      }\r\n                     \r\n\r\n                      })()}\r\n                       </tbody>\r\n                     </table>\r\n                           \r\n                                </div>\r\n                  <div className=\"row\">\r\n                    </div>\r\n                                </CCardBody>\r\n                                </CCollapse>\r\n                            </CCard>\r\n                            <CCard className=\"mb-0\">\r\n                                <CCardHeader id=\"headingThree\">\r\n                                <CButton \r\n                                    block \r\n                                    color=\"link\" \r\n                                    className=\"text-left m-0 p-0\" \r\n                                    onClick={() => setAccordion(accordion === 2 ? null : 2)}\r\n                                >\r\n                                    <h5 className=\"m-0 p-0\">Guest Info</h5>\r\n                                </CButton>\r\n                                \r\n                                      \r\n                                </CCardHeader>\r\n                                <CCollapse show={accordion === 2}>\r\n                                <CCardBody>\r\n                                <CButton color=\"primary\" disabled={(new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\")))>new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"))} onClick={e => editdata(-1, {})}>Add</CButton> <br></br>\r\n                                <table className=\"table\">\r\n                       <thead>\r\n                         <th>Firstname</th>\r\n                         <th>Lastname</th>\r\n                         <th>Gender</th>\r\n                         <th>DOB</th>\r\n                         <th>Maubanin</th>\r\n                         <th  style={{textAlign:\"center\"}}>Action</th>\r\n                       </thead>\r\n                       <tbody>\r\n                    {(() => {\r\n                      const rows = [];\r\n                      if (booking.touristdata!=undefined && booking.touristdata.length > 0) {\r\n                          \r\n                        for (let i = 0; i < booking.touristdata.length; i++) {\r\n                          \r\n                          var _tourist = booking.touristdata[i];\r\n                          if(_tourist.deleted==false){\r\n                            var gender=Gender.filter(x=>x.value==_tourist.gender)[0].label;\r\n                            var dob=new Date(_tourist.dob);\r\n                            var displaydob=dob.getDate()+\" \"+ getMonth(dob.getMonth()+1)+\" \"+dob.getFullYear();\r\n                            var ismaubancitizen=_tourist.ismaubancitizen==true?\"Yes\":\"No\";\r\n                            var isprimaryguest=_tourist.isprimary;\r\n                                \r\n  \r\n                            //_veh.checked = false;\r\n                              \r\n                            rows.push(<> \r\n                              \r\n                              <tr>\r\n                                      <td>{_tourist.firstname }</td>\r\n                                      <td>{_tourist.lastname }</td>\r\n                                      <td>{gender }</td>\r\n                                      <td>{displaydob }</td>\r\n                                      <td>{ismaubancitizen }</td>\r\n                                      <td style={{textAlign:\"end\"}}><CButton color=\"primary\" disabled={(new Date(moment(new Date(booking.currentdate)).format(\"DD MMM YYYY\")))>new Date(moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\"))}  onClick={e => editdata(i, booking.touristdata[i])}>Edit</CButton> &nbsp;&nbsp;\r\n                                      <CButton color=\"primary\" hidden={isprimaryguest} onClick={() => {opendeletetouristpopup(i, booking.touristdata[i])}}>Delete</CButton></td>\r\n                                     {/*<td>\r\n                                     <InputDecimal type=\"text\" readOnly={booking.parkingnotreq}   id=\"vehicleqty\" value={_veh.qty} id={_veh.id} onChange={handleChangevehicleqty(i)} placeholder=\"Qty\" />\r\n                                     </td>\r\n                                     <td>{(_veh.qty==\"\"?0:_veh.qty)*(parseFloat(_veh.amount))}</td> */}\r\n                                \r\n  \r\n                                     </tr> </>);\r\n                          }\r\n                         \r\n                        }\r\n                        return rows;\r\n                      }\r\n\r\n                      })()}\r\n                       </tbody>\r\n                     </table>\r\n                      \r\n                                </CCardBody>\r\n                                </CCollapse>\r\n                            </CCard>\r\n                            <CCard className=\"mb-0\">\r\n                              <CCardHeader id=\"headingFour\">\r\n                                <CButton \r\n                                    block \r\n                                    color=\"link\" \r\n                                    className=\"text-left m-0 p-0\" \r\n                                    onClick={() => setAccordion(accordion === 3 ? null : 3)}\r\n                                >\r\n                                    <h5 className=\"m-0 p-0\">Payment Detail </h5>\r\n                                </CButton>\r\n                              </CCardHeader>\r\n                              <CCollapse show={accordion === 3}>\r\n                              <CCardBody>\r\n                              <div className=\"row\">\r\n                                <div className=\"col-md-6\">\r\n                                {(() => {\r\n                                  const rows = [];\r\n                                  if(booking.touristdata!==undefined){\r\n                                    if (booking.touristdata.length > 0) {\r\n                                      \r\n                                      //pricing fees\r\n                                      var environmentdata=feesdata.data.filter(x=>x.id==1);\r\n                                      var braceletdata=feesdata.data.filter(x=>x.id==4);\r\n                                      var islandhoppingdata=feesdata.data.filter(x=>x.id==9);\r\n                                      //#region previous Charges \r\n                                      const prediffTime = Math.abs(prevBooking.todate - prevBooking.fromdate);\r\n                                      let prediffDays = Math.ceil(prediffTime / (1000 * 60 * 60 * 24));\r\n                                      if(prediffDays==0 || prediffDays==1){\r\n                                        prediffDays=1;\r\n                                      }\r\n                                    \r\n                                      //guest filter \r\n                                      var _prevaildguest=prevBooking.touristdata.filter(x=>x.deleted==false);\r\n                                      var _premaubaninguest=_prevaildguest.filter(x=>x.ismaubancitizen==true);\r\n                                      var _prenonmaubaninguest=_prevaildguest.filter(x=>x.ismaubancitizen==false);\r\n                                      var _preislandhoppingguest=_prevaildguest.filter(x=>x.islandhopping==true).length;\r\n                                      //bracelet filter\r\n                                      var _prerentbraceletcount=_prenonmaubaninguest.filter(x=>x.isrentbracelet==true).length;\r\n                                      var _preownbraceletcount=_prenonmaubaninguest.filter(x=>x.isrentbracelet==false).length;\r\n\r\n                                      var preBraceletmt=(_prerentbraceletcount>0?\r\n                                                          (parseFloat(_prerentbraceletcount) * parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0)):0)\r\n                                                          +(_preownbraceletcount>0?\r\n                                                          ((_preownbraceletcount) * (braceletdata.length>0?braceletdata[0].price:0)):0);\r\n\r\n                                      //environment charges\r\n                                      var preETAFamt=( _prenonmaubaninguest.length>0?\r\n                                                  (parseFloat(_prenonmaubaninguest.length) * parseFloat(environmentdata.length>0?parseFloat(environmentdata[0].price):0)):0);\r\n                                      \r\n                                      //island hopping charges\r\n                                      var preIslandHoppingAmt=(_preislandhoppingguest>0?\r\n                                                  (parseFloat(_preislandhoppingguest) * (islandhoppingdata.length>0?islandhoppingdata[0].price:0)):0);\r\n                                    \r\n                                      //boat charges\r\n                                      \r\n                                      var preBoatamt=0;\r\n                                      if(!prevBooking.ishotelprovideboat){\r\n                                        for (let bt = 0; bt < prevBooking.boatid.length; bt++) {\r\n                                          let eleboat = prevBooking.boatid[bt];\r\n                                          let filterboat=boatdata.filter(x=>x.value==eleboat.uuid);\r\n                                          if(filterboat.length>0){\r\n                                            preBoatamt+= parseFloat(filterboat[0].price);\r\n                                          }\r\n                                          \r\n                                        }\r\n                                        \r\n                                      }\r\n                                      //parking charges\r\n                                      \r\n                                      var preparking=0;\r\n                                      if(!prevBooking.parkingnotreq){\r\n                                        for (let vh = 0; vh < prevBooking.vehicle.length; vh++) {\r\n                                          preparking+=((parseFloat(prevBooking.vehicle[vh].qty)*(parseFloat(prevBooking.vehicle[vh].amount) ))*(prediffDays)); \r\n                                        }\r\n                                      }\r\n                                      //exemptiona charges for Maubanin\r\n                                      var preexemptionamt=0;\r\n                                      //senior citizen discount for Maubanin\r\n                                      var prediscountamt=0;\r\n\r\n                                      var preTotalAmt=(preETAFamt+preBraceletmt+preBoatamt+preparking+preIslandHoppingAmt)-(preexemptionamt+prediscountamt);\r\n                                      //#endregion previous Charges\r\n                                      \r\n                                      //#region Current Charges\r\n                                        // number of day guest stay\r\n                                        const diffTime = Math.abs(booking.todate - booking.fromdate);\r\n                                        let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n                                        if(diffDays==0 || diffDays==1){\r\n                                          diffDays=1;\r\n                                        } \r\n\r\n                                      \r\n                                        //guest filter \r\n                                        var _vaildguest=booking.touristdata.filter(x=>x.deleted==false);\r\n                                        var _maubaninguest=_vaildguest.filter(x=>x.ismaubancitizen==true);\r\n                                        var _nonmaubaninguest=_vaildguest.filter(x=>x.ismaubancitizen==false);\r\n                                        var _islandhoppingguest=_vaildguest.filter(x=>x.islandhopping==true).length;\r\n                                          ;\r\n                                        //bracelet filter\r\n                                        var _rentbraceletcount=_nonmaubaninguest.filter(x=>x.isrentbracelet==true).length;\r\n                                        var _ownbraceletcount=_nonmaubaninguest.filter(x=>x.isrentbracelet==false).length;\r\n\r\n                                        var Braceletmt=(_rentbraceletcount>0?\r\n                                                            (parseFloat(_rentbraceletcount) * parseFloat(braceletdata.length>0?braceletdata[0].rentprice:0)):0)\r\n                                                            +(_ownbraceletcount>0?\r\n                                                            ((_ownbraceletcount) * (braceletdata.length>0?braceletdata[0].price:0)):0);\r\n\r\n                                        //environment charges\r\n                                        var ETAFamt=( _nonmaubaninguest.length>0?\r\n                                                    (parseFloat(_nonmaubaninguest.length) * parseFloat(environmentdata.length>0?parseFloat(environmentdata[0].price):0)):0);\r\n                                        \r\n                                        //island hopping charges\r\n                                        var IslandHoppingAmt=(_islandhoppingguest>0?\r\n                                                    (parseFloat(_islandhoppingguest) * (islandhoppingdata.length>0?islandhoppingdata[0].price:0)):0);\r\n                                      \r\n                                        //boat charges\r\n                                        var Boatamt=0;\r\n                                        if(!booking.ishotelprovideboat){\r\n                                          if(selectedboatdata.length>0){\r\n                                          for (let bt = 0; bt < selectedboatdata.length; bt++) {\r\n                                            let eleboat = selectedboatdata[bt];\r\n                                            let filterboat=boatdata.filter(x=>x.value==eleboat);\r\n                                            if(filterboat.length>0){\r\n                                              Boatamt+= parseFloat(filterboat[0].price);\r\n                                            }\r\n                                            \r\n                                          }\r\n                                          }\r\n                                        }\r\n                                        //parking charges\r\n                                        var parking=0;\r\n                                        if(!booking.parkingnotreq){\r\n                                          for (let vh = 0; vh < booking.vehicle.length; vh++) {\r\n                                            parking+=((parseFloat(booking.vehicle[vh].qty)*(parseFloat(booking.vehicle[vh].amount) ))*(diffDays)); \r\n                                          }\r\n                                        }\r\n                                        //exemptiona charges for Maubanin\r\n                                        var exemptionamt=0;\r\n                                        //senior citizen discount for Maubanin\r\n                                        var discountamt=0;\r\n                                        var TotalAmt=(ETAFamt+Braceletmt+Boatamt+parking+IslandHoppingAmt)-(exemptionamt+discountamt);\r\n                                        // setBooking(prevState => ({\r\n                                        //   ...prevState,\r\n                                        //   totalcharge: TotalAmt,\r\n                                        //   totaldue:((TotalAmt-preTotalAmt)>0?((TotalAmt-preTotalAmt)):0),\r\n                                        //   totalrefund:((TotalAmt-preTotalAmt)<=0?((TotalAmt-preTotalAmt) * (-1)):0)\r\n                                        // }));\r\n                                        //#endregion Current Charges\r\n                                    \r\n                                        \r\n\r\n\r\n\r\n\r\n                                    rows.push(<> \r\n                                              <table className=\"table\">\r\n                                              <thead>\r\n                                                    <tr>\r\n                                                      <td>Charges For </td>\r\n                                                      <td>Current Charges </td>\r\n                                                      <td className=\"prevchrgs\">Previous Charges </td>\r\n                                                    </tr>\r\n                                                \r\n                                              </thead>\r\n                                                    <tbody>\r\n                                                    <tr>\r\n                                                      <td>ETAF </td>\r\n                                                      <td>PHP {ETAFamt.toFixed(2)} </td>\r\n                                                      <td className=\"prevchrgs\">PHP {preETAFamt.toFixed(2)} </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td>Bracelet </td>\r\n                                                      <td>PHP {Braceletmt.toFixed(2)} </td>\r\n                                                      <td className=\"prevchrgs\">PHP {preBraceletmt.toFixed(2)} </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td>Boat </td>\r\n                                                      <td>PHP {Boatamt.toFixed(2)} </td>\r\n                                                      <td className=\"prevchrgs\">PHP {preBoatamt.toFixed(2)} </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td>Package </td>\r\n                                                      <td>PHP 0.00 </td>\r\n                                                      <td className=\"prevchrgs\">PHP 0.00 </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td>Island Hopping </td>\r\n                                                      <td>PHP {IslandHoppingAmt.toFixed(2)} </td>\r\n                                                      <td className=\"prevchrgs\">PHP {preIslandHoppingAmt.toFixed(2)} </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td>Parking </td>\r\n                                                      <td>PHP {parking.toFixed(2)} </td>\r\n                                                      <td className=\"prevchrgs\">PHP {preparking.toFixed(2)} </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td>Discount </td>\r\n                                                      <td>PHP {discountamt.toFixed(2)} </td>\r\n                                                      <td className=\"prevchrgs\">PHP {prediscountamt.toFixed(2)} </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td>Exemption </td>\r\n                                                      <td>PHP {exemptionamt.toFixed(2)} </td>\r\n                                                      <td className=\"prevchrgs\">PHP {preexemptionamt.toFixed(2)} </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td><b>Total</b> </td>\r\n                                                      <td><b>PHP {TotalAmt.toFixed(2)}</b> </td>\r\n                                                      <td className=\"prevchrgs\"><b>PHP {preTotalAmt.toFixed(2)}</b> </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td><b>Total Amount Due</b> </td>\r\n                                                      <td><b>PHP {((TotalAmt-preTotalAmt)>0?((TotalAmt-preTotalAmt)):0).toFixed(2)}</b> </td>\r\n                                                      <td className=\"prevchrgs\"><b>PHP {prevBooking.totaldue.toFixed(2)}</b> </td>\r\n                                                    </tr>\r\n                                                    <tr>\r\n                                                      <td><b>Total Refund</b> </td>\r\n                                                      <td><b>PHP {((TotalAmt-preTotalAmt)<=0?((TotalAmt-preTotalAmt) * (-1)):0).toFixed(2)}</b> </td>\r\n                                                      <td className=\"prevchrgs\"><b>PHP {prevBooking.totalrefund.toFixed(2)}</b> </td>\r\n                                                    </tr>\r\n                                                    </tbody>\r\n                                                  </table>\r\n                                            \r\n                                        </>);\r\n                                      \r\n                                      return rows;\r\n                                    }\r\n                                  }\r\n                     \r\n\r\n                                })()}\r\n                                    \r\n\r\n                                </div>\r\n                               \r\n                               \r\n                              </div>\r\n                              \r\n                              \r\n                            </CCardBody>\r\n                   \r\n                              </CCollapse>\r\n                            </CCard>\r\n                           \r\n                           \r\n                            </div>\r\n                        \r\n                        </div>\r\n                        </>   \r\n                    </CCol>\r\n                    \r\n                       \r\n                    </div>\r\n                       \r\n                </Card.Body>\r\n              \r\n                \r\n            </Card>\r\n        \r\n        \r\n            <CModal show={edittouristpopup} closeOnBackdrop={true} backdrop={true} onClose={() => setEditTouristpopup(!edittouristpopup)} size=\"lgx\">\r\n                <CModalHeader >\r\n                    <CModalTitle>\r\n                      Edit Booking \r\n                      \r\n                    </CModalTitle>\r\n                   \r\n                    \r\n                </CModalHeader>\r\n                <CModalBody>\r\n                  <div className=\"row\">\r\n                  <div className=\"col-md-4\">\r\n                              <label for=\"guests\" style={{fontWeight:\"bold\"}} >Returning Guest?</label>\r\n                              <CInput style={{ width: \"20%\",fontSize:\"0rem\" }}\r\n                               onChange={handleEBTChange} type=\"checkbox\" \r\n                               checked={edittourist.isreturningguest }\r\n                               value={edittourist.isreturningguest} id=\"isreturningguest\" />\r\n                      </div>\r\n                  </div>\r\n                 <span style={{color:\"red\",display:edittourist.isreturningguest==true?\"\":\"none\"}} >Note : Please Fill-in your Firstname, Lastname, gender and birthday to Validate! </span>\r\n                  {/* <div className=\"row\">\r\n                        <div className=\"col-md-4\" >\r\n                          <label for=\"guests\" \r\n                          style={{fontWeight:\"bold\",color:(edittourist.isreturningguestvaildate==true?\"green\":((edittourist.isreturningguestvaildate==false && edittourist.returnguestmsg!=\"\")?\"red\":\"black\"))}} \r\n                          >{returnguestmsg} </label>\r\n                            \r\n                        </div>\r\n                  </div>\r\n                  <div className=\"row\"  >\r\n                     \r\n                     \r\n                                  \r\n                  </div> */}\r\n                  <div className=\"clearfixmargin\"></div>\r\n                  <div className=\"row\">\r\n                        <div className=\"col-md-4\">\r\n                              <label for=\"guests\" style={{fontWeight:\"bold\"}}>First name<span style={{color:\"red\"}}>*</span></label>\r\n                              <CInput onChange={handleEBTChange} value={edittourist.firstname} \r\n                                type=\"text\" id=\"firstname\" placeholder=\"First Name\" />\r\n                           \r\n                        </div>\r\n                        <div className=\"col-md-4\">\r\n                              <label for=\"guests\" style={{fontWeight:\"bold\"}}>Last name<span style={{color:\"red\"}}>*</span></label>\r\n                              <CInput onChange={handleEBTChange} type=\"text\" value={edittourist.lastname} \r\n                              id=\"lastname\" placeholder=\"Last name\" />\r\n                            \r\n                        </div>\r\n                        <div className=\"col-md-4\">\r\n                          \r\n                            <label for=\"guests\" style={{fontWeight:\"bold\"}}>Date Of Birth<span style={{color:\"red\"}}>*</span></label><br></br>\r\n                            <DatePicker dateFormat=\"dd-MMM-yyyy\"  \r\n                            \r\n                            className=\"form-control\" \r\n                            selected={selectedtouristdob} onChange={(date) =>{\r\n                                                                            setSelectedTouristDOB(date);\r\n                                            } } />\r\n                                 \r\n                        </div>\r\n                  </div>\r\n                  <div className=\"clearfixmargin\"></div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-4\">\r\n                        <label for=\"guests\"  style={{fontWeight:\"bold\"}}>Gender<span style={{color:\"red\"}}>*</span></label>\r\n                                  <Select\r\n                                    className=\"dropdown\"\r\n                                    placeholder=\"Select\"\r\n                                    value={Gender.find(obj => obj.value === selectedtouristgender)} // set selected values\r\n                                    options={Gender} // set list of the data\r\n                                    onChange={handleChangeEBTGender} // assign onChange function\r\n                                  />\r\n                        </div>\r\n                    \r\n                    <div className=\"col-md-4\"  style={{display:edittourist.isreturningguest==true?\"\":\"none\"}} >\r\n                      <label for=\"guests\">Vaildate Return Guest</label><br></br>\r\n                      <CButton color=\"primary\" onClick={() =>vaildateguest()} >Go</CButton>\r\n                      </div>\r\n                    \r\n                 </div>\r\n                  <div className=\"clearfixmargin\"></div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-4\">\r\n                              <label for=\"guests\"  style={{fontWeight:\"bold\"}}>Citizenship {edittourist.isreturningguestvaildate}</label>\r\n                              <Select\r\n                              className=\"dropdown\"\r\n                              isDisabled={edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false}\r\n                              placeholder=\"Select Citizenship\"\r\n                              value={citizenship.find(obj => obj.value === selectedTouristCS)} // set selected values\r\n                              options={citizenship} // set list of the data\r\n                              onChange={handleChangeEBTCS} // assign onChange function\r\n                              />\r\n                      </div>\r\n                    <div className=\"col-md-4\">\r\n                          <label for=\"guests\"  style={{fontWeight:\"bold\"}}>Country Of orgin</label>\r\n                                    <Select\r\n                                    id=\"CountryofOrigin\"\r\n                                    className=\"dropdown\"\r\n                                    isDisabled={edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false}\r\n                                    placeholder=\"Select\"\r\n                                    value={country.find(obj => obj.value === selectedEBTCOO)} // set selected values\r\n                                    options={country} // set list of the data\r\n                                    onChange={handleChangeEBTCOO} // assign onChange function\r\n                                    />\r\n\r\n                      </div>\r\n                    <div className=\"col-md-4\">\r\n                          <label for=\"guests\" style={{fontWeight:\"bold\"}}>Province</label>\r\n                                  <Select\r\n                                  className=\"dropdown\"\r\n                                  placeholder=\"Select\"\r\n                                  isDisabled={edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false}\r\n                                  value={Province.find(obj => obj.value === selectedEBTProvince)} // set selected values\r\n                                  options={Province} // set list of the data\r\n                                  onChange={handleChangeEBTProvince} // assign onChange function\r\n                                  />\r\n                     </div>\r\n                  </div>\r\n                  <div className=\"clearfixmargin\"></div>\r\n                  <div className=\"row\">\r\n                   \r\n                     <div className=\"col-md-4\">\r\n                          <label for=\"guests\">Municipality</label>\r\n                                    <Select\r\n                                            className=\"dropdown\"\r\n                                            placeholder=\"Select\"\r\n                                            isDisabled={edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false}\r\n                                            value={Municipality.find(obj => obj.value === selectedMunicipality)} // set selected values\r\n                                            options={Municipality} // set list of the data\r\n                                            onChange={handleChangeEBTMunicipality} // assign onChange function\r\n                                          />\r\n\r\n                     </div>\r\n                     <div className=\"col-md-4\">\r\n                     <label for=\"guests\">Address</label>\r\n                            <CInput onChange={handleEBTChange} disabled={edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false} value={edittourist.address1} type=\"text\" id=\"address1\" placeholder=\"Address\" />\r\n                        \r\n\r\n                     </div>\r\n                     <div className=\"col-md-4\">\r\n                             <label for=\"guests\">Mobile Number</label>\r\n                             <CInput onChange={handleEBTChange} disabled={edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false} value={edittourist.mobilenumber} type=\"text\" id=\"mobilenumber\" placeholder=\"Mobile \" />\r\n                   \r\n                    </div>\r\n                  </div>\r\n                  <div className=\"clearfixmargin\"></div>\r\n                  <div className=\"row\">\r\n                    \r\n                    <div className=\"col-md-4\">\r\n                            <label for=\"guests\">E-mail Address</label>\r\n                              <CInput onChange={handleEBTChange} disabled={edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false} value={edittourist.emailid} type=\"text\" id=\"emailid\" placeholder=\"Email\" />\r\n                   \r\n                    </div>\r\n\r\n                  </div>\r\n                  <div className=\"clearfixmargin\"></div>\r\n                  <div className=\"row\">\r\n                      \r\n                      <div className=\"col-md-4\">\r\n                              <label for=\"guests\" style={{fontWeight:\"bold\"}}>Rent Bracelet</label>\r\n                              <CInput style={{ width: \"20%\",fontSize:\"0rem\" }} \r\n                              onChange={handleEBTChange} type=\"checkbox\" \r\n                              disabled={edittourist.isreturningguest==true?!edittourist.isreturningguestvaildate:false}\r\n                              checked={edittourist.isrentbracelet } \r\n                              value={edittourist.isrentbracelet} id=\"isrentbracelet\" />\r\n                      </div>\r\n                      <div className=\"col-md-4\" style={{fontWeight:\"bold\",display:edittourist.isreturningguestvaildate==true?\"\":\"none\"}}>\r\n                              <label for=\"guests\" style={{fontSize:\"14px\"}}>Do you have Bracelet</label>\r\n                              <CInput style={{ width: \"20%\",fontSize:\"0rem\" }} \r\n                              onChange={handleEBTChange} type=\"checkbox\" \r\n                              disabled={edittourist.isreturningguest==true?edittourist.isreturningguestvaildate:false}\r\n                              checked={edittourist.braceletavailable } \r\n                              value={edittourist.braceletavailable} id=\"braceletavailable\" />\r\n                      </div>\r\n                      \r\n                  </div>\r\n                  \r\n               \r\n                </CModalBody>\r\n          \r\n                <CModalFooter>\r\n                  <CButton color=\"primary\"   onClick={() => updatetourist()}>Save</CButton>{' '}\r\n                  <CButton color=\"secondary\" onClick={() => setEditTouristpopup(!edittouristpopup)}>Cancel</CButton>\r\n                </CModalFooter>\r\n            </CModal>\r\n            <CModal show={deletetouristpopup} closeOnBackdrop={true} backdrop={true} onClose={() => setDeletetouristpopup(!deletetouristpopup)} size=\"sm\">\r\n                <CModalHeader>Deleteing Toursist </CModalHeader>\r\n                <CModalBody>\r\n                  Are you sure want to delete \" {edittourist.firstname} {edittourist.lastname} \" tourist? \r\n                </CModalBody>\r\n                <CModalFooter>\r\n                  <CButton color=\"primary\"   onClick={() => deletetourist()}>Delete</CButton>{' '}\r\n                  <CButton color=\"secondary\" onClick={() => setDeletetouristpopup(!deletetouristpopup)}>Cancel</CButton>\r\n                </CModalFooter>\r\n            </CModal>\r\n            \r\n            <CModal show={isconfirmbooking} onClose={() => setIsConfirmBooking(!isconfirmbooking)}   size=\"lg\">\r\n              <CModalHeader closeButton>\r\n              <CModalTitle>Booking    <small className=\"text-muted\"> Detail</small> </CModalTitle>\r\n              </CModalHeader>\r\n              <CModalBody>\r\n              <CCol md=\"12\">\r\n                  <CForm>\r\n                    <CRow>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >From Date</CLabel><br></br>\r\n                        <CLabel ><b>{moment(new Date(booking.fromdate)).format(\"DD MMM YYYY\")}</b></CLabel>\r\n                      </CCol>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >To Date</CLabel><br></br>\r\n                        <CLabel ><b>{moment(new Date(booking.todate)).format(\"DD MMM YYYY\")}</b></CLabel>\r\n                      </CCol>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >Time</CLabel><br></br>\r\n                        <CLabel ><b>{booking.touristdata.length>0? getTimeSlot():0}</b></CLabel>\r\n                      </CCol>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >Boat Capacity</CLabel><br></br>\r\n                        <CLabel ><b>{booking.touristdata.length>0? getBoats():0}</b></CLabel>\r\n                      </CCol>\r\n                    \r\n                    </CRow>\r\n                    <br></br>\r\n                    <CRow>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >Package</CLabel><br></br>\r\n                        <CLabel ><b>{booking.touristdata.length>0? booking.package[0].label:0}</b></CLabel>\r\n                      </CCol>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >Boat Provided by Resort</CLabel><br></br>\r\n                        <CLabel ><b>{booking.ishotelprovideboat==true?\"Yes\":\"No\"}</b></CLabel>\r\n                      \r\n                      </CCol>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >Accommodation</CLabel><br></br>\r\n                        <CLabel ><b>{booking.hotelid.length>0? booking.hotelid[0].label:0}</b></CLabel>\r\n                      \r\n                      </CCol>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >Number Of Guest</CLabel><br></br>\r\n                        <CLabel ><b>{selectednumberguest}</b></CLabel>\r\n                      \r\n                      </CCol>\r\n                    </CRow>\r\n                    <br></br>\r\n                    <CRow>\r\n                   \r\n                   \r\n                      \r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >Previous Charge</CLabel><br></br>\r\n                        <CLabel ><b>PHP {parseFloat( booking.totalcharge).toFixed(2)}</b></CLabel>\r\n                      \r\n                      </CCol>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >New Charge</CLabel><br></br>\r\n                        <CLabel ><b>PHP {parseFloat( totaldue>0? (booking.totalcharge+totaldue):0).toFixed(2)}</b></CLabel>\r\n                      \r\n                      </CCol>\r\n                      <CCol xs=\"3\" >\r\n                        <CLabel >{isRefundNoShow==1?\"No Show Refund\": (totaldue>0?\"Total Amount Due\":((totalrefund>0)?\"Total Refund\":\"Total Amount Due\"))}</CLabel><br></br>\r\n                        <CLabel ><b>PHP {isRefundNoShow==1?parseFloat(booking.totalcharge) :parseFloat( totaldue>0?totaldue:((totalrefund>0)?totalrefund:0)).toFixed(2)}</b></CLabel>\r\n                      \r\n                      </CCol>\r\n                      \r\n                    \r\n                    </CRow>\r\n                  </CForm>\r\n\r\n                </CCol>\r\n\r\n              </CModalBody>\r\n              <CModalFooter>\r\n              <CImg\r\n                    src={processing}\r\n                    height=\"50\"\r\n                    width=\"50\"\r\n                    style={{display:isprocessing==true?\"\":\"none\"}}\r\n                    alt=\"qrcode\"\r\n                  />\r\n                  <CButton color=\"primary \" style={{float: \"right\" ,display:isprocessing==true?\"none\":\"\"}} onClick={() => Savedata()} >{totaldue>0?\"Proceed to Pay\":\"Apply For Refund\"}</CButton>\r\n                  {/* <CButton color=\"secondary\" onClose={() => setIsConfirmBooking(!isconfirmbooking)} >Make Changes</CButton> */}\r\n                  <CButton color=\"primary \" style={{float: \"right\"}}  onClick={() =>setIsConfirmBooking(!isconfirmbooking)}>Make Changes</CButton>\r\n        \r\n              </CModalFooter>\r\n             \r\n            </CModal>\r\n\r\n   \r\n         </CContainer>\r\n      \r\n    </div>\r\n    </>)\r\n}\r\nexport default EditBooking;\r\n"]},"metadata":{},"sourceType":"module"}